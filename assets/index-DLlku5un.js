(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function Qm(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var xc={exports:{}},ea={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em;function Cy(){if(em)return ea;em=1;var u=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,l){var h=null;if(l!==void 0&&(h=""+l),o.key!==void 0&&(h=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:u,type:r,key:h,ref:o!==void 0?o:null,props:l}}return ea.Fragment=e,ea.jsx=n,ea.jsxs=n,ea}var tm;function Ry(){return tm||(tm=1,xc.exports=Cy()),xc.exports}var xi=Ry(),wc={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var im;function Oy(){if(im)return ye;im=1;var u=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.iterator;function b(S){return S===null||typeof S!="object"?null:(S=y&&S[y]||S["@@iterator"],typeof S=="function"?S:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,R={};function B(S,Z,ie){this.props=S,this.context=Z,this.refs=R,this.updater=ie||x}B.prototype.isReactComponent={},B.prototype.setState=function(S,Z){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,Z,"setState")},B.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function w(){}w.prototype=B.prototype;function F(S,Z,ie){this.props=S,this.context=Z,this.refs=R,this.updater=ie||x}var O=F.prototype=new w;O.constructor=F,D(O,B.prototype),O.isPureReactComponent=!0;var z=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},V=Object.prototype.hasOwnProperty;function T(S,Z,ie,te,oe,Ee){return ie=Ee.ref,{$$typeof:u,type:S,key:Z,ref:ie!==void 0?ie:null,props:Ee}}function U(S,Z){return T(S.type,Z,void 0,void 0,void 0,S.props)}function K(S){return typeof S=="object"&&S!==null&&S.$$typeof===u}function Q(S){var Z={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(ie){return Z[ie]})}var ee=/\/+/g;function $(S,Z){return typeof S=="object"&&S!==null&&S.key!=null?Q(""+S.key):Z.toString(36)}function J(){}function ae(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(J,J):(S.status="pending",S.then(function(Z){S.status==="pending"&&(S.status="fulfilled",S.value=Z)},function(Z){S.status==="pending"&&(S.status="rejected",S.reason=Z)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function P(S,Z,ie,te,oe){var Ee=typeof S;(Ee==="undefined"||Ee==="boolean")&&(S=null);var de=!1;if(S===null)de=!0;else switch(Ee){case"bigint":case"string":case"number":de=!0;break;case"object":switch(S.$$typeof){case u:case e:de=!0;break;case v:return de=S._init,P(de(S._payload),Z,ie,te,oe)}}if(de)return oe=oe(S),de=te===""?"."+$(S,0):te,z(oe)?(ie="",de!=null&&(ie=de.replace(ee,"$&/")+"/"),P(oe,Z,ie,"",function(pi){return pi})):oe!=null&&(K(oe)&&(oe=U(oe,ie+(oe.key==null||S&&S.key===oe.key?"":(""+oe.key).replace(ee,"$&/")+"/")+de)),Z.push(oe)),1;de=0;var Et=te===""?".":te+":";if(z(S))for(var Ve=0;Ve<S.length;Ve++)te=S[Ve],Ee=Et+$(te,Ve),de+=P(te,Z,ie,Ee,oe);else if(Ve=b(S),typeof Ve=="function")for(S=Ve.call(S),Ve=0;!(te=S.next()).done;)te=te.value,Ee=Et+$(te,Ve++),de+=P(te,Z,ie,Ee,oe);else if(Ee==="object"){if(typeof S.then=="function")return P(ae(S),Z,ie,te,oe);throw Z=String(S),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return de}function A(S,Z,ie){if(S==null)return S;var te=[],oe=0;return P(S,te,"","",function(Ee){return Z.call(ie,Ee,oe++)}),te}function X(S){if(S._status===-1){var Z=S._result;Z=Z(),Z.then(function(ie){(S._status===0||S._status===-1)&&(S._status=1,S._result=ie)},function(ie){(S._status===0||S._status===-1)&&(S._status=2,S._result=ie)}),S._status===-1&&(S._status=0,S._result=Z)}if(S._status===1)return S._result.default;throw S._result}var ne=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)};function ve(){}return ye.Children={map:A,forEach:function(S,Z,ie){A(S,function(){Z.apply(this,arguments)},ie)},count:function(S){var Z=0;return A(S,function(){Z++}),Z},toArray:function(S){return A(S,function(Z){return Z})||[]},only:function(S){if(!K(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},ye.Component=B,ye.Fragment=n,ye.Profiler=o,ye.PureComponent=F,ye.StrictMode=r,ye.Suspense=p,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,ye.__COMPILER_RUNTIME={__proto__:null,c:function(S){return M.H.useMemoCache(S)}},ye.cache=function(S){return function(){return S.apply(null,arguments)}},ye.cloneElement=function(S,Z,ie){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var te=D({},S.props),oe=S.key,Ee=void 0;if(Z!=null)for(de in Z.ref!==void 0&&(Ee=void 0),Z.key!==void 0&&(oe=""+Z.key),Z)!V.call(Z,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&Z.ref===void 0||(te[de]=Z[de]);var de=arguments.length-2;if(de===1)te.children=ie;else if(1<de){for(var Et=Array(de),Ve=0;Ve<de;Ve++)Et[Ve]=arguments[Ve+2];te.children=Et}return T(S.type,oe,void 0,void 0,Ee,te)},ye.createContext=function(S){return S={$$typeof:h,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:l,_context:S},S},ye.createElement=function(S,Z,ie){var te,oe={},Ee=null;if(Z!=null)for(te in Z.key!==void 0&&(Ee=""+Z.key),Z)V.call(Z,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(oe[te]=Z[te]);var de=arguments.length-2;if(de===1)oe.children=ie;else if(1<de){for(var Et=Array(de),Ve=0;Ve<de;Ve++)Et[Ve]=arguments[Ve+2];oe.children=Et}if(S&&S.defaultProps)for(te in de=S.defaultProps,de)oe[te]===void 0&&(oe[te]=de[te]);return T(S,Ee,void 0,void 0,null,oe)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(S){return{$$typeof:d,render:S}},ye.isValidElement=K,ye.lazy=function(S){return{$$typeof:v,_payload:{_status:-1,_result:S},_init:X}},ye.memo=function(S,Z){return{$$typeof:m,type:S,compare:Z===void 0?null:Z}},ye.startTransition=function(S){var Z=M.T,ie={};M.T=ie;try{var te=S(),oe=M.S;oe!==null&&oe(ie,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(ve,ne)}catch(Ee){ne(Ee)}finally{M.T=Z}},ye.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},ye.use=function(S){return M.H.use(S)},ye.useActionState=function(S,Z,ie){return M.H.useActionState(S,Z,ie)},ye.useCallback=function(S,Z){return M.H.useCallback(S,Z)},ye.useContext=function(S){return M.H.useContext(S)},ye.useDebugValue=function(){},ye.useDeferredValue=function(S,Z){return M.H.useDeferredValue(S,Z)},ye.useEffect=function(S,Z,ie){var te=M.H;if(typeof ie=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return te.useEffect(S,Z)},ye.useId=function(){return M.H.useId()},ye.useImperativeHandle=function(S,Z,ie){return M.H.useImperativeHandle(S,Z,ie)},ye.useInsertionEffect=function(S,Z){return M.H.useInsertionEffect(S,Z)},ye.useLayoutEffect=function(S,Z){return M.H.useLayoutEffect(S,Z)},ye.useMemo=function(S,Z){return M.H.useMemo(S,Z)},ye.useOptimistic=function(S,Z){return M.H.useOptimistic(S,Z)},ye.useReducer=function(S,Z,ie){return M.H.useReducer(S,Z,ie)},ye.useRef=function(S){return M.H.useRef(S)},ye.useState=function(S){return M.H.useState(S)},ye.useSyncExternalStore=function(S,Z,ie){return M.H.useSyncExternalStore(S,Z,ie)},ye.useTransition=function(){return M.H.useTransition()},ye.version="19.1.0",ye}var nm;function Zc(){return nm||(nm=1,wc.exports=Oy()),wc.exports}var Xo=Zc();const ce=Qm(Xo);var Ec={exports:{}},ta={},Tc={exports:{}},Sc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sm;function Ny(){return sm||(sm=1,function(u){function e(A,X){var ne=A.length;A.push(X);e:for(;0<ne;){var ve=ne-1>>>1,S=A[ve];if(0<o(S,X))A[ve]=X,A[ne]=S,ne=ve;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var X=A[0],ne=A.pop();if(ne!==X){A[0]=ne;e:for(var ve=0,S=A.length,Z=S>>>1;ve<Z;){var ie=2*(ve+1)-1,te=A[ie],oe=ie+1,Ee=A[oe];if(0>o(te,ne))oe<S&&0>o(Ee,te)?(A[ve]=Ee,A[oe]=ne,ve=oe):(A[ve]=te,A[ie]=ne,ve=ie);else if(oe<S&&0>o(Ee,ne))A[ve]=Ee,A[oe]=ne,ve=oe;else break e}}return X}function o(A,X){var ne=A.sortIndex-X.sortIndex;return ne!==0?ne:A.id-X.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;u.unstable_now=function(){return l.now()}}else{var h=Date,d=h.now();u.unstable_now=function(){return h.now()-d}}var p=[],m=[],v=1,y=null,b=3,x=!1,D=!1,R=!1,B=!1,w=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function z(A){for(var X=n(m);X!==null;){if(X.callback===null)r(m);else if(X.startTime<=A)r(m),X.sortIndex=X.expirationTime,e(p,X);else break;X=n(m)}}function M(A){if(R=!1,z(A),!D)if(n(p)!==null)D=!0,V||(V=!0,$());else{var X=n(m);X!==null&&P(M,X.startTime-A)}}var V=!1,T=-1,U=5,K=-1;function Q(){return B?!0:!(u.unstable_now()-K<U)}function ee(){if(B=!1,V){var A=u.unstable_now();K=A;var X=!0;try{e:{D=!1,R&&(R=!1,F(T),T=-1),x=!0;var ne=b;try{t:{for(z(A),y=n(p);y!==null&&!(y.expirationTime>A&&Q());){var ve=y.callback;if(typeof ve=="function"){y.callback=null,b=y.priorityLevel;var S=ve(y.expirationTime<=A);if(A=u.unstable_now(),typeof S=="function"){y.callback=S,z(A),X=!0;break t}y===n(p)&&r(p),z(A)}else r(p);y=n(p)}if(y!==null)X=!0;else{var Z=n(m);Z!==null&&P(M,Z.startTime-A),X=!1}}break e}finally{y=null,b=ne,x=!1}X=void 0}}finally{X?$():V=!1}}}var $;if(typeof O=="function")$=function(){O(ee)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ae=J.port2;J.port1.onmessage=ee,$=function(){ae.postMessage(null)}}else $=function(){w(ee,0)};function P(A,X){T=w(function(){A(u.unstable_now())},X)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(A){A.callback=null},u.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<A?Math.floor(1e3/A):5},u.unstable_getCurrentPriorityLevel=function(){return b},u.unstable_next=function(A){switch(b){case 1:case 2:case 3:var X=3;break;default:X=b}var ne=b;b=X;try{return A()}finally{b=ne}},u.unstable_requestPaint=function(){B=!0},u.unstable_runWithPriority=function(A,X){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var ne=b;b=A;try{return X()}finally{b=ne}},u.unstable_scheduleCallback=function(A,X,ne){var ve=u.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ve+ne:ve):ne=ve,A){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=ne+S,A={id:v++,callback:X,priorityLevel:A,startTime:ne,expirationTime:S,sortIndex:-1},ne>ve?(A.sortIndex=ne,e(m,A),n(p)===null&&A===n(m)&&(R?(F(T),T=-1):R=!0,P(M,ne-ve))):(A.sortIndex=S,e(p,A),D||x||(D=!0,V||(V=!0,$()))),A},u.unstable_shouldYield=Q,u.unstable_wrapCallback=function(A){var X=b;return function(){var ne=b;b=X;try{return A.apply(this,arguments)}finally{b=ne}}}}(Sc)),Sc}var rm;function My(){return rm||(rm=1,Tc.exports=Ny()),Tc.exports}var Dc={exports:{}},_t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var am;function zy(){if(am)return _t;am=1;var u=Zc();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,m,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:p,containerInfo:m,implementation:v}}var h=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return _t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_t.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(p,m,null,v)},_t.flushSync=function(p){var m=h.T,v=r.p;try{if(h.T=null,r.p=2,p)return p()}finally{h.T=m,r.p=v,r.d.f()}},_t.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(p,m))},_t.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},_t.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,y=d(v,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,x=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?r.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:x}):v==="script"&&r.d.X(p,{crossOrigin:y,integrity:b,fetchPriority:x,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},_t.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);r.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(p)},_t.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,y=d(v,m.crossOrigin);r.d.L(p,v,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},_t.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=d(m.as,m.crossOrigin);r.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(p)},_t.requestFormReset=function(p){r.d.r(p)},_t.unstable_batchedUpdates=function(p,m){return p(m)},_t.useFormState=function(p,m,v){return h.H.useFormState(p,m,v)},_t.useFormStatus=function(){return h.H.useHostTransitionStatus()},_t.version="19.1.0",_t}var om;function Jm(){if(om)return Dc.exports;om=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(e){console.error(e)}}return u(),Dc.exports=zy(),Dc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lm;function Iy(){if(lm)return ta;lm=1;var u=My(),e=Zc(),n=Jm();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function l(t){var i=t,s=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(s=i.return),t=i.return;while(t)}return i.tag===3?s:null}function h(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function d(t){if(l(t)!==t)throw Error(r(188))}function p(t){var i=t.alternate;if(!i){if(i=l(t),i===null)throw Error(r(188));return i!==t?null:t}for(var s=t,a=i;;){var c=s.return;if(c===null)break;var f=c.alternate;if(f===null){if(a=c.return,a!==null){s=a;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===s)return d(c),t;if(f===a)return d(c),i;f=f.sibling}throw Error(r(188))}if(s.return!==a.return)s=c,a=f;else{for(var g=!1,_=c.child;_;){if(_===s){g=!0,s=c,a=f;break}if(_===a){g=!0,a=c,s=f;break}_=_.sibling}if(!g){for(_=f.child;_;){if(_===s){g=!0,s=f,a=c;break}if(_===a){g=!0,a=f,s=c;break}_=_.sibling}if(!g)throw Error(r(189))}}if(s.alternate!==a)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?t:i}function m(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=m(t),i!==null)return i;t=t.sibling}return null}var v=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),O=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function $(t){return t===null||typeof t!="object"?null:(t=ee&&t[ee]||t["@@iterator"],typeof t=="function"?t:null)}var J=Symbol.for("react.client.reference");function ae(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===J?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case D:return"Fragment";case B:return"Profiler";case R:return"StrictMode";case M:return"Suspense";case V:return"SuspenseList";case K:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case x:return"Portal";case O:return(t.displayName||"Context")+".Provider";case F:return(t._context.displayName||"Context")+".Consumer";case z:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case T:return i=t.displayName||null,i!==null?i:ae(t.type)||"Memo";case U:i=t._payload,t=t._init;try{return ae(t(i))}catch{}}return null}var P=Array.isArray,A=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},ve=[],S=-1;function Z(t){return{current:t}}function ie(t){0>S||(t.current=ve[S],ve[S]=null,S--)}function te(t,i){S++,ve[S]=t.current,t.current=i}var oe=Z(null),Ee=Z(null),de=Z(null),Et=Z(null);function Ve(t,i){switch(te(de,i),te(Ee,t),te(oe,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Cp(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Cp(i),t=Rp(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ie(oe),te(oe,t)}function pi(){ie(oe),ie(Ee),ie(de)}function tr(t){t.memoizedState!==null&&te(Et,t);var i=oe.current,s=Rp(i,t.type);i!==s&&(te(Ee,t),te(oe,s))}function nt(t){Ee.current===t&&(ie(oe),ie(Ee)),Et.current===t&&(ie(Et),Zr._currentValue=ne)}var zt=Object.prototype.hasOwnProperty,an=u.unstable_scheduleCallback,ir=u.unstable_cancelCallback,ya=u.unstable_shouldYield,ov=u.unstable_requestPaint,mi=u.unstable_now,lv=u.unstable_getCurrentPriorityLevel,oh=u.unstable_ImmediatePriority,lh=u.unstable_UserBlockingPriority,ba=u.unstable_NormalPriority,uv=u.unstable_LowPriority,uh=u.unstable_IdlePriority,cv=u.log,hv=u.unstable_setDisableYieldValue,nr=null,It=null;function on(t){if(typeof cv=="function"&&hv(t),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(nr,t)}catch{}}var Gt=Math.clz32?Math.clz32:pv,dv=Math.log,fv=Math.LN2;function pv(t){return t>>>=0,t===0?32:31-(dv(t)/fv|0)|0}var xa=256,wa=4194304;function Un(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ea(t,i,s){var a=t.pendingLanes;if(a===0)return 0;var c=0,f=t.suspendedLanes,g=t.pingedLanes;t=t.warmLanes;var _=a&134217727;return _!==0?(a=_&~f,a!==0?c=Un(a):(g&=_,g!==0?c=Un(g):s||(s=_&~t,s!==0&&(c=Un(s))))):(_=a&~f,_!==0?c=Un(_):g!==0?c=Un(g):s||(s=a&~t,s!==0&&(c=Un(s)))),c===0?0:i!==0&&i!==c&&(i&f)===0&&(f=c&-c,s=i&-i,f>=s||f===32&&(s&4194048)!==0)?i:c}function sr(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function mv(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ch(){var t=xa;return xa<<=1,(xa&4194048)===0&&(xa=256),t}function hh(){var t=wa;return wa<<=1,(wa&62914560)===0&&(wa=4194304),t}function cl(t){for(var i=[],s=0;31>s;s++)i.push(t);return i}function rr(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function gv(t,i,s,a,c,f){var g=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var _=t.entanglements,E=t.expirationTimes,G=t.hiddenUpdates;for(s=g&~s;0<s;){var Y=31-Gt(s),W=1<<Y;_[Y]=0,E[Y]=-1;var L=G[Y];if(L!==null)for(G[Y]=null,Y=0;Y<L.length;Y++){var H=L[Y];H!==null&&(H.lane&=-536870913)}s&=~W}a!==0&&dh(t,a,0),f!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=f&~(g&~i))}function dh(t,i,s){t.pendingLanes|=i,t.suspendedLanes&=~i;var a=31-Gt(i);t.entangledLanes|=i,t.entanglements[a]=t.entanglements[a]|1073741824|s&4194090}function fh(t,i){var s=t.entangledLanes|=i;for(t=t.entanglements;s;){var a=31-Gt(s),c=1<<a;c&i|t[a]&i&&(t[a]|=i),s&=~c}}function hl(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function dl(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ph(){var t=X.p;return t!==0?t:(t=window.event,t===void 0?32:Wp(t.type))}function vv(t,i){var s=X.p;try{return X.p=t,i()}finally{X.p=s}}var ln=Math.random().toString(36).slice(2),gt="__reactFiber$"+ln,Ct="__reactProps$"+ln,ls="__reactContainer$"+ln,fl="__reactEvents$"+ln,_v="__reactListeners$"+ln,yv="__reactHandles$"+ln,mh="__reactResources$"+ln,ar="__reactMarker$"+ln;function pl(t){delete t[gt],delete t[Ct],delete t[fl],delete t[_v],delete t[yv]}function us(t){var i=t[gt];if(i)return i;for(var s=t.parentNode;s;){if(i=s[ls]||s[gt]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(t=zp(t);t!==null;){if(s=t[gt])return s;t=zp(t)}return i}t=s,s=t.parentNode}return null}function cs(t){if(t=t[gt]||t[ls]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function or(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function hs(t){var i=t[mh];return i||(i=t[mh]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function lt(t){t[ar]=!0}var gh=new Set,vh={};function Vn(t,i){ds(t,i),ds(t+"Capture",i)}function ds(t,i){for(vh[t]=i,t=0;t<i.length;t++)gh.add(i[t])}var bv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_h={},yh={};function xv(t){return zt.call(yh,t)?!0:zt.call(_h,t)?!1:bv.test(t)?yh[t]=!0:(_h[t]=!0,!1)}function Ta(t,i,s){if(xv(i))if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var a=i.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+s)}}function Sa(t,i,s){if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+s)}}function Ai(t,i,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(i,s,""+a)}}var ml,bh;function fs(t){if(ml===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);ml=i&&i[1]||"",bh=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ml+t+bh}var gl=!1;function vl(t,i){if(!t||gl)return"";gl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(i){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(H){var L=H}Reflect.construct(t,[],W)}else{try{W.call()}catch(H){L=H}t.call(W.prototype)}}else{try{throw Error()}catch(H){L=H}(W=t())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(H){if(H&&L&&typeof H.stack=="string")return[H.stack,L.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=a.DetermineComponentFrameRoot(),g=f[0],_=f[1];if(g&&_){var E=g.split(`
`),G=_.split(`
`);for(c=a=0;a<E.length&&!E[a].includes("DetermineComponentFrameRoot");)a++;for(;c<G.length&&!G[c].includes("DetermineComponentFrameRoot");)c++;if(a===E.length||c===G.length)for(a=E.length-1,c=G.length-1;1<=a&&0<=c&&E[a]!==G[c];)c--;for(;1<=a&&0<=c;a--,c--)if(E[a]!==G[c]){if(a!==1||c!==1)do if(a--,c--,0>c||E[a]!==G[c]){var Y=`
`+E[a].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=a&&0<=c);break}}}finally{gl=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?fs(s):""}function wv(t){switch(t.tag){case 26:case 27:case 5:return fs(t.type);case 16:return fs("Lazy");case 13:return fs("Suspense");case 19:return fs("SuspenseList");case 0:case 15:return vl(t.type,!1);case 11:return vl(t.type.render,!1);case 1:return vl(t.type,!0);case 31:return fs("Activity");default:return""}}function xh(t){try{var i="";do i+=wv(t),t=t.return;while(t);return i}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function Ft(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wh(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ev(t){var i=wh(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),a=""+t[i];if(!t.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,f=s.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return c.call(this)},set:function(g){a=""+g,f.call(this,g)}}),Object.defineProperty(t,i,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Da(t){t._valueTracker||(t._valueTracker=Ev(t))}function Eh(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var s=i.getValue(),a="";return t&&(a=wh(t)?t.checked?"true":"false":t.value),t=a,t!==s?(i.setValue(t),!0):!1}function Aa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Tv=/[\n"\\]/g;function Yt(t){return t.replace(Tv,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function _l(t,i,s,a,c,f,g,_){t.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?t.type=g:t.removeAttribute("type"),i!=null?g==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Ft(i)):t.value!==""+Ft(i)&&(t.value=""+Ft(i)):g!=="submit"&&g!=="reset"||t.removeAttribute("value"),i!=null?yl(t,g,Ft(i)):s!=null?yl(t,g,Ft(s)):a!=null&&t.removeAttribute("value"),c==null&&f!=null&&(t.defaultChecked=!!f),c!=null&&(t.checked=c&&typeof c!="function"&&typeof c!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.name=""+Ft(_):t.removeAttribute("name")}function Th(t,i,s,a,c,f,g,_){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||s!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;s=s!=null?""+Ft(s):"",i=i!=null?""+Ft(i):s,_||i===t.value||(t.value=i),t.defaultValue=i}a=a??c,a=typeof a!="function"&&typeof a!="symbol"&&!!a,t.checked=_?t.checked:!!a,t.defaultChecked=!!a,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.name=g)}function yl(t,i,s){i==="number"&&Aa(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function ps(t,i,s,a){if(t=t.options,i){i={};for(var c=0;c<s.length;c++)i["$"+s[c]]=!0;for(s=0;s<t.length;s++)c=i.hasOwnProperty("$"+t[s].value),t[s].selected!==c&&(t[s].selected=c),c&&a&&(t[s].defaultSelected=!0)}else{for(s=""+Ft(s),i=null,c=0;c<t.length;c++){if(t[c].value===s){t[c].selected=!0,a&&(t[c].defaultSelected=!0);return}i!==null||t[c].disabled||(i=t[c])}i!==null&&(i.selected=!0)}}function Sh(t,i,s){if(i!=null&&(i=""+Ft(i),i!==t.value&&(t.value=i),s==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=s!=null?""+Ft(s):""}function Dh(t,i,s,a){if(i==null){if(a!=null){if(s!=null)throw Error(r(92));if(P(a)){if(1<a.length)throw Error(r(93));a=a[0]}s=a}s==null&&(s=""),i=s}s=Ft(i),t.defaultValue=s,a=t.textContent,a===s&&a!==""&&a!==null&&(t.value=a)}function ms(t,i){if(i){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=i;return}}t.textContent=i}var Sv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ah(t,i,s){var a=i.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?a?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":a?t.setProperty(i,s):typeof s!="number"||s===0||Sv.has(i)?i==="float"?t.cssFloat=s:t[i]=(""+s).trim():t[i]=s+"px"}function Ch(t,i,s){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,s!=null){for(var a in s)!s.hasOwnProperty(a)||i!=null&&i.hasOwnProperty(a)||(a.indexOf("--")===0?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="");for(var c in i)a=i[c],i.hasOwnProperty(c)&&s[c]!==a&&Ah(t,c,a)}else for(var f in i)i.hasOwnProperty(f)&&Ah(t,f,i[f])}function bl(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Av=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ca(t){return Av.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var xl=null;function wl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gs=null,vs=null;function Rh(t){var i=cs(t);if(i&&(t=i.stateNode)){var s=t[Ct]||null;e:switch(t=i.stateNode,i.type){case"input":if(_l(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),i=s.name,s.type==="radio"&&i!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Yt(""+i)+'"][type="radio"]'),i=0;i<s.length;i++){var a=s[i];if(a!==t&&a.form===t.form){var c=a[Ct]||null;if(!c)throw Error(r(90));_l(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(i=0;i<s.length;i++)a=s[i],a.form===t.form&&Eh(a)}break e;case"textarea":Sh(t,s.value,s.defaultValue);break e;case"select":i=s.value,i!=null&&ps(t,!!s.multiple,i,!1)}}}var El=!1;function Oh(t,i,s){if(El)return t(i,s);El=!0;try{var a=t(i);return a}finally{if(El=!1,(gs!==null||vs!==null)&&(po(),gs&&(i=gs,t=vs,vs=gs=null,Rh(i),t)))for(i=0;i<t.length;i++)Rh(t[i])}}function lr(t,i){var s=t.stateNode;if(s===null)return null;var a=s[Ct]||null;if(a===null)return null;s=a[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(r(231,i,typeof s));return s}var Ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tl=!1;if(Ci)try{var ur={};Object.defineProperty(ur,"passive",{get:function(){Tl=!0}}),window.addEventListener("test",ur,ur),window.removeEventListener("test",ur,ur)}catch{Tl=!1}var un=null,Sl=null,Ra=null;function Nh(){if(Ra)return Ra;var t,i=Sl,s=i.length,a,c="value"in un?un.value:un.textContent,f=c.length;for(t=0;t<s&&i[t]===c[t];t++);var g=s-t;for(a=1;a<=g&&i[s-a]===c[f-a];a++);return Ra=c.slice(t,1<a?1-a:void 0)}function Oa(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Na(){return!0}function Mh(){return!1}function Rt(t){function i(s,a,c,f,g){this._reactName=s,this._targetInst=c,this.type=a,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var _ in t)t.hasOwnProperty(_)&&(s=t[_],this[_]=s?s(f):f[_]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Na:Mh,this.isPropagationStopped=Mh,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Na)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Na)},persist:function(){},isPersistent:Na}),i}var Bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ma=Rt(Bn),cr=v({},Bn,{view:0,detail:0}),Cv=Rt(cr),Dl,Al,hr,za=v({},cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hr&&(hr&&t.type==="mousemove"?(Dl=t.screenX-hr.screenX,Al=t.screenY-hr.screenY):Al=Dl=0,hr=t),Dl)},movementY:function(t){return"movementY"in t?t.movementY:Al}}),zh=Rt(za),Rv=v({},za,{dataTransfer:0}),Ov=Rt(Rv),Nv=v({},cr,{relatedTarget:0}),Cl=Rt(Nv),Mv=v({},Bn,{animationName:0,elapsedTime:0,pseudoElement:0}),zv=Rt(Mv),Iv=v({},Bn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Gv=Rt(Iv),Lv=v({},Bn,{data:0}),Ih=Rt(Lv),Uv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hv(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Bv[t])?!!i[t]:!1}function Rl(){return Hv}var Pv=v({},cr,{key:function(t){if(t.key){var i=Uv[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Oa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rl,charCode:function(t){return t.type==="keypress"?Oa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Oa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jv=Rt(Pv),kv=v({},za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gh=Rt(kv),Fv=v({},cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rl}),Yv=Rt(Fv),Xv=v({},Bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),qv=Rt(Xv),Wv=v({},za,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Zv=Rt(Wv),Kv=v({},Bn,{newState:0,oldState:0}),Qv=Rt(Kv),Jv=[9,13,27,32],Ol=Ci&&"CompositionEvent"in window,dr=null;Ci&&"documentMode"in document&&(dr=document.documentMode);var $v=Ci&&"TextEvent"in window&&!dr,Lh=Ci&&(!Ol||dr&&8<dr&&11>=dr),Uh=" ",Vh=!1;function Bh(t,i){switch(t){case"keyup":return Jv.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _s=!1;function e_(t,i){switch(t){case"compositionend":return Hh(i);case"keypress":return i.which!==32?null:(Vh=!0,Uh);case"textInput":return t=i.data,t===Uh&&Vh?null:t;default:return null}}function t_(t,i){if(_s)return t==="compositionend"||!Ol&&Bh(t,i)?(t=Nh(),Ra=Sl=un=null,_s=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Lh&&i.locale!=="ko"?null:i.data;default:return null}}var i_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ph(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!i_[t.type]:i==="textarea"}function jh(t,i,s,a){gs?vs?vs.push(a):vs=[a]:gs=a,i=bo(i,"onChange"),0<i.length&&(s=new Ma("onChange","change",null,s,a),t.push({event:s,listeners:i}))}var fr=null,pr=null;function n_(t){Ep(t,0)}function Ia(t){var i=or(t);if(Eh(i))return t}function kh(t,i){if(t==="change")return i}var Fh=!1;if(Ci){var Nl;if(Ci){var Ml="oninput"in document;if(!Ml){var Yh=document.createElement("div");Yh.setAttribute("oninput","return;"),Ml=typeof Yh.oninput=="function"}Nl=Ml}else Nl=!1;Fh=Nl&&(!document.documentMode||9<document.documentMode)}function Xh(){fr&&(fr.detachEvent("onpropertychange",qh),pr=fr=null)}function qh(t){if(t.propertyName==="value"&&Ia(pr)){var i=[];jh(i,pr,t,wl(t)),Oh(n_,i)}}function s_(t,i,s){t==="focusin"?(Xh(),fr=i,pr=s,fr.attachEvent("onpropertychange",qh)):t==="focusout"&&Xh()}function r_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ia(pr)}function a_(t,i){if(t==="click")return Ia(i)}function o_(t,i){if(t==="input"||t==="change")return Ia(i)}function l_(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Lt=typeof Object.is=="function"?Object.is:l_;function mr(t,i){if(Lt(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var s=Object.keys(t),a=Object.keys(i);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var c=s[a];if(!zt.call(i,c)||!Lt(t[c],i[c]))return!1}return!0}function Wh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zh(t,i){var s=Wh(t);t=0;for(var a;s;){if(s.nodeType===3){if(a=t+s.textContent.length,t<=i&&a>=i)return{node:s,offset:i-t};t=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Wh(s)}}function Kh(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Kh(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Qh(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Aa(t.document);i instanceof t.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)t=i.contentWindow;else break;i=Aa(t.document)}return i}function zl(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var u_=Ci&&"documentMode"in document&&11>=document.documentMode,ys=null,Il=null,gr=null,Gl=!1;function Jh(t,i,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Gl||ys==null||ys!==Aa(a)||(a=ys,"selectionStart"in a&&zl(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),gr&&mr(gr,a)||(gr=a,a=bo(Il,"onSelect"),0<a.length&&(i=new Ma("onSelect","select",null,i,s),t.push({event:i,listeners:a}),i.target=ys)))}function Hn(t,i){var s={};return s[t.toLowerCase()]=i.toLowerCase(),s["Webkit"+t]="webkit"+i,s["Moz"+t]="moz"+i,s}var bs={animationend:Hn("Animation","AnimationEnd"),animationiteration:Hn("Animation","AnimationIteration"),animationstart:Hn("Animation","AnimationStart"),transitionrun:Hn("Transition","TransitionRun"),transitionstart:Hn("Transition","TransitionStart"),transitioncancel:Hn("Transition","TransitionCancel"),transitionend:Hn("Transition","TransitionEnd")},Ll={},$h={};Ci&&($h=document.createElement("div").style,"AnimationEvent"in window||(delete bs.animationend.animation,delete bs.animationiteration.animation,delete bs.animationstart.animation),"TransitionEvent"in window||delete bs.transitionend.transition);function Pn(t){if(Ll[t])return Ll[t];if(!bs[t])return t;var i=bs[t],s;for(s in i)if(i.hasOwnProperty(s)&&s in $h)return Ll[t]=i[s];return t}var ed=Pn("animationend"),td=Pn("animationiteration"),id=Pn("animationstart"),c_=Pn("transitionrun"),h_=Pn("transitionstart"),d_=Pn("transitioncancel"),nd=Pn("transitionend"),sd=new Map,Ul="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ul.push("scrollEnd");function oi(t,i){sd.set(t,i),Vn(i,[t])}var rd=new WeakMap;function Xt(t,i){if(typeof t=="object"&&t!==null){var s=rd.get(t);return s!==void 0?s:(i={value:t,source:i,stack:xh(i)},rd.set(t,i),i)}return{value:t,source:i,stack:xh(i)}}var qt=[],xs=0,Vl=0;function Ga(){for(var t=xs,i=Vl=xs=0;i<t;){var s=qt[i];qt[i++]=null;var a=qt[i];qt[i++]=null;var c=qt[i];qt[i++]=null;var f=qt[i];if(qt[i++]=null,a!==null&&c!==null){var g=a.pending;g===null?c.next=c:(c.next=g.next,g.next=c),a.pending=c}f!==0&&ad(s,c,f)}}function La(t,i,s,a){qt[xs++]=t,qt[xs++]=i,qt[xs++]=s,qt[xs++]=a,Vl|=a,t.lanes|=a,t=t.alternate,t!==null&&(t.lanes|=a)}function Bl(t,i,s,a){return La(t,i,s,a),Ua(t)}function ws(t,i){return La(t,null,null,i),Ua(t)}function ad(t,i,s){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s);for(var c=!1,f=t.return;f!==null;)f.childLanes|=s,a=f.alternate,a!==null&&(a.childLanes|=s),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(c=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,c&&i!==null&&(c=31-Gt(s),t=f.hiddenUpdates,a=t[c],a===null?t[c]=[i]:a.push(i),i.lane=s|536870912),f):null}function Ua(t){if(50<Pr)throw Pr=0,Yu=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Es={};function f_(t,i,s,a){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(t,i,s,a){return new f_(t,i,s,a)}function Hl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ri(t,i){var s=t.alternate;return s===null?(s=Ut(t.tag,i,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=i,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,i=t.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function od(t,i){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,i=s.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Va(t,i,s,a,c,f){var g=0;if(a=t,typeof t=="function")Hl(t)&&(g=1);else if(typeof t=="string")g=my(t,s,oe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case K:return t=Ut(31,s,i,c),t.elementType=K,t.lanes=f,t;case D:return jn(s.children,c,f,i);case R:g=8,c|=24;break;case B:return t=Ut(12,s,i,c|2),t.elementType=B,t.lanes=f,t;case M:return t=Ut(13,s,i,c),t.elementType=M,t.lanes=f,t;case V:return t=Ut(19,s,i,c),t.elementType=V,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case w:case O:g=10;break e;case F:g=9;break e;case z:g=11;break e;case T:g=14;break e;case U:g=16,a=null;break e}g=29,s=Error(r(130,t===null?"null":typeof t,"")),a=null}return i=Ut(g,s,i,c),i.elementType=t,i.type=a,i.lanes=f,i}function jn(t,i,s,a){return t=Ut(7,t,a,i),t.lanes=s,t}function Pl(t,i,s){return t=Ut(6,t,null,i),t.lanes=s,t}function jl(t,i,s){return i=Ut(4,t.children!==null?t.children:[],t.key,i),i.lanes=s,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Ts=[],Ss=0,Ba=null,Ha=0,Wt=[],Zt=0,kn=null,Oi=1,Ni="";function Fn(t,i){Ts[Ss++]=Ha,Ts[Ss++]=Ba,Ba=t,Ha=i}function ld(t,i,s){Wt[Zt++]=Oi,Wt[Zt++]=Ni,Wt[Zt++]=kn,kn=t;var a=Oi;t=Ni;var c=32-Gt(a)-1;a&=~(1<<c),s+=1;var f=32-Gt(i)+c;if(30<f){var g=c-c%5;f=(a&(1<<g)-1).toString(32),a>>=g,c-=g,Oi=1<<32-Gt(i)+c|s<<c|a,Ni=f+t}else Oi=1<<f|s<<c|a,Ni=t}function kl(t){t.return!==null&&(Fn(t,1),ld(t,1,0))}function Fl(t){for(;t===Ba;)Ba=Ts[--Ss],Ts[Ss]=null,Ha=Ts[--Ss],Ts[Ss]=null;for(;t===kn;)kn=Wt[--Zt],Wt[Zt]=null,Ni=Wt[--Zt],Wt[Zt]=null,Oi=Wt[--Zt],Wt[Zt]=null}var Tt=null,qe=null,Ce=!1,Yn=null,gi=!1,Yl=Error(r(519));function Xn(t){var i=Error(r(418,""));throw yr(Xt(i,t)),Yl}function ud(t){var i=t.stateNode,s=t.type,a=t.memoizedProps;switch(i[gt]=t,i[Ct]=a,s){case"dialog":Se("cancel",i),Se("close",i);break;case"iframe":case"object":case"embed":Se("load",i);break;case"video":case"audio":for(s=0;s<kr.length;s++)Se(kr[s],i);break;case"source":Se("error",i);break;case"img":case"image":case"link":Se("error",i),Se("load",i);break;case"details":Se("toggle",i);break;case"input":Se("invalid",i),Th(i,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0),Da(i);break;case"select":Se("invalid",i);break;case"textarea":Se("invalid",i),Dh(i,a.value,a.defaultValue,a.children),Da(i)}s=a.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||i.textContent===""+s||a.suppressHydrationWarning===!0||Ap(i.textContent,s)?(a.popover!=null&&(Se("beforetoggle",i),Se("toggle",i)),a.onScroll!=null&&Se("scroll",i),a.onScrollEnd!=null&&Se("scrollend",i),a.onClick!=null&&(i.onclick=xo),i=!0):i=!1,i||Xn(t)}function cd(t){for(Tt=t.return;Tt;)switch(Tt.tag){case 5:case 13:gi=!1;return;case 27:case 3:gi=!0;return;default:Tt=Tt.return}}function vr(t){if(t!==Tt)return!1;if(!Ce)return cd(t),Ce=!0,!1;var i=t.tag,s;if((s=i!==3&&i!==27)&&((s=i===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||oc(t.type,t.memoizedProps)),s=!s),s&&qe&&Xn(t),cd(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(i===0){qe=ui(t.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++;t=t.nextSibling}qe=null}}else i===27?(i=qe,Sn(t.type)?(t=hc,hc=null,qe=t):qe=i):qe=Tt?ui(t.stateNode.nextSibling):null;return!0}function _r(){qe=Tt=null,Ce=!1}function hd(){var t=Yn;return t!==null&&(Mt===null?Mt=t:Mt.push.apply(Mt,t),Yn=null),t}function yr(t){Yn===null?Yn=[t]:Yn.push(t)}var Xl=Z(null),qn=null,Mi=null;function cn(t,i,s){te(Xl,i._currentValue),i._currentValue=s}function zi(t){t._currentValue=Xl.current,ie(Xl)}function ql(t,i,s){for(;t!==null;){var a=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,a!==null&&(a.childLanes|=i)):a!==null&&(a.childLanes&i)!==i&&(a.childLanes|=i),t===s)break;t=t.return}}function Wl(t,i,s,a){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var f=c.dependencies;if(f!==null){var g=c.child;f=f.firstContext;e:for(;f!==null;){var _=f;f=c;for(var E=0;E<i.length;E++)if(_.context===i[E]){f.lanes|=s,_=f.alternate,_!==null&&(_.lanes|=s),ql(f.return,s,t),a||(g=null);break e}f=_.next}}else if(c.tag===18){if(g=c.return,g===null)throw Error(r(341));g.lanes|=s,f=g.alternate,f!==null&&(f.lanes|=s),ql(g,s,t),g=null}else g=c.child;if(g!==null)g.return=c;else for(g=c;g!==null;){if(g===t){g=null;break}if(c=g.sibling,c!==null){c.return=g.return,g=c;break}g=g.return}c=g}}function br(t,i,s,a){t=null;for(var c=i,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var g=c.alternate;if(g===null)throw Error(r(387));if(g=g.memoizedProps,g!==null){var _=c.type;Lt(c.pendingProps.value,g.value)||(t!==null?t.push(_):t=[_])}}else if(c===Et.current){if(g=c.alternate,g===null)throw Error(r(387));g.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push(Zr):t=[Zr])}c=c.return}t!==null&&Wl(i,t,s,a),i.flags|=262144}function Pa(t){for(t=t.firstContext;t!==null;){if(!Lt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Wn(t){qn=t,Mi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function vt(t){return dd(qn,t)}function ja(t,i){return qn===null&&Wn(t),dd(t,i)}function dd(t,i){var s=i._currentValue;if(i={context:i,memoizedValue:s,next:null},Mi===null){if(t===null)throw Error(r(308));Mi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Mi=Mi.next=i;return s}var p_=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(s,a){t.push(a)}};this.abort=function(){i.aborted=!0,t.forEach(function(s){return s()})}},m_=u.unstable_scheduleCallback,g_=u.unstable_NormalPriority,st={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zl(){return{controller:new p_,data:new Map,refCount:0}}function xr(t){t.refCount--,t.refCount===0&&m_(g_,function(){t.controller.abort()})}var wr=null,Kl=0,Ds=0,As=null;function v_(t,i){if(wr===null){var s=wr=[];Kl=0,Ds=Ju(),As={status:"pending",value:void 0,then:function(a){s.push(a)}}}return Kl++,i.then(fd,fd),i}function fd(){if(--Kl===0&&wr!==null){As!==null&&(As.status="fulfilled");var t=wr;wr=null,Ds=0,As=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function __(t,i){var s=[],a={status:"pending",value:null,reason:null,then:function(c){s.push(c)}};return t.then(function(){a.status="fulfilled",a.value=i;for(var c=0;c<s.length;c++)(0,s[c])(i)},function(c){for(a.status="rejected",a.reason=c,c=0;c<s.length;c++)(0,s[c])(void 0)}),a}var pd=A.S;A.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&v_(t,i),pd!==null&&pd(t,i)};var Zn=Z(null);function Ql(){var t=Zn.current;return t!==null?t:Be.pooledCache}function ka(t,i){i===null?te(Zn,Zn.current):te(Zn,i.pool)}function md(){var t=Ql();return t===null?null:{parent:st._currentValue,pool:t}}var Er=Error(r(460)),gd=Error(r(474)),Fa=Error(r(542)),Jl={then:function(){}};function vd(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ya(){}function _d(t,i,s){switch(s=t[s],s===void 0?t.push(i):s!==i&&(i.then(Ya,Ya),i=s),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,bd(t),t;default:if(typeof i.status=="string")i.then(Ya,Ya);else{if(t=Be,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(a){if(i.status==="pending"){var c=i;c.status="fulfilled",c.value=a}},function(a){if(i.status==="pending"){var c=i;c.status="rejected",c.reason=a}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,bd(t),t}throw Tr=i,Er}}var Tr=null;function yd(){if(Tr===null)throw Error(r(459));var t=Tr;return Tr=null,t}function bd(t){if(t===Er||t===Fa)throw Error(r(483))}var hn=!1;function $l(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function eu(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function dn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function fn(t,i,s){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(Oe&2)!==0){var c=a.pending;return c===null?i.next=i:(i.next=c.next,c.next=i),a.pending=i,i=Ua(t),ad(t,null,s),i}return La(t,a,i,s),Ua(t)}function Sr(t,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194048)!==0)){var a=i.lanes;a&=t.pendingLanes,s|=a,i.lanes=s,fh(t,s)}}function tu(t,i){var s=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var c=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var g={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};f===null?c=f=g:f=f.next=g,s=s.next}while(s!==null);f===null?c=f=i:f=f.next=i}else c=f=i;s={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:a.shared,callbacks:a.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=i:t.next=i,s.lastBaseUpdate=i}var iu=!1;function Dr(){if(iu){var t=As;if(t!==null)throw t}}function Ar(t,i,s,a){iu=!1;var c=t.updateQueue;hn=!1;var f=c.firstBaseUpdate,g=c.lastBaseUpdate,_=c.shared.pending;if(_!==null){c.shared.pending=null;var E=_,G=E.next;E.next=null,g===null?f=G:g.next=G,g=E;var Y=t.alternate;Y!==null&&(Y=Y.updateQueue,_=Y.lastBaseUpdate,_!==g&&(_===null?Y.firstBaseUpdate=G:_.next=G,Y.lastBaseUpdate=E))}if(f!==null){var W=c.baseState;g=0,Y=G=E=null,_=f;do{var L=_.lane&-536870913,H=L!==_.lane;if(H?(De&L)===L:(a&L)===L){L!==0&&L===Ds&&(iu=!0),Y!==null&&(Y=Y.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var ge=t,he=_;L=i;var Ie=s;switch(he.tag){case 1:if(ge=he.payload,typeof ge=="function"){W=ge.call(Ie,W,L);break e}W=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=he.payload,L=typeof ge=="function"?ge.call(Ie,W,L):ge,L==null)break e;W=v({},W,L);break e;case 2:hn=!0}}L=_.callback,L!==null&&(t.flags|=64,H&&(t.flags|=8192),H=c.callbacks,H===null?c.callbacks=[L]:H.push(L))}else H={lane:L,tag:_.tag,payload:_.payload,callback:_.callback,next:null},Y===null?(G=Y=H,E=W):Y=Y.next=H,g|=L;if(_=_.next,_===null){if(_=c.shared.pending,_===null)break;H=_,_=H.next,H.next=null,c.lastBaseUpdate=H,c.shared.pending=null}}while(!0);Y===null&&(E=W),c.baseState=E,c.firstBaseUpdate=G,c.lastBaseUpdate=Y,f===null&&(c.shared.lanes=0),xn|=g,t.lanes=g,t.memoizedState=W}}function xd(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function wd(t,i){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)xd(s[t],i)}var Cs=Z(null),Xa=Z(0);function Ed(t,i){t=Hi,te(Xa,t),te(Cs,i),Hi=t|i.baseLanes}function nu(){te(Xa,Hi),te(Cs,Cs.current)}function su(){Hi=Xa.current,ie(Cs),ie(Xa)}var pn=0,xe=null,Me=null,$e=null,qa=!1,Rs=!1,Kn=!1,Wa=0,Cr=0,Os=null,y_=0;function Qe(){throw Error(r(321))}function ru(t,i){if(i===null)return!1;for(var s=0;s<i.length&&s<t.length;s++)if(!Lt(t[s],i[s]))return!1;return!0}function au(t,i,s,a,c,f){return pn=f,xe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,A.H=t===null||t.memoizedState===null?of:lf,Kn=!1,f=s(a,c),Kn=!1,Rs&&(f=Sd(i,s,a,c)),Td(t),f}function Td(t){A.H=eo;var i=Me!==null&&Me.next!==null;if(pn=0,$e=Me=xe=null,qa=!1,Cr=0,Os=null,i)throw Error(r(300));t===null||ut||(t=t.dependencies,t!==null&&Pa(t)&&(ut=!0))}function Sd(t,i,s,a){xe=t;var c=0;do{if(Rs&&(Os=null),Cr=0,Rs=!1,25<=c)throw Error(r(301));if(c+=1,$e=Me=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}A.H=D_,f=i(s,a)}while(Rs);return f}function b_(){var t=A.H,i=t.useState()[0];return i=typeof i.then=="function"?Rr(i):i,t=t.useState()[0],(Me!==null?Me.memoizedState:null)!==t&&(xe.flags|=1024),i}function ou(){var t=Wa!==0;return Wa=0,t}function lu(t,i,s){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~s}function uu(t){if(qa){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}qa=!1}pn=0,$e=Me=xe=null,Rs=!1,Cr=Wa=0,Os=null}function Ot(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?xe.memoizedState=$e=t:$e=$e.next=t,$e}function et(){if(Me===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=Me.next;var i=$e===null?xe.memoizedState:$e.next;if(i!==null)$e=i,Me=t;else{if(t===null)throw xe.alternate===null?Error(r(467)):Error(r(310));Me=t,t={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},$e===null?xe.memoizedState=$e=t:$e=$e.next=t}return $e}function cu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rr(t){var i=Cr;return Cr+=1,Os===null&&(Os=[]),t=_d(Os,t,i),i=xe,($e===null?i.memoizedState:$e.next)===null&&(i=i.alternate,A.H=i===null||i.memoizedState===null?of:lf),t}function Za(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Rr(t);if(t.$$typeof===O)return vt(t)}throw Error(r(438,String(t)))}function hu(t){var i=null,s=xe.updateQueue;if(s!==null&&(i=s.memoCache),i==null){var a=xe.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(i={data:a.data.map(function(c){return c.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),s===null&&(s=cu(),xe.updateQueue=s),s.memoCache=i,s=i.data[i.index],s===void 0)for(s=i.data[i.index]=Array(t),a=0;a<t;a++)s[a]=Q;return i.index++,s}function Ii(t,i){return typeof i=="function"?i(t):i}function Ka(t){var i=et();return du(i,Me,t)}function du(t,i,s){var a=t.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=s;var c=t.baseQueue,f=a.pending;if(f!==null){if(c!==null){var g=c.next;c.next=f.next,f.next=g}i.baseQueue=c=f,a.pending=null}if(f=t.baseState,c===null)t.memoizedState=f;else{i=c.next;var _=g=null,E=null,G=i,Y=!1;do{var W=G.lane&-536870913;if(W!==G.lane?(De&W)===W:(pn&W)===W){var L=G.revertLane;if(L===0)E!==null&&(E=E.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),W===Ds&&(Y=!0);else if((pn&L)===L){G=G.next,L===Ds&&(Y=!0);continue}else W={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},E===null?(_=E=W,g=f):E=E.next=W,xe.lanes|=L,xn|=L;W=G.action,Kn&&s(f,W),f=G.hasEagerState?G.eagerState:s(f,W)}else L={lane:W,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},E===null?(_=E=L,g=f):E=E.next=L,xe.lanes|=W,xn|=W;G=G.next}while(G!==null&&G!==i);if(E===null?g=f:E.next=_,!Lt(f,t.memoizedState)&&(ut=!0,Y&&(s=As,s!==null)))throw s;t.memoizedState=f,t.baseState=g,t.baseQueue=E,a.lastRenderedState=f}return c===null&&(a.lanes=0),[t.memoizedState,a.dispatch]}function fu(t){var i=et(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var a=s.dispatch,c=s.pending,f=i.memoizedState;if(c!==null){s.pending=null;var g=c=c.next;do f=t(f,g.action),g=g.next;while(g!==c);Lt(f,i.memoizedState)||(ut=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),s.lastRenderedState=f}return[f,a]}function Dd(t,i,s){var a=xe,c=et(),f=Ce;if(f){if(s===void 0)throw Error(r(407));s=s()}else s=i();var g=!Lt((Me||c).memoizedState,s);g&&(c.memoizedState=s,ut=!0),c=c.queue;var _=Rd.bind(null,a,c,t);if(Or(2048,8,_,[t]),c.getSnapshot!==i||g||$e!==null&&$e.memoizedState.tag&1){if(a.flags|=2048,Ns(9,Qa(),Cd.bind(null,a,c,s,i),null),Be===null)throw Error(r(349));f||(pn&124)!==0||Ad(a,i,s)}return s}function Ad(t,i,s){t.flags|=16384,t={getSnapshot:i,value:s},i=xe.updateQueue,i===null?(i=cu(),xe.updateQueue=i,i.stores=[t]):(s=i.stores,s===null?i.stores=[t]:s.push(t))}function Cd(t,i,s,a){i.value=s,i.getSnapshot=a,Od(i)&&Nd(t)}function Rd(t,i,s){return s(function(){Od(i)&&Nd(t)})}function Od(t){var i=t.getSnapshot;t=t.value;try{var s=i();return!Lt(t,s)}catch{return!0}}function Nd(t){var i=ws(t,2);i!==null&&jt(i,t,2)}function pu(t){var i=Ot();if(typeof t=="function"){var s=t;if(t=s(),Kn){on(!0);try{s()}finally{on(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:t},i}function Md(t,i,s,a){return t.baseState=s,du(t,Me,typeof a=="function"?a:Ii)}function x_(t,i,s,a,c){if($a(t))throw Error(r(485));if(t=i.action,t!==null){var f={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){f.listeners.push(g)}};A.T!==null?s(!0):f.isTransition=!1,a(f),s=i.pending,s===null?(f.next=i.pending=f,zd(i,f)):(f.next=s.next,i.pending=s.next=f)}}function zd(t,i){var s=i.action,a=i.payload,c=t.state;if(i.isTransition){var f=A.T,g={};A.T=g;try{var _=s(c,a),E=A.S;E!==null&&E(g,_),Id(t,i,_)}catch(G){mu(t,i,G)}finally{A.T=f}}else try{f=s(c,a),Id(t,i,f)}catch(G){mu(t,i,G)}}function Id(t,i,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(a){Gd(t,i,a)},function(a){return mu(t,i,a)}):Gd(t,i,s)}function Gd(t,i,s){i.status="fulfilled",i.value=s,Ld(i),t.state=s,i=t.pending,i!==null&&(s=i.next,s===i?t.pending=null:(s=s.next,i.next=s,zd(t,s)))}function mu(t,i,s){var a=t.pending;if(t.pending=null,a!==null){a=a.next;do i.status="rejected",i.reason=s,Ld(i),i=i.next;while(i!==a)}t.action=null}function Ld(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Ud(t,i){return i}function Vd(t,i){if(Ce){var s=Be.formState;if(s!==null){e:{var a=xe;if(Ce){if(qe){t:{for(var c=qe,f=gi;c.nodeType!==8;){if(!f){c=null;break t}if(c=ui(c.nextSibling),c===null){c=null;break t}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){qe=ui(c.nextSibling),a=c.data==="F!";break e}}Xn(a)}a=!1}a&&(i=s[0])}}return s=Ot(),s.memoizedState=s.baseState=i,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ud,lastRenderedState:i},s.queue=a,s=sf.bind(null,xe,a),a.dispatch=s,a=pu(!1),f=bu.bind(null,xe,!1,a.queue),a=Ot(),c={state:i,dispatch:null,action:t,pending:null},a.queue=c,s=x_.bind(null,xe,c,f,s),c.dispatch=s,a.memoizedState=t,[i,s,!1]}function Bd(t){var i=et();return Hd(i,Me,t)}function Hd(t,i,s){if(i=du(t,i,Ud)[0],t=Ka(Ii)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var a=Rr(i)}catch(g){throw g===Er?Fa:g}else a=i;i=et();var c=i.queue,f=c.dispatch;return s!==i.memoizedState&&(xe.flags|=2048,Ns(9,Qa(),w_.bind(null,c,s),null)),[a,f,t]}function w_(t,i){t.action=i}function Pd(t){var i=et(),s=Me;if(s!==null)return Hd(i,s,t);et(),i=i.memoizedState,s=et();var a=s.queue.dispatch;return s.memoizedState=t,[i,a,!1]}function Ns(t,i,s,a){return t={tag:t,create:s,deps:a,inst:i,next:null},i=xe.updateQueue,i===null&&(i=cu(),xe.updateQueue=i),s=i.lastEffect,s===null?i.lastEffect=t.next=t:(a=s.next,s.next=t,t.next=a,i.lastEffect=t),t}function Qa(){return{destroy:void 0,resource:void 0}}function jd(){return et().memoizedState}function Ja(t,i,s,a){var c=Ot();a=a===void 0?null:a,xe.flags|=t,c.memoizedState=Ns(1|i,Qa(),s,a)}function Or(t,i,s,a){var c=et();a=a===void 0?null:a;var f=c.memoizedState.inst;Me!==null&&a!==null&&ru(a,Me.memoizedState.deps)?c.memoizedState=Ns(i,f,s,a):(xe.flags|=t,c.memoizedState=Ns(1|i,f,s,a))}function kd(t,i){Ja(8390656,8,t,i)}function Fd(t,i){Or(2048,8,t,i)}function Yd(t,i){return Or(4,2,t,i)}function Xd(t,i){return Or(4,4,t,i)}function qd(t,i){if(typeof i=="function"){t=t();var s=i(t);return function(){typeof s=="function"?s():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Wd(t,i,s){s=s!=null?s.concat([t]):null,Or(4,4,qd.bind(null,i,t),s)}function gu(){}function Zd(t,i){var s=et();i=i===void 0?null:i;var a=s.memoizedState;return i!==null&&ru(i,a[1])?a[0]:(s.memoizedState=[t,i],t)}function Kd(t,i){var s=et();i=i===void 0?null:i;var a=s.memoizedState;if(i!==null&&ru(i,a[1]))return a[0];if(a=t(),Kn){on(!0);try{t()}finally{on(!1)}}return s.memoizedState=[a,i],a}function vu(t,i,s){return s===void 0||(pn&1073741824)!==0?t.memoizedState=i:(t.memoizedState=s,t=ep(),xe.lanes|=t,xn|=t,s)}function Qd(t,i,s,a){return Lt(s,i)?s:Cs.current!==null?(t=vu(t,s,a),Lt(t,i)||(ut=!0),t):(pn&42)===0?(ut=!0,t.memoizedState=s):(t=ep(),xe.lanes|=t,xn|=t,i)}function Jd(t,i,s,a,c){var f=X.p;X.p=f!==0&&8>f?f:8;var g=A.T,_={};A.T=_,bu(t,!1,i,s);try{var E=c(),G=A.S;if(G!==null&&G(_,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var Y=__(E,a);Nr(t,i,Y,Pt(t))}else Nr(t,i,a,Pt(t))}catch(W){Nr(t,i,{then:function(){},status:"rejected",reason:W},Pt())}finally{X.p=f,A.T=g}}function E_(){}function _u(t,i,s,a){if(t.tag!==5)throw Error(r(476));var c=$d(t).queue;Jd(t,c,i,ne,s===null?E_:function(){return ef(t),s(a)})}function $d(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:ne},next:null};var s={};return i.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:s},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function ef(t){var i=$d(t).next.queue;Nr(t,i,{},Pt())}function yu(){return vt(Zr)}function tf(){return et().memoizedState}function nf(){return et().memoizedState}function T_(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var s=Pt();t=dn(s);var a=fn(i,t,s);a!==null&&(jt(a,i,s),Sr(a,i,s)),i={cache:Zl()},t.payload=i;return}i=i.return}}function S_(t,i,s){var a=Pt();s={lane:a,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},$a(t)?rf(i,s):(s=Bl(t,i,s,a),s!==null&&(jt(s,t,a),af(s,i,a)))}function sf(t,i,s){var a=Pt();Nr(t,i,s,a)}function Nr(t,i,s,a){var c={lane:a,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if($a(t))rf(i,c);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var g=i.lastRenderedState,_=f(g,s);if(c.hasEagerState=!0,c.eagerState=_,Lt(_,g))return La(t,i,c,0),Be===null&&Ga(),!1}catch{}finally{}if(s=Bl(t,i,c,a),s!==null)return jt(s,t,a),af(s,i,a),!0}return!1}function bu(t,i,s,a){if(a={lane:2,revertLane:Ju(),action:a,hasEagerState:!1,eagerState:null,next:null},$a(t)){if(i)throw Error(r(479))}else i=Bl(t,s,a,2),i!==null&&jt(i,t,2)}function $a(t){var i=t.alternate;return t===xe||i!==null&&i===xe}function rf(t,i){Rs=qa=!0;var s=t.pending;s===null?i.next=i:(i.next=s.next,s.next=i),t.pending=i}function af(t,i,s){if((s&4194048)!==0){var a=i.lanes;a&=t.pendingLanes,s|=a,i.lanes=s,fh(t,s)}}var eo={readContext:vt,use:Za,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useLayoutEffect:Qe,useInsertionEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useSyncExternalStore:Qe,useId:Qe,useHostTransitionStatus:Qe,useFormState:Qe,useActionState:Qe,useOptimistic:Qe,useMemoCache:Qe,useCacheRefresh:Qe},of={readContext:vt,use:Za,useCallback:function(t,i){return Ot().memoizedState=[t,i===void 0?null:i],t},useContext:vt,useEffect:kd,useImperativeHandle:function(t,i,s){s=s!=null?s.concat([t]):null,Ja(4194308,4,qd.bind(null,i,t),s)},useLayoutEffect:function(t,i){return Ja(4194308,4,t,i)},useInsertionEffect:function(t,i){Ja(4,2,t,i)},useMemo:function(t,i){var s=Ot();i=i===void 0?null:i;var a=t();if(Kn){on(!0);try{t()}finally{on(!1)}}return s.memoizedState=[a,i],a},useReducer:function(t,i,s){var a=Ot();if(s!==void 0){var c=s(i);if(Kn){on(!0);try{s(i)}finally{on(!1)}}}else c=i;return a.memoizedState=a.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},a.queue=t,t=t.dispatch=S_.bind(null,xe,t),[a.memoizedState,t]},useRef:function(t){var i=Ot();return t={current:t},i.memoizedState=t},useState:function(t){t=pu(t);var i=t.queue,s=sf.bind(null,xe,i);return i.dispatch=s,[t.memoizedState,s]},useDebugValue:gu,useDeferredValue:function(t,i){var s=Ot();return vu(s,t,i)},useTransition:function(){var t=pu(!1);return t=Jd.bind(null,xe,t.queue,!0,!1),Ot().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,s){var a=xe,c=Ot();if(Ce){if(s===void 0)throw Error(r(407));s=s()}else{if(s=i(),Be===null)throw Error(r(349));(De&124)!==0||Ad(a,i,s)}c.memoizedState=s;var f={value:s,getSnapshot:i};return c.queue=f,kd(Rd.bind(null,a,f,t),[t]),a.flags|=2048,Ns(9,Qa(),Cd.bind(null,a,f,s,i),null),s},useId:function(){var t=Ot(),i=Be.identifierPrefix;if(Ce){var s=Ni,a=Oi;s=(a&~(1<<32-Gt(a)-1)).toString(32)+s,i=""+i+"R"+s,s=Wa++,0<s&&(i+="H"+s.toString(32)),i+=""}else s=y_++,i=""+i+"r"+s.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:yu,useFormState:Vd,useActionState:Vd,useOptimistic:function(t){var i=Ot();i.memoizedState=i.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=s,i=bu.bind(null,xe,!0,s),s.dispatch=i,[t,i]},useMemoCache:hu,useCacheRefresh:function(){return Ot().memoizedState=T_.bind(null,xe)}},lf={readContext:vt,use:Za,useCallback:Zd,useContext:vt,useEffect:Fd,useImperativeHandle:Wd,useInsertionEffect:Yd,useLayoutEffect:Xd,useMemo:Kd,useReducer:Ka,useRef:jd,useState:function(){return Ka(Ii)},useDebugValue:gu,useDeferredValue:function(t,i){var s=et();return Qd(s,Me.memoizedState,t,i)},useTransition:function(){var t=Ka(Ii)[0],i=et().memoizedState;return[typeof t=="boolean"?t:Rr(t),i]},useSyncExternalStore:Dd,useId:tf,useHostTransitionStatus:yu,useFormState:Bd,useActionState:Bd,useOptimistic:function(t,i){var s=et();return Md(s,Me,t,i)},useMemoCache:hu,useCacheRefresh:nf},D_={readContext:vt,use:Za,useCallback:Zd,useContext:vt,useEffect:Fd,useImperativeHandle:Wd,useInsertionEffect:Yd,useLayoutEffect:Xd,useMemo:Kd,useReducer:fu,useRef:jd,useState:function(){return fu(Ii)},useDebugValue:gu,useDeferredValue:function(t,i){var s=et();return Me===null?vu(s,t,i):Qd(s,Me.memoizedState,t,i)},useTransition:function(){var t=fu(Ii)[0],i=et().memoizedState;return[typeof t=="boolean"?t:Rr(t),i]},useSyncExternalStore:Dd,useId:tf,useHostTransitionStatus:yu,useFormState:Pd,useActionState:Pd,useOptimistic:function(t,i){var s=et();return Me!==null?Md(s,Me,t,i):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:hu,useCacheRefresh:nf},Ms=null,Mr=0;function to(t){var i=Mr;return Mr+=1,Ms===null&&(Ms=[]),_d(Ms,t,i)}function zr(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function io(t,i){throw i.$$typeof===y?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function uf(t){var i=t._init;return i(t._payload)}function cf(t){function i(N,C){if(t){var I=N.deletions;I===null?(N.deletions=[C],N.flags|=16):I.push(C)}}function s(N,C){if(!t)return null;for(;C!==null;)i(N,C),C=C.sibling;return null}function a(N){for(var C=new Map;N!==null;)N.key!==null?C.set(N.key,N):C.set(N.index,N),N=N.sibling;return C}function c(N,C){return N=Ri(N,C),N.index=0,N.sibling=null,N}function f(N,C,I){return N.index=I,t?(I=N.alternate,I!==null?(I=I.index,I<C?(N.flags|=67108866,C):I):(N.flags|=67108866,C)):(N.flags|=1048576,C)}function g(N){return t&&N.alternate===null&&(N.flags|=67108866),N}function _(N,C,I,q){return C===null||C.tag!==6?(C=Pl(I,N.mode,q),C.return=N,C):(C=c(C,I),C.return=N,C)}function E(N,C,I,q){var re=I.type;return re===D?Y(N,C,I.props.children,q,I.key):C!==null&&(C.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===U&&uf(re)===C.type)?(C=c(C,I.props),zr(C,I),C.return=N,C):(C=Va(I.type,I.key,I.props,null,N.mode,q),zr(C,I),C.return=N,C)}function G(N,C,I,q){return C===null||C.tag!==4||C.stateNode.containerInfo!==I.containerInfo||C.stateNode.implementation!==I.implementation?(C=jl(I,N.mode,q),C.return=N,C):(C=c(C,I.children||[]),C.return=N,C)}function Y(N,C,I,q,re){return C===null||C.tag!==7?(C=jn(I,N.mode,q,re),C.return=N,C):(C=c(C,I),C.return=N,C)}function W(N,C,I){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=Pl(""+C,N.mode,I),C.return=N,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case b:return I=Va(C.type,C.key,C.props,null,N.mode,I),zr(I,C),I.return=N,I;case x:return C=jl(C,N.mode,I),C.return=N,C;case U:var q=C._init;return C=q(C._payload),W(N,C,I)}if(P(C)||$(C))return C=jn(C,N.mode,I,null),C.return=N,C;if(typeof C.then=="function")return W(N,to(C),I);if(C.$$typeof===O)return W(N,ja(N,C),I);io(N,C)}return null}function L(N,C,I,q){var re=C!==null?C.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return re!==null?null:_(N,C,""+I,q);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case b:return I.key===re?E(N,C,I,q):null;case x:return I.key===re?G(N,C,I,q):null;case U:return re=I._init,I=re(I._payload),L(N,C,I,q)}if(P(I)||$(I))return re!==null?null:Y(N,C,I,q,null);if(typeof I.then=="function")return L(N,C,to(I),q);if(I.$$typeof===O)return L(N,C,ja(N,I),q);io(N,I)}return null}function H(N,C,I,q,re){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return N=N.get(I)||null,_(C,N,""+q,re);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case b:return N=N.get(q.key===null?I:q.key)||null,E(C,N,q,re);case x:return N=N.get(q.key===null?I:q.key)||null,G(C,N,q,re);case U:var we=q._init;return q=we(q._payload),H(N,C,I,q,re)}if(P(q)||$(q))return N=N.get(I)||null,Y(C,N,q,re,null);if(typeof q.then=="function")return H(N,C,I,to(q),re);if(q.$$typeof===O)return H(N,C,I,ja(C,q),re);io(C,q)}return null}function ge(N,C,I,q){for(var re=null,we=null,le=C,fe=C=0,ht=null;le!==null&&fe<I.length;fe++){le.index>fe?(ht=le,le=null):ht=le.sibling;var Ae=L(N,le,I[fe],q);if(Ae===null){le===null&&(le=ht);break}t&&le&&Ae.alternate===null&&i(N,le),C=f(Ae,C,fe),we===null?re=Ae:we.sibling=Ae,we=Ae,le=ht}if(fe===I.length)return s(N,le),Ce&&Fn(N,fe),re;if(le===null){for(;fe<I.length;fe++)le=W(N,I[fe],q),le!==null&&(C=f(le,C,fe),we===null?re=le:we.sibling=le,we=le);return Ce&&Fn(N,fe),re}for(le=a(le);fe<I.length;fe++)ht=H(le,N,fe,I[fe],q),ht!==null&&(t&&ht.alternate!==null&&le.delete(ht.key===null?fe:ht.key),C=f(ht,C,fe),we===null?re=ht:we.sibling=ht,we=ht);return t&&le.forEach(function(On){return i(N,On)}),Ce&&Fn(N,fe),re}function he(N,C,I,q){if(I==null)throw Error(r(151));for(var re=null,we=null,le=C,fe=C=0,ht=null,Ae=I.next();le!==null&&!Ae.done;fe++,Ae=I.next()){le.index>fe?(ht=le,le=null):ht=le.sibling;var On=L(N,le,Ae.value,q);if(On===null){le===null&&(le=ht);break}t&&le&&On.alternate===null&&i(N,le),C=f(On,C,fe),we===null?re=On:we.sibling=On,we=On,le=ht}if(Ae.done)return s(N,le),Ce&&Fn(N,fe),re;if(le===null){for(;!Ae.done;fe++,Ae=I.next())Ae=W(N,Ae.value,q),Ae!==null&&(C=f(Ae,C,fe),we===null?re=Ae:we.sibling=Ae,we=Ae);return Ce&&Fn(N,fe),re}for(le=a(le);!Ae.done;fe++,Ae=I.next())Ae=H(le,N,fe,Ae.value,q),Ae!==null&&(t&&Ae.alternate!==null&&le.delete(Ae.key===null?fe:Ae.key),C=f(Ae,C,fe),we===null?re=Ae:we.sibling=Ae,we=Ae);return t&&le.forEach(function(Ay){return i(N,Ay)}),Ce&&Fn(N,fe),re}function Ie(N,C,I,q){if(typeof I=="object"&&I!==null&&I.type===D&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case b:e:{for(var re=I.key;C!==null;){if(C.key===re){if(re=I.type,re===D){if(C.tag===7){s(N,C.sibling),q=c(C,I.props.children),q.return=N,N=q;break e}}else if(C.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===U&&uf(re)===C.type){s(N,C.sibling),q=c(C,I.props),zr(q,I),q.return=N,N=q;break e}s(N,C);break}else i(N,C);C=C.sibling}I.type===D?(q=jn(I.props.children,N.mode,q,I.key),q.return=N,N=q):(q=Va(I.type,I.key,I.props,null,N.mode,q),zr(q,I),q.return=N,N=q)}return g(N);case x:e:{for(re=I.key;C!==null;){if(C.key===re)if(C.tag===4&&C.stateNode.containerInfo===I.containerInfo&&C.stateNode.implementation===I.implementation){s(N,C.sibling),q=c(C,I.children||[]),q.return=N,N=q;break e}else{s(N,C);break}else i(N,C);C=C.sibling}q=jl(I,N.mode,q),q.return=N,N=q}return g(N);case U:return re=I._init,I=re(I._payload),Ie(N,C,I,q)}if(P(I))return ge(N,C,I,q);if($(I)){if(re=$(I),typeof re!="function")throw Error(r(150));return I=re.call(I),he(N,C,I,q)}if(typeof I.then=="function")return Ie(N,C,to(I),q);if(I.$$typeof===O)return Ie(N,C,ja(N,I),q);io(N,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,C!==null&&C.tag===6?(s(N,C.sibling),q=c(C,I),q.return=N,N=q):(s(N,C),q=Pl(I,N.mode,q),q.return=N,N=q),g(N)):s(N,C)}return function(N,C,I,q){try{Mr=0;var re=Ie(N,C,I,q);return Ms=null,re}catch(le){if(le===Er||le===Fa)throw le;var we=Ut(29,le,null,N.mode);return we.lanes=q,we.return=N,we}finally{}}}var zs=cf(!0),hf=cf(!1),Kt=Z(null),vi=null;function mn(t){var i=t.alternate;te(rt,rt.current&1),te(Kt,t),vi===null&&(i===null||Cs.current!==null||i.memoizedState!==null)&&(vi=t)}function df(t){if(t.tag===22){if(te(rt,rt.current),te(Kt,t),vi===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(vi=t)}}else gn()}function gn(){te(rt,rt.current),te(Kt,Kt.current)}function Gi(t){ie(Kt),vi===t&&(vi=null),ie(rt)}var rt=Z(0);function no(t){for(var i=t;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||cc(s)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function xu(t,i,s,a){i=t.memoizedState,s=s(a,i),s=s==null?i:v({},i,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var wu={enqueueSetState:function(t,i,s){t=t._reactInternals;var a=Pt(),c=dn(a);c.payload=i,s!=null&&(c.callback=s),i=fn(t,c,a),i!==null&&(jt(i,t,a),Sr(i,t,a))},enqueueReplaceState:function(t,i,s){t=t._reactInternals;var a=Pt(),c=dn(a);c.tag=1,c.payload=i,s!=null&&(c.callback=s),i=fn(t,c,a),i!==null&&(jt(i,t,a),Sr(i,t,a))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var s=Pt(),a=dn(s);a.tag=2,i!=null&&(a.callback=i),i=fn(t,a,s),i!==null&&(jt(i,t,s),Sr(i,t,s))}};function ff(t,i,s,a,c,f,g){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,f,g):i.prototype&&i.prototype.isPureReactComponent?!mr(s,a)||!mr(c,f):!0}function pf(t,i,s,a){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,a),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,a),i.state!==t&&wu.enqueueReplaceState(i,i.state,null)}function Qn(t,i){var s=i;if("ref"in i){s={};for(var a in i)a!=="ref"&&(s[a]=i[a])}if(t=t.defaultProps){s===i&&(s=v({},s));for(var c in t)s[c]===void 0&&(s[c]=t[c])}return s}var so=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function mf(t){so(t)}function gf(t){console.error(t)}function vf(t){so(t)}function ro(t,i){try{var s=t.onUncaughtError;s(i.value,{componentStack:i.stack})}catch(a){setTimeout(function(){throw a})}}function _f(t,i,s){try{var a=t.onCaughtError;a(s.value,{componentStack:s.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Eu(t,i,s){return s=dn(s),s.tag=3,s.payload={element:null},s.callback=function(){ro(t,i)},s}function yf(t){return t=dn(t),t.tag=3,t}function bf(t,i,s,a){var c=s.type.getDerivedStateFromError;if(typeof c=="function"){var f=a.value;t.payload=function(){return c(f)},t.callback=function(){_f(i,s,a)}}var g=s.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(t.callback=function(){_f(i,s,a),typeof c!="function"&&(wn===null?wn=new Set([this]):wn.add(this));var _=a.stack;this.componentDidCatch(a.value,{componentStack:_!==null?_:""})})}function A_(t,i,s,a,c){if(s.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(i=s.alternate,i!==null&&br(i,s,c,!0),s=Kt.current,s!==null){switch(s.tag){case 13:return vi===null?qu():s.alternate===null&&We===0&&(We=3),s.flags&=-257,s.flags|=65536,s.lanes=c,a===Jl?s.flags|=16384:(i=s.updateQueue,i===null?s.updateQueue=new Set([a]):i.add(a),Zu(t,a,c)),!1;case 22:return s.flags|=65536,a===Jl?s.flags|=16384:(i=s.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([a])},s.updateQueue=i):(s=i.retryQueue,s===null?i.retryQueue=new Set([a]):s.add(a)),Zu(t,a,c)),!1}throw Error(r(435,s.tag))}return Zu(t,a,c),qu(),!1}if(Ce)return i=Kt.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=c,a!==Yl&&(t=Error(r(422),{cause:a}),yr(Xt(t,s)))):(a!==Yl&&(i=Error(r(423),{cause:a}),yr(Xt(i,s))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,a=Xt(a,s),c=Eu(t.stateNode,a,c),tu(t,c),We!==4&&(We=2)),!1;var f=Error(r(520),{cause:a});if(f=Xt(f,s),Hr===null?Hr=[f]:Hr.push(f),We!==4&&(We=2),i===null)return!0;a=Xt(a,s),s=i;do{switch(s.tag){case 3:return s.flags|=65536,t=c&-c,s.lanes|=t,t=Eu(s.stateNode,a,t),tu(s,t),!1;case 1:if(i=s.type,f=s.stateNode,(s.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(wn===null||!wn.has(f))))return s.flags|=65536,c&=-c,s.lanes|=c,c=yf(c),bf(c,t,s,a),tu(s,c),!1}s=s.return}while(s!==null);return!1}var xf=Error(r(461)),ut=!1;function dt(t,i,s,a){i.child=t===null?hf(i,null,s,a):zs(i,t.child,s,a)}function wf(t,i,s,a,c){s=s.render;var f=i.ref;if("ref"in a){var g={};for(var _ in a)_!=="ref"&&(g[_]=a[_])}else g=a;return Wn(i),a=au(t,i,s,g,f,c),_=ou(),t!==null&&!ut?(lu(t,i,c),Li(t,i,c)):(Ce&&_&&kl(i),i.flags|=1,dt(t,i,a,c),i.child)}function Ef(t,i,s,a,c){if(t===null){var f=s.type;return typeof f=="function"&&!Hl(f)&&f.defaultProps===void 0&&s.compare===null?(i.tag=15,i.type=f,Tf(t,i,f,a,c)):(t=Va(s.type,null,a,i,i.mode,c),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!Nu(t,c)){var g=f.memoizedProps;if(s=s.compare,s=s!==null?s:mr,s(g,a)&&t.ref===i.ref)return Li(t,i,c)}return i.flags|=1,t=Ri(f,a),t.ref=i.ref,t.return=i,i.child=t}function Tf(t,i,s,a,c){if(t!==null){var f=t.memoizedProps;if(mr(f,a)&&t.ref===i.ref)if(ut=!1,i.pendingProps=a=f,Nu(t,c))(t.flags&131072)!==0&&(ut=!0);else return i.lanes=t.lanes,Li(t,i,c)}return Tu(t,i,s,a,c)}function Sf(t,i,s){var a=i.pendingProps,c=a.children,f=t!==null?t.memoizedState:null;if(a.mode==="hidden"){if((i.flags&128)!==0){if(a=f!==null?f.baseLanes|s:s,t!==null){for(c=i.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;i.childLanes=f&~a}else i.childLanes=0,i.child=null;return Df(t,i,a,s)}if((s&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&ka(i,f!==null?f.cachePool:null),f!==null?Ed(i,f):nu(),df(i);else return i.lanes=i.childLanes=536870912,Df(t,i,f!==null?f.baseLanes|s:s,s)}else f!==null?(ka(i,f.cachePool),Ed(i,f),gn(),i.memoizedState=null):(t!==null&&ka(i,null),nu(),gn());return dt(t,i,c,s),i.child}function Df(t,i,s,a){var c=Ql();return c=c===null?null:{parent:st._currentValue,pool:c},i.memoizedState={baseLanes:s,cachePool:c},t!==null&&ka(i,null),nu(),df(i),t!==null&&br(t,i,a,!0),null}function ao(t,i){var s=i.ref;if(s===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(r(284));(t===null||t.ref!==s)&&(i.flags|=4194816)}}function Tu(t,i,s,a,c){return Wn(i),s=au(t,i,s,a,void 0,c),a=ou(),t!==null&&!ut?(lu(t,i,c),Li(t,i,c)):(Ce&&a&&kl(i),i.flags|=1,dt(t,i,s,c),i.child)}function Af(t,i,s,a,c,f){return Wn(i),i.updateQueue=null,s=Sd(i,a,s,c),Td(t),a=ou(),t!==null&&!ut?(lu(t,i,f),Li(t,i,f)):(Ce&&a&&kl(i),i.flags|=1,dt(t,i,s,f),i.child)}function Cf(t,i,s,a,c){if(Wn(i),i.stateNode===null){var f=Es,g=s.contextType;typeof g=="object"&&g!==null&&(f=vt(g)),f=new s(a,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=wu,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=a,f.state=i.memoizedState,f.refs={},$l(i),g=s.contextType,f.context=typeof g=="object"&&g!==null?vt(g):Es,f.state=i.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(xu(i,s,g,a),f.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(g=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),g!==f.state&&wu.enqueueReplaceState(f,f.state,null),Ar(i,a,f,c),Dr(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),a=!0}else if(t===null){f=i.stateNode;var _=i.memoizedProps,E=Qn(s,_);f.props=E;var G=f.context,Y=s.contextType;g=Es,typeof Y=="object"&&Y!==null&&(g=vt(Y));var W=s.getDerivedStateFromProps;Y=typeof W=="function"||typeof f.getSnapshotBeforeUpdate=="function",_=i.pendingProps!==_,Y||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_||G!==g)&&pf(i,f,a,g),hn=!1;var L=i.memoizedState;f.state=L,Ar(i,a,f,c),Dr(),G=i.memoizedState,_||L!==G||hn?(typeof W=="function"&&(xu(i,s,W,a),G=i.memoizedState),(E=hn||ff(i,s,E,a,L,G,g))?(Y||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=a,i.memoizedState=G),f.props=a,f.state=G,f.context=g,a=E):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),a=!1)}else{f=i.stateNode,eu(t,i),g=i.memoizedProps,Y=Qn(s,g),f.props=Y,W=i.pendingProps,L=f.context,G=s.contextType,E=Es,typeof G=="object"&&G!==null&&(E=vt(G)),_=s.getDerivedStateFromProps,(G=typeof _=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==W||L!==E)&&pf(i,f,a,E),hn=!1,L=i.memoizedState,f.state=L,Ar(i,a,f,c),Dr();var H=i.memoizedState;g!==W||L!==H||hn||t!==null&&t.dependencies!==null&&Pa(t.dependencies)?(typeof _=="function"&&(xu(i,s,_,a),H=i.memoizedState),(Y=hn||ff(i,s,Y,a,L,H,E)||t!==null&&t.dependencies!==null&&Pa(t.dependencies))?(G||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(a,H,E),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(a,H,E)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||g===t.memoizedProps&&L===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&L===t.memoizedState||(i.flags|=1024),i.memoizedProps=a,i.memoizedState=H),f.props=a,f.state=H,f.context=E,a=Y):(typeof f.componentDidUpdate!="function"||g===t.memoizedProps&&L===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&L===t.memoizedState||(i.flags|=1024),a=!1)}return f=a,ao(t,i),a=(i.flags&128)!==0,f||a?(f=i.stateNode,s=a&&typeof s.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&a?(i.child=zs(i,t.child,null,c),i.child=zs(i,null,s,c)):dt(t,i,s,c),i.memoizedState=f.state,t=i.child):t=Li(t,i,c),t}function Rf(t,i,s,a){return _r(),i.flags|=256,dt(t,i,s,a),i.child}var Su={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Du(t){return{baseLanes:t,cachePool:md()}}function Au(t,i,s){return t=t!==null?t.childLanes&~s:0,i&&(t|=Qt),t}function Of(t,i,s){var a=i.pendingProps,c=!1,f=(i.flags&128)!==0,g;if((g=f)||(g=t!==null&&t.memoizedState===null?!1:(rt.current&2)!==0),g&&(c=!0,i.flags&=-129),g=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ce){if(c?mn(i):gn(),Ce){var _=qe,E;if(E=_){e:{for(E=_,_=gi;E.nodeType!==8;){if(!_){_=null;break e}if(E=ui(E.nextSibling),E===null){_=null;break e}}_=E}_!==null?(i.memoizedState={dehydrated:_,treeContext:kn!==null?{id:Oi,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},E=Ut(18,null,null,0),E.stateNode=_,E.return=i,i.child=E,Tt=i,qe=null,E=!0):E=!1}E||Xn(i)}if(_=i.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return cc(_)?i.lanes=32:i.lanes=536870912,null;Gi(i)}return _=a.children,a=a.fallback,c?(gn(),c=i.mode,_=oo({mode:"hidden",children:_},c),a=jn(a,c,s,null),_.return=i,a.return=i,_.sibling=a,i.child=_,c=i.child,c.memoizedState=Du(s),c.childLanes=Au(t,g,s),i.memoizedState=Su,a):(mn(i),Cu(i,_))}if(E=t.memoizedState,E!==null&&(_=E.dehydrated,_!==null)){if(f)i.flags&256?(mn(i),i.flags&=-257,i=Ru(t,i,s)):i.memoizedState!==null?(gn(),i.child=t.child,i.flags|=128,i=null):(gn(),c=a.fallback,_=i.mode,a=oo({mode:"visible",children:a.children},_),c=jn(c,_,s,null),c.flags|=2,a.return=i,c.return=i,a.sibling=c,i.child=a,zs(i,t.child,null,s),a=i.child,a.memoizedState=Du(s),a.childLanes=Au(t,g,s),i.memoizedState=Su,i=c);else if(mn(i),cc(_)){if(g=_.nextSibling&&_.nextSibling.dataset,g)var G=g.dgst;g=G,a=Error(r(419)),a.stack="",a.digest=g,yr({value:a,source:null,stack:null}),i=Ru(t,i,s)}else if(ut||br(t,i,s,!1),g=(s&t.childLanes)!==0,ut||g){if(g=Be,g!==null&&(a=s&-s,a=(a&42)!==0?1:hl(a),a=(a&(g.suspendedLanes|s))!==0?0:a,a!==0&&a!==E.retryLane))throw E.retryLane=a,ws(t,a),jt(g,t,a),xf;_.data==="$?"||qu(),i=Ru(t,i,s)}else _.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=E.treeContext,qe=ui(_.nextSibling),Tt=i,Ce=!0,Yn=null,gi=!1,t!==null&&(Wt[Zt++]=Oi,Wt[Zt++]=Ni,Wt[Zt++]=kn,Oi=t.id,Ni=t.overflow,kn=i),i=Cu(i,a.children),i.flags|=4096);return i}return c?(gn(),c=a.fallback,_=i.mode,E=t.child,G=E.sibling,a=Ri(E,{mode:"hidden",children:a.children}),a.subtreeFlags=E.subtreeFlags&65011712,G!==null?c=Ri(G,c):(c=jn(c,_,s,null),c.flags|=2),c.return=i,a.return=i,a.sibling=c,i.child=a,a=c,c=i.child,_=t.child.memoizedState,_===null?_=Du(s):(E=_.cachePool,E!==null?(G=st._currentValue,E=E.parent!==G?{parent:G,pool:G}:E):E=md(),_={baseLanes:_.baseLanes|s,cachePool:E}),c.memoizedState=_,c.childLanes=Au(t,g,s),i.memoizedState=Su,a):(mn(i),s=t.child,t=s.sibling,s=Ri(s,{mode:"visible",children:a.children}),s.return=i,s.sibling=null,t!==null&&(g=i.deletions,g===null?(i.deletions=[t],i.flags|=16):g.push(t)),i.child=s,i.memoizedState=null,s)}function Cu(t,i){return i=oo({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function oo(t,i){return t=Ut(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Ru(t,i,s){return zs(i,t.child,null,s),t=Cu(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Nf(t,i,s){t.lanes|=i;var a=t.alternate;a!==null&&(a.lanes|=i),ql(t.return,i,s)}function Ou(t,i,s,a,c){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:c}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=s,f.tailMode=c)}function Mf(t,i,s){var a=i.pendingProps,c=a.revealOrder,f=a.tail;if(dt(t,i,a.children,s),a=rt.current,(a&2)!==0)a=a&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Nf(t,s,i);else if(t.tag===19)Nf(t,s,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}switch(te(rt,a),c){case"forwards":for(s=i.child,c=null;s!==null;)t=s.alternate,t!==null&&no(t)===null&&(c=s),s=s.sibling;s=c,s===null?(c=i.child,i.child=null):(c=s.sibling,s.sibling=null),Ou(i,!1,c,s,f);break;case"backwards":for(s=null,c=i.child,i.child=null;c!==null;){if(t=c.alternate,t!==null&&no(t)===null){i.child=c;break}t=c.sibling,c.sibling=s,s=c,c=t}Ou(i,!0,s,null,f);break;case"together":Ou(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Li(t,i,s){if(t!==null&&(i.dependencies=t.dependencies),xn|=i.lanes,(s&i.childLanes)===0)if(t!==null){if(br(t,i,s,!1),(s&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,s=Ri(t,t.pendingProps),i.child=s,s.return=i;t.sibling!==null;)t=t.sibling,s=s.sibling=Ri(t,t.pendingProps),s.return=i;s.sibling=null}return i.child}function Nu(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Pa(t)))}function C_(t,i,s){switch(i.tag){case 3:Ve(i,i.stateNode.containerInfo),cn(i,st,t.memoizedState.cache),_r();break;case 27:case 5:tr(i);break;case 4:Ve(i,i.stateNode.containerInfo);break;case 10:cn(i,i.type,i.memoizedProps.value);break;case 13:var a=i.memoizedState;if(a!==null)return a.dehydrated!==null?(mn(i),i.flags|=128,null):(s&i.child.childLanes)!==0?Of(t,i,s):(mn(i),t=Li(t,i,s),t!==null?t.sibling:null);mn(i);break;case 19:var c=(t.flags&128)!==0;if(a=(s&i.childLanes)!==0,a||(br(t,i,s,!1),a=(s&i.childLanes)!==0),c){if(a)return Mf(t,i,s);i.flags|=128}if(c=i.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),te(rt,rt.current),a)break;return null;case 22:case 23:return i.lanes=0,Sf(t,i,s);case 24:cn(i,st,t.memoizedState.cache)}return Li(t,i,s)}function zf(t,i,s){if(t!==null)if(t.memoizedProps!==i.pendingProps)ut=!0;else{if(!Nu(t,s)&&(i.flags&128)===0)return ut=!1,C_(t,i,s);ut=(t.flags&131072)!==0}else ut=!1,Ce&&(i.flags&1048576)!==0&&ld(i,Ha,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var a=i.elementType,c=a._init;if(a=c(a._payload),i.type=a,typeof a=="function")Hl(a)?(t=Qn(a,t),i.tag=1,i=Cf(null,i,a,t,s)):(i.tag=0,i=Tu(null,i,a,t,s));else{if(a!=null){if(c=a.$$typeof,c===z){i.tag=11,i=wf(null,i,a,t,s);break e}else if(c===T){i.tag=14,i=Ef(null,i,a,t,s);break e}}throw i=ae(a)||a,Error(r(306,i,""))}}return i;case 0:return Tu(t,i,i.type,i.pendingProps,s);case 1:return a=i.type,c=Qn(a,i.pendingProps),Cf(t,i,a,c,s);case 3:e:{if(Ve(i,i.stateNode.containerInfo),t===null)throw Error(r(387));a=i.pendingProps;var f=i.memoizedState;c=f.element,eu(t,i),Ar(i,a,null,s);var g=i.memoizedState;if(a=g.cache,cn(i,st,a),a!==f.cache&&Wl(i,[st],s,!0),Dr(),a=g.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:g.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=Rf(t,i,a,s);break e}else if(a!==c){c=Xt(Error(r(424)),i),yr(c),i=Rf(t,i,a,s);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(qe=ui(t.firstChild),Tt=i,Ce=!0,Yn=null,gi=!0,s=hf(i,null,a,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(_r(),a===c){i=Li(t,i,s);break e}dt(t,i,a,s)}i=i.child}return i;case 26:return ao(t,i),t===null?(s=Up(i.type,null,i.pendingProps,null))?i.memoizedState=s:Ce||(s=i.type,t=i.pendingProps,a=wo(de.current).createElement(s),a[gt]=i,a[Ct]=t,pt(a,s,t),lt(a),i.stateNode=a):i.memoizedState=Up(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return tr(i),t===null&&Ce&&(a=i.stateNode=Ip(i.type,i.pendingProps,de.current),Tt=i,gi=!0,c=qe,Sn(i.type)?(hc=c,qe=ui(a.firstChild)):qe=c),dt(t,i,i.pendingProps.children,s),ao(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ce&&((c=a=qe)&&(a=iy(a,i.type,i.pendingProps,gi),a!==null?(i.stateNode=a,Tt=i,qe=ui(a.firstChild),gi=!1,c=!0):c=!1),c||Xn(i)),tr(i),c=i.type,f=i.pendingProps,g=t!==null?t.memoizedProps:null,a=f.children,oc(c,f)?a=null:g!==null&&oc(c,g)&&(i.flags|=32),i.memoizedState!==null&&(c=au(t,i,b_,null,null,s),Zr._currentValue=c),ao(t,i),dt(t,i,a,s),i.child;case 6:return t===null&&Ce&&((t=s=qe)&&(s=ny(s,i.pendingProps,gi),s!==null?(i.stateNode=s,Tt=i,qe=null,t=!0):t=!1),t||Xn(i)),null;case 13:return Of(t,i,s);case 4:return Ve(i,i.stateNode.containerInfo),a=i.pendingProps,t===null?i.child=zs(i,null,a,s):dt(t,i,a,s),i.child;case 11:return wf(t,i,i.type,i.pendingProps,s);case 7:return dt(t,i,i.pendingProps,s),i.child;case 8:return dt(t,i,i.pendingProps.children,s),i.child;case 12:return dt(t,i,i.pendingProps.children,s),i.child;case 10:return a=i.pendingProps,cn(i,i.type,a.value),dt(t,i,a.children,s),i.child;case 9:return c=i.type._context,a=i.pendingProps.children,Wn(i),c=vt(c),a=a(c),i.flags|=1,dt(t,i,a,s),i.child;case 14:return Ef(t,i,i.type,i.pendingProps,s);case 15:return Tf(t,i,i.type,i.pendingProps,s);case 19:return Mf(t,i,s);case 31:return a=i.pendingProps,s=i.mode,a={mode:a.mode,children:a.children},t===null?(s=oo(a,s),s.ref=i.ref,i.child=s,s.return=i,i=s):(s=Ri(t.child,a),s.ref=i.ref,i.child=s,s.return=i,i=s),i;case 22:return Sf(t,i,s);case 24:return Wn(i),a=vt(st),t===null?(c=Ql(),c===null&&(c=Be,f=Zl(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=s),c=f),i.memoizedState={parent:a,cache:c},$l(i),cn(i,st,c)):((t.lanes&s)!==0&&(eu(t,i),Ar(i,null,null,s),Dr()),c=t.memoizedState,f=i.memoizedState,c.parent!==a?(c={parent:a,cache:a},i.memoizedState=c,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=c),cn(i,st,a)):(a=f.cache,cn(i,st,a),a!==c.cache&&Wl(i,[st],s,!0))),dt(t,i,i.pendingProps.children,s),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Ui(t){t.flags|=4}function If(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!jp(i)){if(i=Kt.current,i!==null&&((De&4194048)===De?vi!==null:(De&62914560)!==De&&(De&536870912)===0||i!==vi))throw Tr=Jl,gd;t.flags|=8192}}function lo(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?hh():536870912,t.lanes|=i,Us|=i)}function Ir(t,i){if(!Ce)switch(t.tailMode){case"hidden":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function Fe(t){var i=t.alternate!==null&&t.alternate.child===t.child,s=0,a=0;if(i)for(var c=t.child;c!==null;)s|=c.lanes|c.childLanes,a|=c.subtreeFlags&65011712,a|=c.flags&65011712,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)s|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=a,t.childLanes=s,i}function R_(t,i,s){var a=i.pendingProps;switch(Fl(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(i),null;case 1:return Fe(i),null;case 3:return s=i.stateNode,a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),zi(st),pi(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(vr(i)?Ui(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,hd())),Fe(i),null;case 26:return s=i.memoizedState,t===null?(Ui(i),s!==null?(Fe(i),If(i,s)):(Fe(i),i.flags&=-16777217)):s?s!==t.memoizedState?(Ui(i),Fe(i),If(i,s)):(Fe(i),i.flags&=-16777217):(t.memoizedProps!==a&&Ui(i),Fe(i),i.flags&=-16777217),null;case 27:nt(i),s=de.current;var c=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==a&&Ui(i);else{if(!a){if(i.stateNode===null)throw Error(r(166));return Fe(i),null}t=oe.current,vr(i)?ud(i):(t=Ip(c,a,s),i.stateNode=t,Ui(i))}return Fe(i),null;case 5:if(nt(i),s=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==a&&Ui(i);else{if(!a){if(i.stateNode===null)throw Error(r(166));return Fe(i),null}if(t=oe.current,vr(i))ud(i);else{switch(c=wo(de.current),t){case 1:t=c.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=c.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=c.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=c.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof a.is=="string"?c.createElement("select",{is:a.is}):c.createElement("select"),a.multiple?t.multiple=!0:a.size&&(t.size=a.size);break;default:t=typeof a.is=="string"?c.createElement(s,{is:a.is}):c.createElement(s)}}t[gt]=i,t[Ct]=a;e:for(c=i.child;c!==null;){if(c.tag===5||c.tag===6)t.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break e;for(;c.sibling===null;){if(c.return===null||c.return===i)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}i.stateNode=t;e:switch(pt(t,s,a),s){case"button":case"input":case"select":case"textarea":t=!!a.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Ui(i)}}return Fe(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==a&&Ui(i);else{if(typeof a!="string"&&i.stateNode===null)throw Error(r(166));if(t=de.current,vr(i)){if(t=i.stateNode,s=i.memoizedProps,a=null,c=Tt,c!==null)switch(c.tag){case 27:case 5:a=c.memoizedProps}t[gt]=i,t=!!(t.nodeValue===s||a!==null&&a.suppressHydrationWarning===!0||Ap(t.nodeValue,s)),t||Xn(i)}else t=wo(t).createTextNode(a),t[gt]=i,i.stateNode=t}return Fe(i),null;case 13:if(a=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=vr(i),a!==null&&a.dehydrated!==null){if(t===null){if(!c)throw Error(r(318));if(c=i.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));c[gt]=i}else _r(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Fe(i),c=!1}else c=hd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),c=!0;if(!c)return i.flags&256?(Gi(i),i):(Gi(i),null)}if(Gi(i),(i.flags&128)!==0)return i.lanes=s,i;if(s=a!==null,t=t!==null&&t.memoizedState!==null,s){a=i.child,c=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(c=a.alternate.memoizedState.cachePool.pool);var f=null;a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==c&&(a.flags|=2048)}return s!==t&&s&&(i.child.flags|=8192),lo(i,i.updateQueue),Fe(i),null;case 4:return pi(),t===null&&ic(i.stateNode.containerInfo),Fe(i),null;case 10:return zi(i.type),Fe(i),null;case 19:if(ie(rt),c=i.memoizedState,c===null)return Fe(i),null;if(a=(i.flags&128)!==0,f=c.rendering,f===null)if(a)Ir(c,!1);else{if(We!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=no(t),f!==null){for(i.flags|=128,Ir(c,!1),t=f.updateQueue,i.updateQueue=t,lo(i,t),i.subtreeFlags=0,t=s,s=i.child;s!==null;)od(s,t),s=s.sibling;return te(rt,rt.current&1|2),i.child}t=t.sibling}c.tail!==null&&mi()>ho&&(i.flags|=128,a=!0,Ir(c,!1),i.lanes=4194304)}else{if(!a)if(t=no(f),t!==null){if(i.flags|=128,a=!0,t=t.updateQueue,i.updateQueue=t,lo(i,t),Ir(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!Ce)return Fe(i),null}else 2*mi()-c.renderingStartTime>ho&&s!==536870912&&(i.flags|=128,a=!0,Ir(c,!1),i.lanes=4194304);c.isBackwards?(f.sibling=i.child,i.child=f):(t=c.last,t!==null?t.sibling=f:i.child=f,c.last=f)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=mi(),i.sibling=null,t=rt.current,te(rt,a?t&1|2:t&1),i):(Fe(i),null);case 22:case 23:return Gi(i),su(),a=i.memoizedState!==null,t!==null?t.memoizedState!==null!==a&&(i.flags|=8192):a&&(i.flags|=8192),a?(s&536870912)!==0&&(i.flags&128)===0&&(Fe(i),i.subtreeFlags&6&&(i.flags|=8192)):Fe(i),s=i.updateQueue,s!==null&&lo(i,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==s&&(i.flags|=2048),t!==null&&ie(Zn),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),zi(st),Fe(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function O_(t,i){switch(Fl(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return zi(st),pi(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return nt(i),null;case 13:if(Gi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));_r()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ie(rt),null;case 4:return pi(),null;case 10:return zi(i.type),null;case 22:case 23:return Gi(i),su(),t!==null&&ie(Zn),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return zi(st),null;case 25:return null;default:return null}}function Gf(t,i){switch(Fl(i),i.tag){case 3:zi(st),pi();break;case 26:case 27:case 5:nt(i);break;case 4:pi();break;case 13:Gi(i);break;case 19:ie(rt);break;case 10:zi(i.type);break;case 22:case 23:Gi(i),su(),t!==null&&ie(Zn);break;case 24:zi(st)}}function Gr(t,i){try{var s=i.updateQueue,a=s!==null?s.lastEffect:null;if(a!==null){var c=a.next;s=c;do{if((s.tag&t)===t){a=void 0;var f=s.create,g=s.inst;a=f(),g.destroy=a}s=s.next}while(s!==c)}}catch(_){Le(i,i.return,_)}}function vn(t,i,s){try{var a=i.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&t)===t){var g=a.inst,_=g.destroy;if(_!==void 0){g.destroy=void 0,c=i;var E=s,G=_;try{G()}catch(Y){Le(c,E,Y)}}}a=a.next}while(a!==f)}}catch(Y){Le(i,i.return,Y)}}function Lf(t){var i=t.updateQueue;if(i!==null){var s=t.stateNode;try{wd(i,s)}catch(a){Le(t,t.return,a)}}}function Uf(t,i,s){s.props=Qn(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(a){Le(t,i,a)}}function Lr(t,i){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var a=t.stateNode;break;case 30:a=t.stateNode;break;default:a=t.stateNode}typeof s=="function"?t.refCleanup=s(a):s.current=a}}catch(c){Le(t,i,c)}}function _i(t,i){var s=t.ref,a=t.refCleanup;if(s!==null)if(typeof a=="function")try{a()}catch(c){Le(t,i,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(c){Le(t,i,c)}else s.current=null}function Vf(t){var i=t.type,s=t.memoizedProps,a=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":s.autoFocus&&a.focus();break e;case"img":s.src?a.src=s.src:s.srcSet&&(a.srcset=s.srcSet)}}catch(c){Le(t,t.return,c)}}function Mu(t,i,s){try{var a=t.stateNode;Q_(a,t.type,s,i),a[Ct]=i}catch(c){Le(t,t.return,c)}}function Bf(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Sn(t.type)||t.tag===4}function zu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Bf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Sn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Iu(t,i,s){var a=t.tag;if(a===5||a===6)t=t.stateNode,i?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,i):(i=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.appendChild(t),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=xo));else if(a!==4&&(a===27&&Sn(t.type)&&(s=t.stateNode,i=null),t=t.child,t!==null))for(Iu(t,i,s),t=t.sibling;t!==null;)Iu(t,i,s),t=t.sibling}function uo(t,i,s){var a=t.tag;if(a===5||a===6)t=t.stateNode,i?s.insertBefore(t,i):s.appendChild(t);else if(a!==4&&(a===27&&Sn(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(uo(t,i,s),t=t.sibling;t!==null;)uo(t,i,s),t=t.sibling}function Hf(t){var i=t.stateNode,s=t.memoizedProps;try{for(var a=t.type,c=i.attributes;c.length;)i.removeAttributeNode(c[0]);pt(i,a,s),i[gt]=t,i[Ct]=s}catch(f){Le(t,t.return,f)}}var Vi=!1,Je=!1,Gu=!1,Pf=typeof WeakSet=="function"?WeakSet:Set,ct=null;function N_(t,i){if(t=t.containerInfo,rc=Co,t=Qh(t),zl(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var c=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break e}var g=0,_=-1,E=-1,G=0,Y=0,W=t,L=null;t:for(;;){for(var H;W!==s||c!==0&&W.nodeType!==3||(_=g+c),W!==f||a!==0&&W.nodeType!==3||(E=g+a),W.nodeType===3&&(g+=W.nodeValue.length),(H=W.firstChild)!==null;)L=W,W=H;for(;;){if(W===t)break t;if(L===s&&++G===c&&(_=g),L===f&&++Y===a&&(E=g),(H=W.nextSibling)!==null)break;W=L,L=W.parentNode}W=H}s=_===-1||E===-1?null:{start:_,end:E}}else s=null}s=s||{start:0,end:0}}else s=null;for(ac={focusedElem:t,selectionRange:s},Co=!1,ct=i;ct!==null;)if(i=ct,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,ct=t;else for(;ct!==null;){switch(i=ct,f=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,s=i,c=f.memoizedProps,f=f.memoizedState,a=s.stateNode;try{var ge=Qn(s.type,c,s.elementType===s.type);t=a.getSnapshotBeforeUpdate(ge,f),a.__reactInternalSnapshotBeforeUpdate=t}catch(he){Le(s,s.return,he)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,s=t.nodeType,s===9)uc(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":uc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,ct=t;break}ct=i.return}}function jf(t,i,s){var a=s.flags;switch(s.tag){case 0:case 11:case 15:_n(t,s),a&4&&Gr(5,s);break;case 1:if(_n(t,s),a&4)if(t=s.stateNode,i===null)try{t.componentDidMount()}catch(g){Le(s,s.return,g)}else{var c=Qn(s.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(c,i,t.__reactInternalSnapshotBeforeUpdate)}catch(g){Le(s,s.return,g)}}a&64&&Lf(s),a&512&&Lr(s,s.return);break;case 3:if(_n(t,s),a&64&&(t=s.updateQueue,t!==null)){if(i=null,s.child!==null)switch(s.child.tag){case 27:case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}try{wd(t,i)}catch(g){Le(s,s.return,g)}}break;case 27:i===null&&a&4&&Hf(s);case 26:case 5:_n(t,s),i===null&&a&4&&Vf(s),a&512&&Lr(s,s.return);break;case 12:_n(t,s);break;case 13:_n(t,s),a&4&&Yf(t,s),a&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=H_.bind(null,s),sy(t,s))));break;case 22:if(a=s.memoizedState!==null||Vi,!a){i=i!==null&&i.memoizedState!==null||Je,c=Vi;var f=Je;Vi=a,(Je=i)&&!f?yn(t,s,(s.subtreeFlags&8772)!==0):_n(t,s),Vi=c,Je=f}break;case 30:break;default:_n(t,s)}}function kf(t){var i=t.alternate;i!==null&&(t.alternate=null,kf(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&pl(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ke=null,Nt=!1;function Bi(t,i,s){for(s=s.child;s!==null;)Ff(t,i,s),s=s.sibling}function Ff(t,i,s){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(nr,s)}catch{}switch(s.tag){case 26:Je||_i(s,i),Bi(t,i,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Je||_i(s,i);var a=ke,c=Nt;Sn(s.type)&&(ke=s.stateNode,Nt=!1),Bi(t,i,s),Yr(s.stateNode),ke=a,Nt=c;break;case 5:Je||_i(s,i);case 6:if(a=ke,c=Nt,ke=null,Bi(t,i,s),ke=a,Nt=c,ke!==null)if(Nt)try{(ke.nodeType===9?ke.body:ke.nodeName==="HTML"?ke.ownerDocument.body:ke).removeChild(s.stateNode)}catch(f){Le(s,i,f)}else try{ke.removeChild(s.stateNode)}catch(f){Le(s,i,f)}break;case 18:ke!==null&&(Nt?(t=ke,Mp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),$r(t)):Mp(ke,s.stateNode));break;case 4:a=ke,c=Nt,ke=s.stateNode.containerInfo,Nt=!0,Bi(t,i,s),ke=a,Nt=c;break;case 0:case 11:case 14:case 15:Je||vn(2,s,i),Je||vn(4,s,i),Bi(t,i,s);break;case 1:Je||(_i(s,i),a=s.stateNode,typeof a.componentWillUnmount=="function"&&Uf(s,i,a)),Bi(t,i,s);break;case 21:Bi(t,i,s);break;case 22:Je=(a=Je)||s.memoizedState!==null,Bi(t,i,s),Je=a;break;default:Bi(t,i,s)}}function Yf(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{$r(t)}catch(s){Le(i,i.return,s)}}function M_(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Pf),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Pf),i;default:throw Error(r(435,t.tag))}}function Lu(t,i){var s=M_(t);i.forEach(function(a){var c=P_.bind(null,t,a);s.has(a)||(s.add(a),a.then(c,c))})}function Vt(t,i){var s=i.deletions;if(s!==null)for(var a=0;a<s.length;a++){var c=s[a],f=t,g=i,_=g;e:for(;_!==null;){switch(_.tag){case 27:if(Sn(_.type)){ke=_.stateNode,Nt=!1;break e}break;case 5:ke=_.stateNode,Nt=!1;break e;case 3:case 4:ke=_.stateNode.containerInfo,Nt=!0;break e}_=_.return}if(ke===null)throw Error(r(160));Ff(f,g,c),ke=null,Nt=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Xf(i,t),i=i.sibling}var li=null;function Xf(t,i){var s=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Vt(i,t),Bt(t),a&4&&(vn(3,t,t.return),Gr(3,t),vn(5,t,t.return));break;case 1:Vt(i,t),Bt(t),a&512&&(Je||s===null||_i(s,s.return)),a&64&&Vi&&(t=t.updateQueue,t!==null&&(a=t.callbacks,a!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?a:s.concat(a))));break;case 26:var c=li;if(Vt(i,t),Bt(t),a&512&&(Je||s===null||_i(s,s.return)),a&4){var f=s!==null?s.memoizedState:null;if(a=t.memoizedState,s===null)if(a===null)if(t.stateNode===null){e:{a=t.type,s=t.memoizedProps,c=c.ownerDocument||c;t:switch(a){case"title":f=c.getElementsByTagName("title")[0],(!f||f[ar]||f[gt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(a),c.head.insertBefore(f,c.querySelector("head > title"))),pt(f,a,s),f[gt]=t,lt(f),a=f;break e;case"link":var g=Hp("link","href",c).get(a+(s.href||""));if(g){for(var _=0;_<g.length;_++)if(f=g[_],f.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&f.getAttribute("rel")===(s.rel==null?null:s.rel)&&f.getAttribute("title")===(s.title==null?null:s.title)&&f.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){g.splice(_,1);break t}}f=c.createElement(a),pt(f,a,s),c.head.appendChild(f);break;case"meta":if(g=Hp("meta","content",c).get(a+(s.content||""))){for(_=0;_<g.length;_++)if(f=g[_],f.getAttribute("content")===(s.content==null?null:""+s.content)&&f.getAttribute("name")===(s.name==null?null:s.name)&&f.getAttribute("property")===(s.property==null?null:s.property)&&f.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&f.getAttribute("charset")===(s.charSet==null?null:s.charSet)){g.splice(_,1);break t}}f=c.createElement(a),pt(f,a,s),c.head.appendChild(f);break;default:throw Error(r(468,a))}f[gt]=t,lt(f),a=f}t.stateNode=a}else Pp(c,t.type,t.stateNode);else t.stateNode=Bp(c,a,t.memoizedProps);else f!==a?(f===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):f.count--,a===null?Pp(c,t.type,t.stateNode):Bp(c,a,t.memoizedProps)):a===null&&t.stateNode!==null&&Mu(t,t.memoizedProps,s.memoizedProps)}break;case 27:Vt(i,t),Bt(t),a&512&&(Je||s===null||_i(s,s.return)),s!==null&&a&4&&Mu(t,t.memoizedProps,s.memoizedProps);break;case 5:if(Vt(i,t),Bt(t),a&512&&(Je||s===null||_i(s,s.return)),t.flags&32){c=t.stateNode;try{ms(c,"")}catch(H){Le(t,t.return,H)}}a&4&&t.stateNode!=null&&(c=t.memoizedProps,Mu(t,c,s!==null?s.memoizedProps:c)),a&1024&&(Gu=!0);break;case 6:if(Vt(i,t),Bt(t),a&4){if(t.stateNode===null)throw Error(r(162));a=t.memoizedProps,s=t.stateNode;try{s.nodeValue=a}catch(H){Le(t,t.return,H)}}break;case 3:if(So=null,c=li,li=Eo(i.containerInfo),Vt(i,t),li=c,Bt(t),a&4&&s!==null&&s.memoizedState.isDehydrated)try{$r(i.containerInfo)}catch(H){Le(t,t.return,H)}Gu&&(Gu=!1,qf(t));break;case 4:a=li,li=Eo(t.stateNode.containerInfo),Vt(i,t),Bt(t),li=a;break;case 12:Vt(i,t),Bt(t);break;case 13:Vt(i,t),Bt(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(ju=mi()),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Lu(t,a)));break;case 22:c=t.memoizedState!==null;var E=s!==null&&s.memoizedState!==null,G=Vi,Y=Je;if(Vi=G||c,Je=Y||E,Vt(i,t),Je=Y,Vi=G,Bt(t),a&8192)e:for(i=t.stateNode,i._visibility=c?i._visibility&-2:i._visibility|1,c&&(s===null||E||Vi||Je||Jn(t)),s=null,i=t;;){if(i.tag===5||i.tag===26){if(s===null){E=s=i;try{if(f=E.stateNode,c)g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{_=E.stateNode;var W=E.memoizedProps.style,L=W!=null&&W.hasOwnProperty("display")?W.display:null;_.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(H){Le(E,E.return,H)}}}else if(i.tag===6){if(s===null){E=i;try{E.stateNode.nodeValue=c?"":E.memoizedProps}catch(H){Le(E,E.return,H)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;s===i&&(s=null),i=i.return}s===i&&(s=null),i.sibling.return=i.return,i=i.sibling}a&4&&(a=t.updateQueue,a!==null&&(s=a.retryQueue,s!==null&&(a.retryQueue=null,Lu(t,s))));break;case 19:Vt(i,t),Bt(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Lu(t,a)));break;case 30:break;case 21:break;default:Vt(i,t),Bt(t)}}function Bt(t){var i=t.flags;if(i&2){try{for(var s,a=t.return;a!==null;){if(Bf(a)){s=a;break}a=a.return}if(s==null)throw Error(r(160));switch(s.tag){case 27:var c=s.stateNode,f=zu(t);uo(t,f,c);break;case 5:var g=s.stateNode;s.flags&32&&(ms(g,""),s.flags&=-33);var _=zu(t);uo(t,_,g);break;case 3:case 4:var E=s.stateNode.containerInfo,G=zu(t);Iu(t,G,E);break;default:throw Error(r(161))}}catch(Y){Le(t,t.return,Y)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function qf(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;qf(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function _n(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)jf(t,i.alternate,i),i=i.sibling}function Jn(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:vn(4,i,i.return),Jn(i);break;case 1:_i(i,i.return);var s=i.stateNode;typeof s.componentWillUnmount=="function"&&Uf(i,i.return,s),Jn(i);break;case 27:Yr(i.stateNode);case 26:case 5:_i(i,i.return),Jn(i);break;case 22:i.memoizedState===null&&Jn(i);break;case 30:Jn(i);break;default:Jn(i)}t=t.sibling}}function yn(t,i,s){for(s=s&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var a=i.alternate,c=t,f=i,g=f.flags;switch(f.tag){case 0:case 11:case 15:yn(c,f,s),Gr(4,f);break;case 1:if(yn(c,f,s),a=f,c=a.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(G){Le(a,a.return,G)}if(a=f,c=a.updateQueue,c!==null){var _=a.stateNode;try{var E=c.shared.hiddenCallbacks;if(E!==null)for(c.shared.hiddenCallbacks=null,c=0;c<E.length;c++)xd(E[c],_)}catch(G){Le(a,a.return,G)}}s&&g&64&&Lf(f),Lr(f,f.return);break;case 27:Hf(f);case 26:case 5:yn(c,f,s),s&&a===null&&g&4&&Vf(f),Lr(f,f.return);break;case 12:yn(c,f,s);break;case 13:yn(c,f,s),s&&g&4&&Yf(c,f);break;case 22:f.memoizedState===null&&yn(c,f,s),Lr(f,f.return);break;case 30:break;default:yn(c,f,s)}i=i.sibling}}function Uu(t,i){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&xr(s))}function Vu(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&xr(t))}function yi(t,i,s,a){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Wf(t,i,s,a),i=i.sibling}function Wf(t,i,s,a){var c=i.flags;switch(i.tag){case 0:case 11:case 15:yi(t,i,s,a),c&2048&&Gr(9,i);break;case 1:yi(t,i,s,a);break;case 3:yi(t,i,s,a),c&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&xr(t)));break;case 12:if(c&2048){yi(t,i,s,a),t=i.stateNode;try{var f=i.memoizedProps,g=f.id,_=f.onPostCommit;typeof _=="function"&&_(g,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(E){Le(i,i.return,E)}}else yi(t,i,s,a);break;case 13:yi(t,i,s,a);break;case 23:break;case 22:f=i.stateNode,g=i.alternate,i.memoizedState!==null?f._visibility&2?yi(t,i,s,a):Ur(t,i):f._visibility&2?yi(t,i,s,a):(f._visibility|=2,Is(t,i,s,a,(i.subtreeFlags&10256)!==0)),c&2048&&Uu(g,i);break;case 24:yi(t,i,s,a),c&2048&&Vu(i.alternate,i);break;default:yi(t,i,s,a)}}function Is(t,i,s,a,c){for(c=c&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=t,g=i,_=s,E=a,G=g.flags;switch(g.tag){case 0:case 11:case 15:Is(f,g,_,E,c),Gr(8,g);break;case 23:break;case 22:var Y=g.stateNode;g.memoizedState!==null?Y._visibility&2?Is(f,g,_,E,c):Ur(f,g):(Y._visibility|=2,Is(f,g,_,E,c)),c&&G&2048&&Uu(g.alternate,g);break;case 24:Is(f,g,_,E,c),c&&G&2048&&Vu(g.alternate,g);break;default:Is(f,g,_,E,c)}i=i.sibling}}function Ur(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var s=t,a=i,c=a.flags;switch(a.tag){case 22:Ur(s,a),c&2048&&Uu(a.alternate,a);break;case 24:Ur(s,a),c&2048&&Vu(a.alternate,a);break;default:Ur(s,a)}i=i.sibling}}var Vr=8192;function Gs(t){if(t.subtreeFlags&Vr)for(t=t.child;t!==null;)Zf(t),t=t.sibling}function Zf(t){switch(t.tag){case 26:Gs(t),t.flags&Vr&&t.memoizedState!==null&&vy(li,t.memoizedState,t.memoizedProps);break;case 5:Gs(t);break;case 3:case 4:var i=li;li=Eo(t.stateNode.containerInfo),Gs(t),li=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Vr,Vr=16777216,Gs(t),Vr=i):Gs(t));break;default:Gs(t)}}function Kf(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Br(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var a=i[s];ct=a,Jf(a,t)}Kf(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Qf(t),t=t.sibling}function Qf(t){switch(t.tag){case 0:case 11:case 15:Br(t),t.flags&2048&&vn(9,t,t.return);break;case 3:Br(t);break;case 12:Br(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,co(t)):Br(t);break;default:Br(t)}}function co(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var a=i[s];ct=a,Jf(a,t)}Kf(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:vn(8,i,i.return),co(i);break;case 22:s=i.stateNode,s._visibility&2&&(s._visibility&=-3,co(i));break;default:co(i)}t=t.sibling}}function Jf(t,i){for(;ct!==null;){var s=ct;switch(s.tag){case 0:case 11:case 15:vn(8,s,i);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var a=s.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:xr(s.memoizedState.cache)}if(a=s.child,a!==null)a.return=s,ct=a;else e:for(s=t;ct!==null;){a=ct;var c=a.sibling,f=a.return;if(kf(a),a===s){ct=null;break e}if(c!==null){c.return=f,ct=c;break e}ct=f}}}var z_={getCacheForType:function(t){var i=vt(st),s=i.data.get(t);return s===void 0&&(s=t(),i.data.set(t,s)),s}},I_=typeof WeakMap=="function"?WeakMap:Map,Oe=0,Be=null,Te=null,De=0,Ne=0,Ht=null,bn=!1,Ls=!1,Bu=!1,Hi=0,We=0,xn=0,$n=0,Hu=0,Qt=0,Us=0,Hr=null,Mt=null,Pu=!1,ju=0,ho=1/0,fo=null,wn=null,ft=0,En=null,Vs=null,Bs=0,ku=0,Fu=null,$f=null,Pr=0,Yu=null;function Pt(){if((Oe&2)!==0&&De!==0)return De&-De;if(A.T!==null){var t=Ds;return t!==0?t:Ju()}return ph()}function ep(){Qt===0&&(Qt=(De&536870912)===0||Ce?ch():536870912);var t=Kt.current;return t!==null&&(t.flags|=32),Qt}function jt(t,i,s){(t===Be&&(Ne===2||Ne===9)||t.cancelPendingCommit!==null)&&(Hs(t,0),Tn(t,De,Qt,!1)),rr(t,s),((Oe&2)===0||t!==Be)&&(t===Be&&((Oe&2)===0&&($n|=s),We===4&&Tn(t,De,Qt,!1)),bi(t))}function tp(t,i,s){if((Oe&6)!==0)throw Error(r(327));var a=!s&&(i&124)===0&&(i&t.expiredLanes)===0||sr(t,i),c=a?U_(t,i):Wu(t,i,!0),f=a;do{if(c===0){Ls&&!a&&Tn(t,i,0,!1);break}else{if(s=t.current.alternate,f&&!G_(s)){c=Wu(t,i,!1),f=!1;continue}if(c===2){if(f=i,t.errorRecoveryDisabledLanes&f)var g=0;else g=t.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){i=g;e:{var _=t;c=Hr;var E=_.current.memoizedState.isDehydrated;if(E&&(Hs(_,g).flags|=256),g=Wu(_,g,!1),g!==2){if(Bu&&!E){_.errorRecoveryDisabledLanes|=f,$n|=f,c=4;break e}f=Mt,Mt=c,f!==null&&(Mt===null?Mt=f:Mt.push.apply(Mt,f))}c=g}if(f=!1,c!==2)continue}}if(c===1){Hs(t,0),Tn(t,i,0,!0);break}e:{switch(a=t,f=c,f){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Tn(a,i,Qt,!bn);break e;case 2:Mt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(c=ju+300-mi(),10<c)){if(Tn(a,i,Qt,!bn),Ea(a,0,!0)!==0)break e;a.timeoutHandle=Op(ip.bind(null,a,s,Mt,fo,Pu,i,Qt,$n,Us,bn,f,2,-0,0),c);break e}ip(a,s,Mt,fo,Pu,i,Qt,$n,Us,bn,f,0,-0,0)}}break}while(!0);bi(t)}function ip(t,i,s,a,c,f,g,_,E,G,Y,W,L,H){if(t.timeoutHandle=-1,W=i.subtreeFlags,(W&8192||(W&16785408)===16785408)&&(Wr={stylesheets:null,count:0,unsuspend:gy},Zf(i),W=_y(),W!==null)){t.cancelPendingCommit=W(up.bind(null,t,i,f,s,a,c,g,_,E,Y,1,L,H)),Tn(t,f,g,!G);return}up(t,i,f,s,a,c,g,_,E)}function G_(t){for(var i=t;;){var s=i.tag;if((s===0||s===11||s===15)&&i.flags&16384&&(s=i.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var a=0;a<s.length;a++){var c=s[a],f=c.getSnapshot;c=c.value;try{if(!Lt(f(),c))return!1}catch{return!1}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Tn(t,i,s,a){i&=~Hu,i&=~$n,t.suspendedLanes|=i,t.pingedLanes&=~i,a&&(t.warmLanes|=i),a=t.expirationTimes;for(var c=i;0<c;){var f=31-Gt(c),g=1<<f;a[f]=-1,c&=~g}s!==0&&dh(t,s,i)}function po(){return(Oe&6)===0?(jr(0),!1):!0}function Xu(){if(Te!==null){if(Ne===0)var t=Te.return;else t=Te,Mi=qn=null,uu(t),Ms=null,Mr=0,t=Te;for(;t!==null;)Gf(t.alternate,t),t=t.return;Te=null}}function Hs(t,i){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,$_(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Xu(),Be=t,Te=s=Ri(t.current,null),De=i,Ne=0,Ht=null,bn=!1,Ls=sr(t,i),Bu=!1,Us=Qt=Hu=$n=xn=We=0,Mt=Hr=null,Pu=!1,(i&8)!==0&&(i|=i&32);var a=t.entangledLanes;if(a!==0)for(t=t.entanglements,a&=i;0<a;){var c=31-Gt(a),f=1<<c;i|=t[c],a&=~f}return Hi=i,Ga(),s}function np(t,i){xe=null,A.H=eo,i===Er||i===Fa?(i=yd(),Ne=3):i===gd?(i=yd(),Ne=4):Ne=i===xf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ht=i,Te===null&&(We=1,ro(t,Xt(i,t.current)))}function sp(){var t=A.H;return A.H=eo,t===null?eo:t}function rp(){var t=A.A;return A.A=z_,t}function qu(){We=4,bn||(De&4194048)!==De&&Kt.current!==null||(Ls=!0),(xn&134217727)===0&&($n&134217727)===0||Be===null||Tn(Be,De,Qt,!1)}function Wu(t,i,s){var a=Oe;Oe|=2;var c=sp(),f=rp();(Be!==t||De!==i)&&(fo=null,Hs(t,i)),i=!1;var g=We;e:do try{if(Ne!==0&&Te!==null){var _=Te,E=Ht;switch(Ne){case 8:Xu(),g=6;break e;case 3:case 2:case 9:case 6:Kt.current===null&&(i=!0);var G=Ne;if(Ne=0,Ht=null,Ps(t,_,E,G),s&&Ls){g=0;break e}break;default:G=Ne,Ne=0,Ht=null,Ps(t,_,E,G)}}L_(),g=We;break}catch(Y){np(t,Y)}while(!0);return i&&t.shellSuspendCounter++,Mi=qn=null,Oe=a,A.H=c,A.A=f,Te===null&&(Be=null,De=0,Ga()),g}function L_(){for(;Te!==null;)ap(Te)}function U_(t,i){var s=Oe;Oe|=2;var a=sp(),c=rp();Be!==t||De!==i?(fo=null,ho=mi()+500,Hs(t,i)):Ls=sr(t,i);e:do try{if(Ne!==0&&Te!==null){i=Te;var f=Ht;t:switch(Ne){case 1:Ne=0,Ht=null,Ps(t,i,f,1);break;case 2:case 9:if(vd(f)){Ne=0,Ht=null,op(i);break}i=function(){Ne!==2&&Ne!==9||Be!==t||(Ne=7),bi(t)},f.then(i,i);break e;case 3:Ne=7;break e;case 4:Ne=5;break e;case 7:vd(f)?(Ne=0,Ht=null,op(i)):(Ne=0,Ht=null,Ps(t,i,f,7));break;case 5:var g=null;switch(Te.tag){case 26:g=Te.memoizedState;case 5:case 27:var _=Te;if(!g||jp(g)){Ne=0,Ht=null;var E=_.sibling;if(E!==null)Te=E;else{var G=_.return;G!==null?(Te=G,mo(G)):Te=null}break t}}Ne=0,Ht=null,Ps(t,i,f,5);break;case 6:Ne=0,Ht=null,Ps(t,i,f,6);break;case 8:Xu(),We=6;break e;default:throw Error(r(462))}}V_();break}catch(Y){np(t,Y)}while(!0);return Mi=qn=null,A.H=a,A.A=c,Oe=s,Te!==null?0:(Be=null,De=0,Ga(),We)}function V_(){for(;Te!==null&&!ya();)ap(Te)}function ap(t){var i=zf(t.alternate,t,Hi);t.memoizedProps=t.pendingProps,i===null?mo(t):Te=i}function op(t){var i=t,s=i.alternate;switch(i.tag){case 15:case 0:i=Af(s,i,i.pendingProps,i.type,void 0,De);break;case 11:i=Af(s,i,i.pendingProps,i.type.render,i.ref,De);break;case 5:uu(i);default:Gf(s,i),i=Te=od(i,Hi),i=zf(s,i,Hi)}t.memoizedProps=t.pendingProps,i===null?mo(t):Te=i}function Ps(t,i,s,a){Mi=qn=null,uu(i),Ms=null,Mr=0;var c=i.return;try{if(A_(t,c,i,s,De)){We=1,ro(t,Xt(s,t.current)),Te=null;return}}catch(f){if(c!==null)throw Te=c,f;We=1,ro(t,Xt(s,t.current)),Te=null;return}i.flags&32768?(Ce||a===1?t=!0:Ls||(De&536870912)!==0?t=!1:(bn=t=!0,(a===2||a===9||a===3||a===6)&&(a=Kt.current,a!==null&&a.tag===13&&(a.flags|=16384))),lp(i,t)):mo(i)}function mo(t){var i=t;do{if((i.flags&32768)!==0){lp(i,bn);return}t=i.return;var s=R_(i.alternate,i,Hi);if(s!==null){Te=s;return}if(i=i.sibling,i!==null){Te=i;return}Te=i=t}while(i!==null);We===0&&(We=5)}function lp(t,i){do{var s=O_(t.alternate,t);if(s!==null){s.flags&=32767,Te=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!i&&(t=t.sibling,t!==null)){Te=t;return}Te=t=s}while(t!==null);We=6,Te=null}function up(t,i,s,a,c,f,g,_,E){t.cancelPendingCommit=null;do go();while(ft!==0);if((Oe&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(f=i.lanes|i.childLanes,f|=Vl,gv(t,s,f,g,_,E),t===Be&&(Te=Be=null,De=0),Vs=i,En=t,Bs=s,ku=f,Fu=c,$f=a,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,j_(ba,function(){return pp(),null})):(t.callbackNode=null,t.callbackPriority=0),a=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||a){a=A.T,A.T=null,c=X.p,X.p=2,g=Oe,Oe|=4;try{N_(t,i,s)}finally{Oe=g,X.p=c,A.T=a}}ft=1,cp(),hp(),dp()}}function cp(){if(ft===1){ft=0;var t=En,i=Vs,s=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||s){s=A.T,A.T=null;var a=X.p;X.p=2;var c=Oe;Oe|=4;try{Xf(i,t);var f=ac,g=Qh(t.containerInfo),_=f.focusedElem,E=f.selectionRange;if(g!==_&&_&&_.ownerDocument&&Kh(_.ownerDocument.documentElement,_)){if(E!==null&&zl(_)){var G=E.start,Y=E.end;if(Y===void 0&&(Y=G),"selectionStart"in _)_.selectionStart=G,_.selectionEnd=Math.min(Y,_.value.length);else{var W=_.ownerDocument||document,L=W&&W.defaultView||window;if(L.getSelection){var H=L.getSelection(),ge=_.textContent.length,he=Math.min(E.start,ge),Ie=E.end===void 0?he:Math.min(E.end,ge);!H.extend&&he>Ie&&(g=Ie,Ie=he,he=g);var N=Zh(_,he),C=Zh(_,Ie);if(N&&C&&(H.rangeCount!==1||H.anchorNode!==N.node||H.anchorOffset!==N.offset||H.focusNode!==C.node||H.focusOffset!==C.offset)){var I=W.createRange();I.setStart(N.node,N.offset),H.removeAllRanges(),he>Ie?(H.addRange(I),H.extend(C.node,C.offset)):(I.setEnd(C.node,C.offset),H.addRange(I))}}}}for(W=[],H=_;H=H.parentNode;)H.nodeType===1&&W.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<W.length;_++){var q=W[_];q.element.scrollLeft=q.left,q.element.scrollTop=q.top}}Co=!!rc,ac=rc=null}finally{Oe=c,X.p=a,A.T=s}}t.current=i,ft=2}}function hp(){if(ft===2){ft=0;var t=En,i=Vs,s=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||s){s=A.T,A.T=null;var a=X.p;X.p=2;var c=Oe;Oe|=4;try{jf(t,i.alternate,i)}finally{Oe=c,X.p=a,A.T=s}}ft=3}}function dp(){if(ft===4||ft===3){ft=0,ov();var t=En,i=Vs,s=Bs,a=$f;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ft=5:(ft=0,Vs=En=null,fp(t,t.pendingLanes));var c=t.pendingLanes;if(c===0&&(wn=null),dl(s),i=i.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(nr,i,void 0,(i.current.flags&128)===128)}catch{}if(a!==null){i=A.T,c=X.p,X.p=2,A.T=null;try{for(var f=t.onRecoverableError,g=0;g<a.length;g++){var _=a[g];f(_.value,{componentStack:_.stack})}}finally{A.T=i,X.p=c}}(Bs&3)!==0&&go(),bi(t),c=t.pendingLanes,(s&4194090)!==0&&(c&42)!==0?t===Yu?Pr++:(Pr=0,Yu=t):Pr=0,jr(0)}}function fp(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,xr(i)))}function go(t){return cp(),hp(),dp(),pp()}function pp(){if(ft!==5)return!1;var t=En,i=ku;ku=0;var s=dl(Bs),a=A.T,c=X.p;try{X.p=32>s?32:s,A.T=null,s=Fu,Fu=null;var f=En,g=Bs;if(ft=0,Vs=En=null,Bs=0,(Oe&6)!==0)throw Error(r(331));var _=Oe;if(Oe|=4,Qf(f.current),Wf(f,f.current,g,s),Oe=_,jr(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(nr,f)}catch{}return!0}finally{X.p=c,A.T=a,fp(t,i)}}function mp(t,i,s){i=Xt(s,i),i=Eu(t.stateNode,i,2),t=fn(t,i,2),t!==null&&(rr(t,2),bi(t))}function Le(t,i,s){if(t.tag===3)mp(t,t,s);else for(;i!==null;){if(i.tag===3){mp(i,t,s);break}else if(i.tag===1){var a=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(wn===null||!wn.has(a))){t=Xt(s,t),s=yf(2),a=fn(i,s,2),a!==null&&(bf(s,a,i,t),rr(a,2),bi(a));break}}i=i.return}}function Zu(t,i,s){var a=t.pingCache;if(a===null){a=t.pingCache=new I_;var c=new Set;a.set(i,c)}else c=a.get(i),c===void 0&&(c=new Set,a.set(i,c));c.has(s)||(Bu=!0,c.add(s),t=B_.bind(null,t,i,s),i.then(t,t))}function B_(t,i,s){var a=t.pingCache;a!==null&&a.delete(i),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Be===t&&(De&s)===s&&(We===4||We===3&&(De&62914560)===De&&300>mi()-ju?(Oe&2)===0&&Hs(t,0):Hu|=s,Us===De&&(Us=0)),bi(t)}function gp(t,i){i===0&&(i=hh()),t=ws(t,i),t!==null&&(rr(t,i),bi(t))}function H_(t){var i=t.memoizedState,s=0;i!==null&&(s=i.retryLane),gp(t,s)}function P_(t,i){var s=0;switch(t.tag){case 13:var a=t.stateNode,c=t.memoizedState;c!==null&&(s=c.retryLane);break;case 19:a=t.stateNode;break;case 22:a=t.stateNode._retryCache;break;default:throw Error(r(314))}a!==null&&a.delete(i),gp(t,s)}function j_(t,i){return an(t,i)}var vo=null,js=null,Ku=!1,_o=!1,Qu=!1,es=0;function bi(t){t!==js&&t.next===null&&(js===null?vo=js=t:js=js.next=t),_o=!0,Ku||(Ku=!0,F_())}function jr(t,i){if(!Qu&&_o){Qu=!0;do for(var s=!1,a=vo;a!==null;){if(t!==0){var c=a.pendingLanes;if(c===0)var f=0;else{var g=a.suspendedLanes,_=a.pingedLanes;f=(1<<31-Gt(42|t)+1)-1,f&=c&~(g&~_),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(s=!0,bp(a,f))}else f=De,f=Ea(a,a===Be?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(f&3)===0||sr(a,f)||(s=!0,bp(a,f));a=a.next}while(s);Qu=!1}}function k_(){vp()}function vp(){_o=Ku=!1;var t=0;es!==0&&(J_()&&(t=es),es=0);for(var i=mi(),s=null,a=vo;a!==null;){var c=a.next,f=_p(a,i);f===0?(a.next=null,s===null?vo=c:s.next=c,c===null&&(js=s)):(s=a,(t!==0||(f&3)!==0)&&(_o=!0)),a=c}jr(t)}function _p(t,i){for(var s=t.suspendedLanes,a=t.pingedLanes,c=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var g=31-Gt(f),_=1<<g,E=c[g];E===-1?((_&s)===0||(_&a)!==0)&&(c[g]=mv(_,i)):E<=i&&(t.expiredLanes|=_),f&=~_}if(i=Be,s=De,s=Ea(t,t===i?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a=t.callbackNode,s===0||t===i&&(Ne===2||Ne===9)||t.cancelPendingCommit!==null)return a!==null&&a!==null&&ir(a),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||sr(t,s)){if(i=s&-s,i===t.callbackPriority)return i;switch(a!==null&&ir(a),dl(s)){case 2:case 8:s=lh;break;case 32:s=ba;break;case 268435456:s=uh;break;default:s=ba}return a=yp.bind(null,t),s=an(s,a),t.callbackPriority=i,t.callbackNode=s,i}return a!==null&&a!==null&&ir(a),t.callbackPriority=2,t.callbackNode=null,2}function yp(t,i){if(ft!==0&&ft!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(go()&&t.callbackNode!==s)return null;var a=De;return a=Ea(t,t===Be?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a===0?null:(tp(t,a,i),_p(t,mi()),t.callbackNode!=null&&t.callbackNode===s?yp.bind(null,t):null)}function bp(t,i){if(go())return null;tp(t,i,!0)}function F_(){ey(function(){(Oe&6)!==0?an(oh,k_):vp()})}function Ju(){return es===0&&(es=ch()),es}function xp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ca(""+t)}function wp(t,i){var s=i.ownerDocument.createElement("input");return s.name=i.name,s.value=i.value,t.id&&s.setAttribute("form",t.id),i.parentNode.insertBefore(s,i),t=new FormData(t),s.parentNode.removeChild(s),t}function Y_(t,i,s,a,c){if(i==="submit"&&s&&s.stateNode===c){var f=xp((c[Ct]||null).action),g=a.submitter;g&&(i=(i=g[Ct]||null)?xp(i.formAction):g.getAttribute("formAction"),i!==null&&(f=i,g=null));var _=new Ma("action","action",null,a,c);t.push({event:_,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(es!==0){var E=g?wp(c,g):new FormData(c);_u(s,{pending:!0,data:E,method:c.method,action:f},null,E)}}else typeof f=="function"&&(_.preventDefault(),E=g?wp(c,g):new FormData(c),_u(s,{pending:!0,data:E,method:c.method,action:f},f,E))},currentTarget:c}]})}}for(var $u=0;$u<Ul.length;$u++){var ec=Ul[$u],X_=ec.toLowerCase(),q_=ec[0].toUpperCase()+ec.slice(1);oi(X_,"on"+q_)}oi(ed,"onAnimationEnd"),oi(td,"onAnimationIteration"),oi(id,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(c_,"onTransitionRun"),oi(h_,"onTransitionStart"),oi(d_,"onTransitionCancel"),oi(nd,"onTransitionEnd"),ds("onMouseEnter",["mouseout","mouseover"]),ds("onMouseLeave",["mouseout","mouseover"]),ds("onPointerEnter",["pointerout","pointerover"]),ds("onPointerLeave",["pointerout","pointerover"]),Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kr));function Ep(t,i){i=(i&4)!==0;for(var s=0;s<t.length;s++){var a=t[s],c=a.event;a=a.listeners;e:{var f=void 0;if(i)for(var g=a.length-1;0<=g;g--){var _=a[g],E=_.instance,G=_.currentTarget;if(_=_.listener,E!==f&&c.isPropagationStopped())break e;f=_,c.currentTarget=G;try{f(c)}catch(Y){so(Y)}c.currentTarget=null,f=E}else for(g=0;g<a.length;g++){if(_=a[g],E=_.instance,G=_.currentTarget,_=_.listener,E!==f&&c.isPropagationStopped())break e;f=_,c.currentTarget=G;try{f(c)}catch(Y){so(Y)}c.currentTarget=null,f=E}}}}function Se(t,i){var s=i[fl];s===void 0&&(s=i[fl]=new Set);var a=t+"__bubble";s.has(a)||(Tp(i,t,2,!1),s.add(a))}function tc(t,i,s){var a=0;i&&(a|=4),Tp(s,t,a,i)}var yo="_reactListening"+Math.random().toString(36).slice(2);function ic(t){if(!t[yo]){t[yo]=!0,gh.forEach(function(s){s!=="selectionchange"&&(W_.has(s)||tc(s,!1,t),tc(s,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[yo]||(i[yo]=!0,tc("selectionchange",!1,i))}}function Tp(t,i,s,a){switch(Wp(i)){case 2:var c=xy;break;case 8:c=wy;break;default:c=gc}s=c.bind(null,i,s,t),c=void 0,!Tl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(c=!0),a?c!==void 0?t.addEventListener(i,s,{capture:!0,passive:c}):t.addEventListener(i,s,!0):c!==void 0?t.addEventListener(i,s,{passive:c}):t.addEventListener(i,s,!1)}function nc(t,i,s,a,c){var f=a;if((i&1)===0&&(i&2)===0&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var _=a.stateNode.containerInfo;if(_===c)break;if(g===4)for(g=a.return;g!==null;){var E=g.tag;if((E===3||E===4)&&g.stateNode.containerInfo===c)return;g=g.return}for(;_!==null;){if(g=us(_),g===null)return;if(E=g.tag,E===5||E===6||E===26||E===27){a=f=g;continue e}_=_.parentNode}}a=a.return}Oh(function(){var G=f,Y=wl(s),W=[];e:{var L=sd.get(t);if(L!==void 0){var H=Ma,ge=t;switch(t){case"keypress":if(Oa(s)===0)break e;case"keydown":case"keyup":H=jv;break;case"focusin":ge="focus",H=Cl;break;case"focusout":ge="blur",H=Cl;break;case"beforeblur":case"afterblur":H=Cl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=zh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Ov;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=Yv;break;case ed:case td:case id:H=zv;break;case nd:H=qv;break;case"scroll":case"scrollend":H=Cv;break;case"wheel":H=Zv;break;case"copy":case"cut":case"paste":H=Gv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Gh;break;case"toggle":case"beforetoggle":H=Qv}var he=(i&4)!==0,Ie=!he&&(t==="scroll"||t==="scrollend"),N=he?L!==null?L+"Capture":null:L;he=[];for(var C=G,I;C!==null;){var q=C;if(I=q.stateNode,q=q.tag,q!==5&&q!==26&&q!==27||I===null||N===null||(q=lr(C,N),q!=null&&he.push(Fr(C,q,I))),Ie)break;C=C.return}0<he.length&&(L=new H(L,ge,null,s,Y),W.push({event:L,listeners:he}))}}if((i&7)===0){e:{if(L=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",L&&s!==xl&&(ge=s.relatedTarget||s.fromElement)&&(us(ge)||ge[ls]))break e;if((H||L)&&(L=Y.window===Y?Y:(L=Y.ownerDocument)?L.defaultView||L.parentWindow:window,H?(ge=s.relatedTarget||s.toElement,H=G,ge=ge?us(ge):null,ge!==null&&(Ie=l(ge),he=ge.tag,ge!==Ie||he!==5&&he!==27&&he!==6)&&(ge=null)):(H=null,ge=G),H!==ge)){if(he=zh,q="onMouseLeave",N="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(he=Gh,q="onPointerLeave",N="onPointerEnter",C="pointer"),Ie=H==null?L:or(H),I=ge==null?L:or(ge),L=new he(q,C+"leave",H,s,Y),L.target=Ie,L.relatedTarget=I,q=null,us(Y)===G&&(he=new he(N,C+"enter",ge,s,Y),he.target=I,he.relatedTarget=Ie,q=he),Ie=q,H&&ge)t:{for(he=H,N=ge,C=0,I=he;I;I=ks(I))C++;for(I=0,q=N;q;q=ks(q))I++;for(;0<C-I;)he=ks(he),C--;for(;0<I-C;)N=ks(N),I--;for(;C--;){if(he===N||N!==null&&he===N.alternate)break t;he=ks(he),N=ks(N)}he=null}else he=null;H!==null&&Sp(W,L,H,he,!1),ge!==null&&Ie!==null&&Sp(W,Ie,ge,he,!0)}}e:{if(L=G?or(G):window,H=L.nodeName&&L.nodeName.toLowerCase(),H==="select"||H==="input"&&L.type==="file")var re=kh;else if(Ph(L))if(Fh)re=o_;else{re=r_;var we=s_}else H=L.nodeName,!H||H.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?G&&bl(G.elementType)&&(re=kh):re=a_;if(re&&(re=re(t,G))){jh(W,re,s,Y);break e}we&&we(t,L,G),t==="focusout"&&G&&L.type==="number"&&G.memoizedProps.value!=null&&yl(L,"number",L.value)}switch(we=G?or(G):window,t){case"focusin":(Ph(we)||we.contentEditable==="true")&&(ys=we,Il=G,gr=null);break;case"focusout":gr=Il=ys=null;break;case"mousedown":Gl=!0;break;case"contextmenu":case"mouseup":case"dragend":Gl=!1,Jh(W,s,Y);break;case"selectionchange":if(u_)break;case"keydown":case"keyup":Jh(W,s,Y)}var le;if(Ol)e:{switch(t){case"compositionstart":var fe="onCompositionStart";break e;case"compositionend":fe="onCompositionEnd";break e;case"compositionupdate":fe="onCompositionUpdate";break e}fe=void 0}else _s?Bh(t,s)&&(fe="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(fe="onCompositionStart");fe&&(Lh&&s.locale!=="ko"&&(_s||fe!=="onCompositionStart"?fe==="onCompositionEnd"&&_s&&(le=Nh()):(un=Y,Sl="value"in un?un.value:un.textContent,_s=!0)),we=bo(G,fe),0<we.length&&(fe=new Ih(fe,t,null,s,Y),W.push({event:fe,listeners:we}),le?fe.data=le:(le=Hh(s),le!==null&&(fe.data=le)))),(le=$v?e_(t,s):t_(t,s))&&(fe=bo(G,"onBeforeInput"),0<fe.length&&(we=new Ih("onBeforeInput","beforeinput",null,s,Y),W.push({event:we,listeners:fe}),we.data=le)),Y_(W,t,G,s,Y)}Ep(W,i)})}function Fr(t,i,s){return{instance:t,listener:i,currentTarget:s}}function bo(t,i){for(var s=i+"Capture",a=[];t!==null;){var c=t,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=lr(t,s),c!=null&&a.unshift(Fr(t,c,f)),c=lr(t,i),c!=null&&a.push(Fr(t,c,f))),t.tag===3)return a;t=t.return}return[]}function ks(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Sp(t,i,s,a,c){for(var f=i._reactName,g=[];s!==null&&s!==a;){var _=s,E=_.alternate,G=_.stateNode;if(_=_.tag,E!==null&&E===a)break;_!==5&&_!==26&&_!==27||G===null||(E=G,c?(G=lr(s,f),G!=null&&g.unshift(Fr(s,G,E))):c||(G=lr(s,f),G!=null&&g.push(Fr(s,G,E)))),s=s.return}g.length!==0&&t.push({event:i,listeners:g})}var Z_=/\r\n?/g,K_=/\u0000|\uFFFD/g;function Dp(t){return(typeof t=="string"?t:""+t).replace(Z_,`
`).replace(K_,"")}function Ap(t,i){return i=Dp(i),Dp(t)===i}function xo(){}function ze(t,i,s,a,c,f){switch(s){case"children":typeof a=="string"?i==="body"||i==="textarea"&&a===""||ms(t,a):(typeof a=="number"||typeof a=="bigint")&&i!=="body"&&ms(t,""+a);break;case"className":Sa(t,"class",a);break;case"tabIndex":Sa(t,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Sa(t,s,a);break;case"style":Ch(t,a,f);break;case"data":if(i!=="object"){Sa(t,"data",a);break}case"src":case"href":if(a===""&&(i!=="a"||s!=="href")){t.removeAttribute(s);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(s);break}a=Ca(""+a),t.setAttribute(s,a);break;case"action":case"formAction":if(typeof a=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(s==="formAction"?(i!=="input"&&ze(t,i,"name",c.name,c,null),ze(t,i,"formEncType",c.formEncType,c,null),ze(t,i,"formMethod",c.formMethod,c,null),ze(t,i,"formTarget",c.formTarget,c,null)):(ze(t,i,"encType",c.encType,c,null),ze(t,i,"method",c.method,c,null),ze(t,i,"target",c.target,c,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(s);break}a=Ca(""+a),t.setAttribute(s,a);break;case"onClick":a!=null&&(t.onclick=xo);break;case"onScroll":a!=null&&Se("scroll",t);break;case"onScrollEnd":a!=null&&Se("scrollend",t);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(r(61));if(s=a.__html,s!=null){if(c.children!=null)throw Error(r(60));t.innerHTML=s}}break;case"multiple":t.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":t.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){t.removeAttribute("xlink:href");break}s=Ca(""+a),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(s,""+a):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":a===!0?t.setAttribute(s,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(s,a):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?t.setAttribute(s,a):t.removeAttribute(s);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?t.removeAttribute(s):t.setAttribute(s,a);break;case"popover":Se("beforetoggle",t),Se("toggle",t),Ta(t,"popover",a);break;case"xlinkActuate":Ai(t,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Ai(t,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Ai(t,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Ai(t,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Ai(t,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Ai(t,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Ai(t,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Ai(t,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Ai(t,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Ta(t,"is",a);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Dv.get(s)||s,Ta(t,s,a))}}function sc(t,i,s,a,c,f){switch(s){case"style":Ch(t,a,f);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(r(61));if(s=a.__html,s!=null){if(c.children!=null)throw Error(r(60));t.innerHTML=s}}break;case"children":typeof a=="string"?ms(t,a):(typeof a=="number"||typeof a=="bigint")&&ms(t,""+a);break;case"onScroll":a!=null&&Se("scroll",t);break;case"onScrollEnd":a!=null&&Se("scrollend",t);break;case"onClick":a!=null&&(t.onclick=xo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vh.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(c=s.endsWith("Capture"),i=s.slice(2,c?s.length-7:void 0),f=t[Ct]||null,f=f!=null?f[s]:null,typeof f=="function"&&t.removeEventListener(i,f,c),typeof a=="function")){typeof f!="function"&&f!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(i,a,c);break e}s in t?t[s]=a:a===!0?t.setAttribute(s,""):Ta(t,s,a)}}}function pt(t,i,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Se("error",t),Se("load",t);var a=!1,c=!1,f;for(f in s)if(s.hasOwnProperty(f)){var g=s[f];if(g!=null)switch(f){case"src":a=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ze(t,i,f,g,s,null)}}c&&ze(t,i,"srcSet",s.srcSet,s,null),a&&ze(t,i,"src",s.src,s,null);return;case"input":Se("invalid",t);var _=f=g=c=null,E=null,G=null;for(a in s)if(s.hasOwnProperty(a)){var Y=s[a];if(Y!=null)switch(a){case"name":c=Y;break;case"type":g=Y;break;case"checked":E=Y;break;case"defaultChecked":G=Y;break;case"value":f=Y;break;case"defaultValue":_=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,i));break;default:ze(t,i,a,Y,s,null)}}Th(t,f,_,E,G,g,c,!1),Da(t);return;case"select":Se("invalid",t),a=g=f=null;for(c in s)if(s.hasOwnProperty(c)&&(_=s[c],_!=null))switch(c){case"value":f=_;break;case"defaultValue":g=_;break;case"multiple":a=_;default:ze(t,i,c,_,s,null)}i=f,s=g,t.multiple=!!a,i!=null?ps(t,!!a,i,!1):s!=null&&ps(t,!!a,s,!0);return;case"textarea":Se("invalid",t),f=c=a=null;for(g in s)if(s.hasOwnProperty(g)&&(_=s[g],_!=null))switch(g){case"value":a=_;break;case"defaultValue":c=_;break;case"children":f=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:ze(t,i,g,_,s,null)}Dh(t,a,c,f),Da(t);return;case"option":for(E in s)if(s.hasOwnProperty(E)&&(a=s[E],a!=null))switch(E){case"selected":t.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:ze(t,i,E,a,s,null)}return;case"dialog":Se("beforetoggle",t),Se("toggle",t),Se("cancel",t),Se("close",t);break;case"iframe":case"object":Se("load",t);break;case"video":case"audio":for(a=0;a<kr.length;a++)Se(kr[a],t);break;case"image":Se("error",t),Se("load",t);break;case"details":Se("toggle",t);break;case"embed":case"source":case"link":Se("error",t),Se("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in s)if(s.hasOwnProperty(G)&&(a=s[G],a!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ze(t,i,G,a,s,null)}return;default:if(bl(i)){for(Y in s)s.hasOwnProperty(Y)&&(a=s[Y],a!==void 0&&sc(t,i,Y,a,s,void 0));return}}for(_ in s)s.hasOwnProperty(_)&&(a=s[_],a!=null&&ze(t,i,_,a,s,null))}function Q_(t,i,s,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,g=null,_=null,E=null,G=null,Y=null;for(H in s){var W=s[H];if(s.hasOwnProperty(H)&&W!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":E=W;default:a.hasOwnProperty(H)||ze(t,i,H,null,a,W)}}for(var L in a){var H=a[L];if(W=s[L],a.hasOwnProperty(L)&&(H!=null||W!=null))switch(L){case"type":f=H;break;case"name":c=H;break;case"checked":G=H;break;case"defaultChecked":Y=H;break;case"value":g=H;break;case"defaultValue":_=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:H!==W&&ze(t,i,L,H,a,W)}}_l(t,g,_,E,G,Y,f,c);return;case"select":H=g=_=L=null;for(f in s)if(E=s[f],s.hasOwnProperty(f)&&E!=null)switch(f){case"value":break;case"multiple":H=E;default:a.hasOwnProperty(f)||ze(t,i,f,null,a,E)}for(c in a)if(f=a[c],E=s[c],a.hasOwnProperty(c)&&(f!=null||E!=null))switch(c){case"value":L=f;break;case"defaultValue":_=f;break;case"multiple":g=f;default:f!==E&&ze(t,i,c,f,a,E)}i=_,s=g,a=H,L!=null?ps(t,!!s,L,!1):!!a!=!!s&&(i!=null?ps(t,!!s,i,!0):ps(t,!!s,s?[]:"",!1));return;case"textarea":H=L=null;for(_ in s)if(c=s[_],s.hasOwnProperty(_)&&c!=null&&!a.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:ze(t,i,_,null,a,c)}for(g in a)if(c=a[g],f=s[g],a.hasOwnProperty(g)&&(c!=null||f!=null))switch(g){case"value":L=c;break;case"defaultValue":H=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(r(91));break;default:c!==f&&ze(t,i,g,c,a,f)}Sh(t,L,H);return;case"option":for(var ge in s)if(L=s[ge],s.hasOwnProperty(ge)&&L!=null&&!a.hasOwnProperty(ge))switch(ge){case"selected":t.selected=!1;break;default:ze(t,i,ge,null,a,L)}for(E in a)if(L=a[E],H=s[E],a.hasOwnProperty(E)&&L!==H&&(L!=null||H!=null))switch(E){case"selected":t.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:ze(t,i,E,L,a,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var he in s)L=s[he],s.hasOwnProperty(he)&&L!=null&&!a.hasOwnProperty(he)&&ze(t,i,he,null,a,L);for(G in a)if(L=a[G],H=s[G],a.hasOwnProperty(G)&&L!==H&&(L!=null||H!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(137,i));break;default:ze(t,i,G,L,a,H)}return;default:if(bl(i)){for(var Ie in s)L=s[Ie],s.hasOwnProperty(Ie)&&L!==void 0&&!a.hasOwnProperty(Ie)&&sc(t,i,Ie,void 0,a,L);for(Y in a)L=a[Y],H=s[Y],!a.hasOwnProperty(Y)||L===H||L===void 0&&H===void 0||sc(t,i,Y,L,a,H);return}}for(var N in s)L=s[N],s.hasOwnProperty(N)&&L!=null&&!a.hasOwnProperty(N)&&ze(t,i,N,null,a,L);for(W in a)L=a[W],H=s[W],!a.hasOwnProperty(W)||L===H||L==null&&H==null||ze(t,i,W,L,a,H)}var rc=null,ac=null;function wo(t){return t.nodeType===9?t:t.ownerDocument}function Cp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Rp(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function oc(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var lc=null;function J_(){var t=window.event;return t&&t.type==="popstate"?t===lc?!1:(lc=t,!0):(lc=null,!1)}var Op=typeof setTimeout=="function"?setTimeout:void 0,$_=typeof clearTimeout=="function"?clearTimeout:void 0,Np=typeof Promise=="function"?Promise:void 0,ey=typeof queueMicrotask=="function"?queueMicrotask:typeof Np<"u"?function(t){return Np.resolve(null).then(t).catch(ty)}:Op;function ty(t){setTimeout(function(){throw t})}function Sn(t){return t==="head"}function Mp(t,i){var s=i,a=0,c=0;do{var f=s.nextSibling;if(t.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"){if(0<a&&8>a){s=a;var g=t.ownerDocument;if(s&1&&Yr(g.documentElement),s&2&&Yr(g.body),s&4)for(s=g.head,Yr(s),g=s.firstChild;g;){var _=g.nextSibling,E=g.nodeName;g[ar]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&g.rel.toLowerCase()==="stylesheet"||s.removeChild(g),g=_}}if(c===0){t.removeChild(f),$r(i);return}c--}else s==="$"||s==="$?"||s==="$!"?c++:a=s.charCodeAt(0)-48;else a=0;s=f}while(s);$r(i)}function uc(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var s=i;switch(i=i.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":uc(s),pl(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function iy(t,i,s,a){for(;t.nodeType===1;){var c=s;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!a&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(a){if(!t[ar])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==c.rel||t.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||t.getAttribute("title")!==(c.title==null?null:c.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(c.src==null?null:c.src)||t.getAttribute("type")!==(c.type==null?null:c.type)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=ui(t.nextSibling),t===null)break}return null}function ny(t,i,s){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=ui(t.nextSibling),t===null))return null;return t}function cc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function sy(t,i){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")i();else{var a=function(){i(),s.removeEventListener("DOMContentLoaded",a)};s.addEventListener("DOMContentLoaded",a),t._reactRetry=a}}function ui(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var hc=null;function zp(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return t;i--}else s==="/$"&&i++}t=t.previousSibling}return null}function Ip(t,i,s){switch(i=wo(s),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Yr(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);pl(t)}var Jt=new Map,Gp=new Set;function Eo(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Pi=X.d;X.d={f:ry,r:ay,D:oy,C:ly,L:uy,m:cy,X:dy,S:hy,M:fy};function ry(){var t=Pi.f(),i=po();return t||i}function ay(t){var i=cs(t);i!==null&&i.tag===5&&i.type==="form"?ef(i):Pi.r(t)}var Fs=typeof document>"u"?null:document;function Lp(t,i,s){var a=Fs;if(a&&typeof i=="string"&&i){var c=Yt(i);c='link[rel="'+t+'"][href="'+c+'"]',typeof s=="string"&&(c+='[crossorigin="'+s+'"]'),Gp.has(c)||(Gp.add(c),t={rel:t,crossOrigin:s,href:i},a.querySelector(c)===null&&(i=a.createElement("link"),pt(i,"link",t),lt(i),a.head.appendChild(i)))}}function oy(t){Pi.D(t),Lp("dns-prefetch",t,null)}function ly(t,i){Pi.C(t,i),Lp("preconnect",t,i)}function uy(t,i,s){Pi.L(t,i,s);var a=Fs;if(a&&t&&i){var c='link[rel="preload"][as="'+Yt(i)+'"]';i==="image"&&s&&s.imageSrcSet?(c+='[imagesrcset="'+Yt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(c+='[imagesizes="'+Yt(s.imageSizes)+'"]')):c+='[href="'+Yt(t)+'"]';var f=c;switch(i){case"style":f=Ys(t);break;case"script":f=Xs(t)}Jt.has(f)||(t=v({rel:"preload",href:i==="image"&&s&&s.imageSrcSet?void 0:t,as:i},s),Jt.set(f,t),a.querySelector(c)!==null||i==="style"&&a.querySelector(Xr(f))||i==="script"&&a.querySelector(qr(f))||(i=a.createElement("link"),pt(i,"link",t),lt(i),a.head.appendChild(i)))}}function cy(t,i){Pi.m(t,i);var s=Fs;if(s&&t){var a=i&&typeof i.as=="string"?i.as:"script",c='link[rel="modulepreload"][as="'+Yt(a)+'"][href="'+Yt(t)+'"]',f=c;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Xs(t)}if(!Jt.has(f)&&(t=v({rel:"modulepreload",href:t},i),Jt.set(f,t),s.querySelector(c)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(qr(f)))return}a=s.createElement("link"),pt(a,"link",t),lt(a),s.head.appendChild(a)}}}function hy(t,i,s){Pi.S(t,i,s);var a=Fs;if(a&&t){var c=hs(a).hoistableStyles,f=Ys(t);i=i||"default";var g=c.get(f);if(!g){var _={loading:0,preload:null};if(g=a.querySelector(Xr(f)))_.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":i},s),(s=Jt.get(f))&&dc(t,s);var E=g=a.createElement("link");lt(E),pt(E,"link",t),E._p=new Promise(function(G,Y){E.onload=G,E.onerror=Y}),E.addEventListener("load",function(){_.loading|=1}),E.addEventListener("error",function(){_.loading|=2}),_.loading|=4,To(g,i,a)}g={type:"stylesheet",instance:g,count:1,state:_},c.set(f,g)}}}function dy(t,i){Pi.X(t,i);var s=Fs;if(s&&t){var a=hs(s).hoistableScripts,c=Xs(t),f=a.get(c);f||(f=s.querySelector(qr(c)),f||(t=v({src:t,async:!0},i),(i=Jt.get(c))&&fc(t,i),f=s.createElement("script"),lt(f),pt(f,"link",t),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(c,f))}}function fy(t,i){Pi.M(t,i);var s=Fs;if(s&&t){var a=hs(s).hoistableScripts,c=Xs(t),f=a.get(c);f||(f=s.querySelector(qr(c)),f||(t=v({src:t,async:!0,type:"module"},i),(i=Jt.get(c))&&fc(t,i),f=s.createElement("script"),lt(f),pt(f,"link",t),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(c,f))}}function Up(t,i,s,a){var c=(c=de.current)?Eo(c):null;if(!c)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(i=Ys(s.href),s=hs(c).hoistableStyles,a=s.get(i),a||(a={type:"style",instance:null,count:0,state:null},s.set(i,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Ys(s.href);var f=hs(c).hoistableStyles,g=f.get(t);if(g||(c=c.ownerDocument||c,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,g),(f=c.querySelector(Xr(t)))&&!f._p&&(g.instance=f,g.state.loading=5),Jt.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Jt.set(t,s),f||py(c,t,s,g.state))),i&&a===null)throw Error(r(528,""));return g}if(i&&a!==null)throw Error(r(529,""));return null;case"script":return i=s.async,s=s.src,typeof s=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Xs(s),s=hs(c).hoistableScripts,a=s.get(i),a||(a={type:"script",instance:null,count:0,state:null},s.set(i,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Ys(t){return'href="'+Yt(t)+'"'}function Xr(t){return'link[rel="stylesheet"]['+t+"]"}function Vp(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function py(t,i,s,a){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?a.loading=1:(i=t.createElement("link"),a.preload=i,i.addEventListener("load",function(){return a.loading|=1}),i.addEventListener("error",function(){return a.loading|=2}),pt(i,"link",s),lt(i),t.head.appendChild(i))}function Xs(t){return'[src="'+Yt(t)+'"]'}function qr(t){return"script[async]"+t}function Bp(t,i,s){if(i.count++,i.instance===null)switch(i.type){case"style":var a=t.querySelector('style[data-href~="'+Yt(s.href)+'"]');if(a)return i.instance=a,lt(a),a;var c=v({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return a=(t.ownerDocument||t).createElement("style"),lt(a),pt(a,"style",c),To(a,s.precedence,t),i.instance=a;case"stylesheet":c=Ys(s.href);var f=t.querySelector(Xr(c));if(f)return i.state.loading|=4,i.instance=f,lt(f),f;a=Vp(s),(c=Jt.get(c))&&dc(a,c),f=(t.ownerDocument||t).createElement("link"),lt(f);var g=f;return g._p=new Promise(function(_,E){g.onload=_,g.onerror=E}),pt(f,"link",a),i.state.loading|=4,To(f,s.precedence,t),i.instance=f;case"script":return f=Xs(s.src),(c=t.querySelector(qr(f)))?(i.instance=c,lt(c),c):(a=s,(c=Jt.get(f))&&(a=v({},s),fc(a,c)),t=t.ownerDocument||t,c=t.createElement("script"),lt(c),pt(c,"link",a),t.head.appendChild(c),i.instance=c);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(a=i.instance,i.state.loading|=4,To(a,s.precedence,t));return i.instance}function To(t,i,s){for(var a=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=a.length?a[a.length-1]:null,f=c,g=0;g<a.length;g++){var _=a[g];if(_.dataset.precedence===i)f=_;else if(f!==c)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=s.nodeType===9?s.head:s,i.insertBefore(t,i.firstChild))}function dc(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function fc(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var So=null;function Hp(t,i,s){if(So===null){var a=new Map,c=So=new Map;c.set(s,a)}else c=So,a=c.get(s),a||(a=new Map,c.set(s,a));if(a.has(t))return a;for(a.set(t,null),s=s.getElementsByTagName(t),c=0;c<s.length;c++){var f=s[c];if(!(f[ar]||f[gt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var g=f.getAttribute(i)||"";g=t+g;var _=a.get(g);_?_.push(f):a.set(g,[f])}}return a}function Pp(t,i,s){t=t.ownerDocument||t,t.head.insertBefore(s,i==="title"?t.querySelector("head > title"):null)}function my(t,i,s){if(s===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function jp(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Wr=null;function gy(){}function vy(t,i,s){if(Wr===null)throw Error(r(475));var a=Wr;if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var c=Ys(s.href),f=t.querySelector(Xr(c));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(a.count++,a=Do.bind(a),t.then(a,a)),i.state.loading|=4,i.instance=f,lt(f);return}f=t.ownerDocument||t,s=Vp(s),(c=Jt.get(c))&&dc(s,c),f=f.createElement("link"),lt(f);var g=f;g._p=new Promise(function(_,E){g.onload=_,g.onerror=E}),pt(f,"link",s),i.instance=f}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(a.count++,i=Do.bind(a),t.addEventListener("load",i),t.addEventListener("error",i))}}function _y(){if(Wr===null)throw Error(r(475));var t=Wr;return t.stylesheets&&t.count===0&&pc(t,t.stylesheets),0<t.count?function(i){var s=setTimeout(function(){if(t.stylesheets&&pc(t,t.stylesheets),t.unsuspend){var a=t.unsuspend;t.unsuspend=null,a()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(s)}}:null}function Do(){if(this.count--,this.count===0){if(this.stylesheets)pc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ao=null;function pc(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ao=new Map,i.forEach(yy,t),Ao=null,Do.call(t))}function yy(t,i){if(!(i.state.loading&4)){var s=Ao.get(t);if(s)var a=s.get(null);else{s=new Map,Ao.set(t,s);for(var c=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var g=c[f];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(s.set(g.dataset.precedence,g),a=g)}a&&s.set(null,a)}c=i.instance,g=c.getAttribute("data-precedence"),f=s.get(g)||a,f===a&&s.set(null,c),s.set(g,c),this.count++,a=Do.bind(this),c.addEventListener("load",a),c.addEventListener("error",a),f?f.parentNode.insertBefore(c,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(c,t.firstChild)),i.state.loading|=4}}var Zr={$$typeof:O,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function by(t,i,s,a,c,f,g,_){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cl(0),this.hiddenUpdates=cl(null),this.identifierPrefix=a,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function kp(t,i,s,a,c,f,g,_,E,G,Y,W){return t=new by(t,i,s,g,_,E,G,W),i=1,f===!0&&(i|=24),f=Ut(3,null,null,i),t.current=f,f.stateNode=t,i=Zl(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:a,isDehydrated:s,cache:i},$l(f),t}function Fp(t){return t?(t=Es,t):Es}function Yp(t,i,s,a,c,f){c=Fp(c),a.context===null?a.context=c:a.pendingContext=c,a=dn(i),a.payload={element:s},f=f===void 0?null:f,f!==null&&(a.callback=f),s=fn(t,a,i),s!==null&&(jt(s,t,i),Sr(s,t,i))}function Xp(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<i?s:i}}function mc(t,i){Xp(t,i),(t=t.alternate)&&Xp(t,i)}function qp(t){if(t.tag===13){var i=ws(t,67108864);i!==null&&jt(i,t,67108864),mc(t,67108864)}}var Co=!0;function xy(t,i,s,a){var c=A.T;A.T=null;var f=X.p;try{X.p=2,gc(t,i,s,a)}finally{X.p=f,A.T=c}}function wy(t,i,s,a){var c=A.T;A.T=null;var f=X.p;try{X.p=8,gc(t,i,s,a)}finally{X.p=f,A.T=c}}function gc(t,i,s,a){if(Co){var c=vc(a);if(c===null)nc(t,i,a,Ro,s),Zp(t,a);else if(Ty(c,t,i,s,a))a.stopPropagation();else if(Zp(t,a),i&4&&-1<Ey.indexOf(t)){for(;c!==null;){var f=cs(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var g=Un(f.pendingLanes);if(g!==0){var _=f;for(_.pendingLanes|=2,_.entangledLanes|=2;g;){var E=1<<31-Gt(g);_.entanglements[1]|=E,g&=~E}bi(f),(Oe&6)===0&&(ho=mi()+500,jr(0))}}break;case 13:_=ws(f,2),_!==null&&jt(_,f,2),po(),mc(f,2)}if(f=vc(a),f===null&&nc(t,i,a,Ro,s),f===c)break;c=f}c!==null&&a.stopPropagation()}else nc(t,i,a,null,s)}}function vc(t){return t=wl(t),_c(t)}var Ro=null;function _c(t){if(Ro=null,t=us(t),t!==null){var i=l(t);if(i===null)t=null;else{var s=i.tag;if(s===13){if(t=h(i),t!==null)return t;t=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Ro=t,null}function Wp(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lv()){case oh:return 2;case lh:return 8;case ba:case uv:return 32;case uh:return 268435456;default:return 32}default:return 32}}var yc=!1,Dn=null,An=null,Cn=null,Kr=new Map,Qr=new Map,Rn=[],Ey="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zp(t,i){switch(t){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":Kr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qr.delete(i.pointerId)}}function Jr(t,i,s,a,c,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:s,eventSystemFlags:a,nativeEvent:f,targetContainers:[c]},i!==null&&(i=cs(i),i!==null&&qp(i)),t):(t.eventSystemFlags|=a,i=t.targetContainers,c!==null&&i.indexOf(c)===-1&&i.push(c),t)}function Ty(t,i,s,a,c){switch(i){case"focusin":return Dn=Jr(Dn,t,i,s,a,c),!0;case"dragenter":return An=Jr(An,t,i,s,a,c),!0;case"mouseover":return Cn=Jr(Cn,t,i,s,a,c),!0;case"pointerover":var f=c.pointerId;return Kr.set(f,Jr(Kr.get(f)||null,t,i,s,a,c)),!0;case"gotpointercapture":return f=c.pointerId,Qr.set(f,Jr(Qr.get(f)||null,t,i,s,a,c)),!0}return!1}function Kp(t){var i=us(t.target);if(i!==null){var s=l(i);if(s!==null){if(i=s.tag,i===13){if(i=h(s),i!==null){t.blockedOn=i,vv(t.priority,function(){if(s.tag===13){var a=Pt();a=hl(a);var c=ws(s,a);c!==null&&jt(c,s,a),mc(s,a)}});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oo(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var s=vc(t.nativeEvent);if(s===null){s=t.nativeEvent;var a=new s.constructor(s.type,s);xl=a,s.target.dispatchEvent(a),xl=null}else return i=cs(s),i!==null&&qp(i),t.blockedOn=s,!1;i.shift()}return!0}function Qp(t,i,s){Oo(t)&&s.delete(i)}function Sy(){yc=!1,Dn!==null&&Oo(Dn)&&(Dn=null),An!==null&&Oo(An)&&(An=null),Cn!==null&&Oo(Cn)&&(Cn=null),Kr.forEach(Qp),Qr.forEach(Qp)}function No(t,i){t.blockedOn===i&&(t.blockedOn=null,yc||(yc=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,Sy)))}var Mo=null;function Jp(t){Mo!==t&&(Mo=t,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){Mo===t&&(Mo=null);for(var i=0;i<t.length;i+=3){var s=t[i],a=t[i+1],c=t[i+2];if(typeof a!="function"){if(_c(a||s)===null)continue;break}var f=cs(s);f!==null&&(t.splice(i,3),i-=3,_u(f,{pending:!0,data:c,method:s.method,action:a},a,c))}}))}function $r(t){function i(E){return No(E,t)}Dn!==null&&No(Dn,t),An!==null&&No(An,t),Cn!==null&&No(Cn,t),Kr.forEach(i),Qr.forEach(i);for(var s=0;s<Rn.length;s++){var a=Rn[s];a.blockedOn===t&&(a.blockedOn=null)}for(;0<Rn.length&&(s=Rn[0],s.blockedOn===null);)Kp(s),s.blockedOn===null&&Rn.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(a=0;a<s.length;a+=3){var c=s[a],f=s[a+1],g=c[Ct]||null;if(typeof f=="function")g||Jp(s);else if(g){var _=null;if(f&&f.hasAttribute("formAction")){if(c=f,g=f[Ct]||null)_=g.formAction;else if(_c(c)!==null)continue}else _=g.action;typeof _=="function"?s[a+1]=_:(s.splice(a,3),a-=3),Jp(s)}}}function bc(t){this._internalRoot=t}zo.prototype.render=bc.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var s=i.current,a=Pt();Yp(s,a,t,i,null,null)},zo.prototype.unmount=bc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Yp(t.current,2,null,t,null,null),po(),i[ls]=null}};function zo(t){this._internalRoot=t}zo.prototype.unstable_scheduleHydration=function(t){if(t){var i=ph();t={blockedOn:null,target:t,priority:i};for(var s=0;s<Rn.length&&i!==0&&i<Rn[s].priority;s++);Rn.splice(s,0,t),s===0&&Kp(t)}};var $p=e.version;if($p!=="19.1.0")throw Error(r(527,$p,"19.1.0"));X.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=p(i),t=t!==null?m(t):null,t=t===null?null:t.stateNode,t};var Dy={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Io=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Io.isDisabled&&Io.supportsFiber)try{nr=Io.inject(Dy),It=Io}catch{}}return ta.createRoot=function(t,i){if(!o(t))throw Error(r(299));var s=!1,a="",c=mf,f=gf,g=vf,_=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(a=i.identifierPrefix),i.onUncaughtError!==void 0&&(c=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(g=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(_=i.unstable_transitionCallbacks)),i=kp(t,1,!1,null,null,s,a,c,f,g,_,null),t[ls]=i.current,ic(t),new bc(i)},ta.hydrateRoot=function(t,i,s){if(!o(t))throw Error(r(299));var a=!1,c="",f=mf,g=gf,_=vf,E=null,G=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(E=s.unstable_transitionCallbacks),s.formState!==void 0&&(G=s.formState)),i=kp(t,1,!0,i,s??null,a,c,f,g,_,E,G),i.context=Fp(null),s=i.current,a=Pt(),a=hl(a),c=dn(a),c.callback=null,fn(s,c,a),s=a,i.current.lanes=s,rr(i,s),bi(i),t[ls]=i.current,ic(t),new zo(i)},ta.version="19.1.0",ta}var um;function Gy(){if(um)return Ec.exports;um=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(e){console.error(e)}}return u(),Ec.exports=Iy(),Ec.exports}var Ly=Gy();const Uy=`struct output {\r
    @builtin(position) pos: vec4f,\r
    @location(0) colour: vec3f,\r
    @location(1) normal: vec3f\r
};\r
\r
@group(0) @binding(0) var<uniform> mvp: mat4x4f;\r
@group(0) @binding(1) var<uniform> normMat: mat3x3f;\r
\r
@vertex\r
fn vertexMain(@location(0) pos: vec3f, @location(1) colour: vec3f, @location(2) normal: vec3f) -> output {\r
    var out: output;\r
    out.pos = mvp * vec4f(pos, 1.0);\r
    out.normal = normalize(normMat * normal);\r
    out.colour = colour;\r
    \r
    return out;\r
}`,Vy=`@fragment\r
fn fragmentMain(@location(0) colour: vec3f, @location(1) normal: vec3f) -> @location(0) vec4<f32> {\r
\r
    let norm = normalize(normal);\r
    let lightDir = normalize(vec3f(1.0, 1.0, 1.0));\r
    let diffuse = max(dot(norm, lightDir), 0.0);\r
\r
    let finalColor = colour * diffuse;\r
\r
    return vec4f(finalColor, 1.0);\r
}`,By="modulepreload",Hy=function(u){return"/webgpu-vite/"+u},cm={},hm=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let m=function(v){return Promise.all(v.map(y=>Promise.resolve(y).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};var h=m;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=d?.nonce||d?.getAttribute("nonce");o=m(n.map(v=>{if(v=Hy(v),v in cm)return;cm[v]=!0;const y=v.endsWith(".css"),b=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${b}`))return;const x=document.createElement("link");if(x.rel=y?"stylesheet":By,y||(x.as="script"),x.crossOrigin="",x.href=v,p&&x.setAttribute("nonce",p),document.head.appendChild(x),y)return new Promise((D,R)=>{x.addEventListener("load",D),x.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return o.then(d=>{for(const p of d||[])p.status==="rejected"&&l(p.reason);return e().catch(l)})};class $m{constructor(){this._listeners={}}addEventListener(e,n){const r=this._listeners;return r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n),this}removeEventListener(e,n){const o=this._listeners[e];if(o!==void 0){const l=o.indexOf(n);l!==-1&&o.splice(l,1)}return this}dispatchEvent(e){const r=this._listeners[e.type];if(r!==void 0){const o=r.slice(0);for(let l=0,h=o.length;l<h;l++)o[l].call(this,e)}return this}dispose(){for(const e in this._listeners)delete this._listeners[e]}}class Zs{constructor(e,n,r,o={}){if(this._name=void 0,this._parent=void 0,this._child=void 0,this._attributes=void 0,this._disposed=!1,this._name=e,this._parent=n,this._child=r,this._attributes=o,!n.isOnGraph(r))throw new Error("Cannot connect disconnected graphs.")}getName(){return this._name}getParent(){return this._parent}getChild(){return this._child}setChild(e){return this._child=e,this}getAttributes(){return this._attributes}dispose(){this._disposed||(this._parent._destroyRef(this),this._disposed=!0)}isDisposed(){return this._disposed}}class Py extends $m{constructor(...e){super(...e),this._emptySet=new Set,this._edges=new Set,this._parentEdges=new Map,this._childEdges=new Map}listEdges(){return Array.from(this._edges)}listParentEdges(e){return Array.from(this._childEdges.get(e)||this._emptySet)}listParents(e){const n=new Set;for(const r of this.listParentEdges(e))n.add(r.getParent());return Array.from(n)}listChildEdges(e){return Array.from(this._parentEdges.get(e)||this._emptySet)}listChildren(e){const n=new Set;for(const r of this.listChildEdges(e))n.add(r.getChild());return Array.from(n)}disconnectParents(e,n){for(const r of this.listParentEdges(e))(!n||n(r.getParent()))&&r.dispose();return this}_createEdge(e,n,r,o){const l=new Zs(e,n,r,o);this._edges.add(l);const h=l.getParent();this._parentEdges.has(h)||this._parentEdges.set(h,new Set),this._parentEdges.get(h).add(l);const d=l.getChild();return this._childEdges.has(d)||this._childEdges.set(d,new Set),this._childEdges.get(d).add(l),l}_destroyEdge(e){return this._edges.delete(e),this._parentEdges.get(e.getParent()).delete(e),this._childEdges.get(e.getChild()).delete(e),this}}function la(){return la=Object.assign||function(u){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(u[r]=n[r])}return u},la.apply(this,arguments)}class zn{constructor(e){if(this.list=[],e)for(const n of e)this.list.push(n)}add(e){this.list.push(e)}remove(e){const n=this.list.indexOf(e);n>=0&&this.list.splice(n,1)}removeChild(e){const n=[];for(const r of this.list)r.getChild()===e&&n.push(r);for(const r of n)this.remove(r);return n}listRefsByChild(e){const n=[];for(const r of this.list)r.getChild()===e&&n.push(r);return n}values(){return this.list}}class He{constructor(e){if(this.set=new Set,this.map=new Map,e)for(const n of e)this.add(n)}add(e){const n=e.getChild();this.removeChild(n),this.set.add(e),this.map.set(n,e)}remove(e){this.set.delete(e),this.map.delete(e.getChild())}removeChild(e){const n=this.map.get(e)||null;return n&&this.remove(n),n}getRefByChild(e){return this.map.get(e)||null}values(){return Array.from(this.set)}}class di{constructor(e){this.map={},e&&Object.assign(this.map,e)}set(e,n){this.map[e]=n}delete(e){delete this.map[e]}get(e){return this.map[e]||null}keys(){return Object.keys(this.map)}values(){return Object.values(this.map)}}const Re=Symbol("attributes"),ts=Symbol("immutableKeys");class Kc extends $m{constructor(e){super(),this._disposed=!1,this.graph=void 0,this[Re]=void 0,this[ts]=void 0,this.graph=e,this[ts]=new Set,this[Re]=this._createAttributes()}getDefaults(){return{}}_createAttributes(){const e=this.getDefaults(),n={};for(const r in e){const o=e[r];if(o instanceof Kc){const l=this.graph._createEdge(r,this,o);this[ts].add(r),n[r]=l}else n[r]=o}return n}isOnGraph(e){return this.graph===e.graph}isDisposed(){return this._disposed}dispose(){this._disposed||(this.graph.listChildEdges(this).forEach(e=>e.dispose()),this.graph.disconnectParents(this),this._disposed=!0,this.dispatchEvent({type:"dispose"}))}detach(){return this.graph.disconnectParents(this),this}swap(e,n){for(const r in this[Re]){const o=this[Re][r];if(o instanceof Zs){const l=o;l.getChild()===e&&this.setRef(r,n,l.getAttributes())}else if(o instanceof zn)for(const l of o.listRefsByChild(e)){const h=l.getAttributes();this.removeRef(r,e),this.addRef(r,n,h)}else if(o instanceof He){const l=o.getRefByChild(e);if(l){const h=l.getAttributes();this.removeRef(r,e),this.addRef(r,n,h)}}else if(o instanceof di)for(const l of o.keys()){const h=o.get(l);h.getChild()===e&&this.setRefMap(r,l,n,h.getAttributes())}}return this}get(e){return this[Re][e]}set(e,n){return this[Re][e]=n,this.dispatchEvent({type:"change",attribute:e})}getRef(e){const n=this[Re][e];return n?n.getChild():null}setRef(e,n,r){if(this[ts].has(e))throw new Error(`Cannot overwrite immutable attribute, "${e}".`);const o=this[Re][e];if(o&&o.dispose(),!n)return this;const l=this.graph._createEdge(e,this,n,r);return this[Re][e]=l,this.dispatchEvent({type:"change",attribute:e})}listRefs(e){return this.assertRefList(e).values().map(r=>r.getChild())}addRef(e,n,r){const o=this.graph._createEdge(e,this,n,r);return this.assertRefList(e).add(o),this.dispatchEvent({type:"change",attribute:e})}removeRef(e,n){const r=this.assertRefList(e);if(r instanceof zn)for(const o of r.listRefsByChild(n))o.dispose();else{const o=r.getRefByChild(n);o&&o.dispose()}return this}assertRefList(e){const n=this[Re][e];if(n instanceof zn||n instanceof He)return n;throw new Error(`Expected RefList or RefSet for attribute "${e}"`)}listRefMapKeys(e){return this.assertRefMap(e).keys()}listRefMapValues(e){return this.assertRefMap(e).values().map(n=>n.getChild())}getRefMap(e,n){const o=this.assertRefMap(e).get(n);return o?o.getChild():null}setRefMap(e,n,r,o){const l=this.assertRefMap(e),h=l.get(n);if(h&&h.dispose(),!r)return this;o=Object.assign(o||{},{key:n});const d=this.graph._createEdge(e,this,r,la({},o,{key:n}));return l.set(n,d),this.dispatchEvent({type:"change",attribute:e,key:n})}assertRefMap(e){const n=this[Re][e];if(n instanceof di)return n;throw new Error(`Expected RefMap for attribute "${e}"`)}dispatchEvent(e){return super.dispatchEvent(la({},e,{target:this})),this.graph.dispatchEvent(la({},e,{target:this,type:`node:${e.type}`})),this}_destroyRef(e){const n=e.getName();if(this[Re][n]===e)this[Re][n]=null,this[ts].has(n)&&e.getChild().dispose();else if(this[Re][n]instanceof zn)this[Re][n].remove(e);else if(this[Re][n]instanceof He)this[Re][n].remove(e);else if(this[Re][n]instanceof di){const r=this[Re][n];for(const o of r.keys())r.get(o)===e&&r.delete(o)}else return;this.graph._destroyEdge(e),this.dispatchEvent({type:"change",attribute:n})}}const eg="v4.2.1",Js="@glb.bin";var k;(function(u){u.ACCESSOR="Accessor",u.ANIMATION="Animation",u.ANIMATION_CHANNEL="AnimationChannel",u.ANIMATION_SAMPLER="AnimationSampler",u.BUFFER="Buffer",u.CAMERA="Camera",u.MATERIAL="Material",u.MESH="Mesh",u.PRIMITIVE="Primitive",u.PRIMITIVE_TARGET="PrimitiveTarget",u.NODE="Node",u.ROOT="Root",u.SCENE="Scene",u.SKIN="Skin",u.TEXTURE="Texture",u.TEXTURE_INFO="TextureInfo"})(k||(k={}));var qo;(function(u){u.INTERLEAVED="interleaved",u.SEPARATE="separate"})(qo||(qo={}));var kt;(function(u){u.ARRAY_BUFFER="ARRAY_BUFFER",u.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",u.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",u.OTHER="OTHER",u.SPARSE="SPARSE"})(kt||(kt={}));var ai;(function(u){u[u.R=4096]="R",u[u.G=256]="G",u[u.B=16]="B",u[u.A=1]="A"})(ai||(ai={}));var sn;(function(u){u.GLTF="GLTF",u.GLB="GLB"})(sn||(sn={}));const il={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};class _e{static createBufferFromDataURI(e){if(typeof Buffer>"u"){const n=atob(e.split(",")[1]),r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}else{const n=e.split(",")[1],r=e.indexOf("base64")>=0;return Buffer.from(n,r?"base64":"utf8")}}static encodeText(e){return new TextEncoder().encode(e)}static decodeText(e){return new TextDecoder().decode(e)}static concat(e){let n=0;for(const l of e)n+=l.byteLength;const r=new Uint8Array(n);let o=0;for(const l of e)r.set(l,o),o+=l.byteLength;return r}static pad(e,n=0){const r=this.padNumber(e.byteLength);if(r===e.byteLength)return e;const o=new Uint8Array(r);if(o.set(e),n!==0)for(let l=e.byteLength;l<r;l++)o[l]=n;return o}static padNumber(e){return Math.ceil(e/4)*4}static equals(e,n){if(e===n)return!0;if(e.byteLength!==n.byteLength)return!1;let r=e.byteLength;for(;r--;)if(e[r]!==n[r])return!1;return!0}static toView(e,n=0,r=1/0){return new Uint8Array(e.buffer,e.byteOffset+n,Math.min(e.byteLength,r))}static assertView(e){if(e&&!ArrayBuffer.isView(e))throw new Error(`Method requires Uint8Array parameter; received "${typeof e}".`);return e}}class jy{match(e){return e.length>=3&&e[0]===255&&e[1]===216&&e[2]===255}getSize(e){let n=new DataView(e.buffer,e.byteOffset+4),r,o;for(;n.byteLength;){if(r=n.getUint16(0,!1),ky(n,r),o=n.getUint8(r+1),o===192||o===193||o===194)return[n.getUint16(r+7,!1),n.getUint16(r+5,!1)];n=new DataView(e.buffer,n.byteOffset+r+2)}throw new TypeError("Invalid JPG, no size found")}getChannels(e){return 3}}class nl{match(e){return e.length>=8&&e[0]===137&&e[1]===80&&e[2]===78&&e[3]===71&&e[4]===13&&e[5]===10&&e[6]===26&&e[7]===10}getSize(e){const n=new DataView(e.buffer,e.byteOffset);return _e.decodeText(e.slice(12,16))===nl.PNG_FRIED_CHUNK_NAME?[n.getUint32(32,!1),n.getUint32(36,!1)]:[n.getUint32(16,!1),n.getUint32(20,!1)]}getChannels(e){return 4}}nl.PNG_FRIED_CHUNK_NAME="CgBI";class Ti{static registerFormat(e,n){this.impls[e]=n}static getMimeType(e){for(const n in this.impls)if(this.impls[n].match(e))return n;return null}static getSize(e,n){return this.impls[n]?this.impls[n].getSize(e):null}static getChannels(e,n){return this.impls[n]?this.impls[n].getChannels(e):null}static getVRAMByteLength(e,n){if(!this.impls[n])return null;if(this.impls[n].getVRAMByteLength)return this.impls[n].getVRAMByteLength(e);let r=0;const o=4,l=this.getSize(e,n);if(!l)return null;for(;l[0]>1||l[1]>1;)r+=l[0]*l[1]*o,l[0]=Math.max(Math.floor(l[0]/2),1),l[1]=Math.max(Math.floor(l[1]/2),1);return r+=1*o,r}static mimeTypeToExtension(e){return e==="image/jpeg"?"jpg":e.split("/").pop()}static extensionToMimeType(e){return e==="jpg"?"image/jpeg":e?`image/${e}`:""}}Ti.impls={"image/jpeg":new jy,"image/png":new nl};function ky(u,e){if(e>u.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(u.getUint8(e)!==255)throw new TypeError("Invalid JPG, marker table corrupted");return u}class ss{static basename(e){const n=e.split(/[\\/]/).pop();return n.substring(0,n.lastIndexOf("."))}static extension(e){if(e.startsWith("data:image/")){const n=e.match(/data:(image\/\w+)/)[1];return Ti.mimeTypeToExtension(n)}else{if(e.startsWith("data:model/gltf+json"))return"gltf";if(e.startsWith("data:model/gltf-binary"))return"glb";if(e.startsWith("data:application/"))return"bin"}return e.split(/[\\/]/).pop().split(/[.]/).pop()}}var zc=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var u=0,e=arguments.length;e--;)u+=arguments[e]*arguments[e];return Math.sqrt(u)});function Fy(){var u=new zc(3);return zc!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u}function Ac(u){var e=u[0],n=u[1],r=u[2];return Math.hypot(e,n,r)}function Yy(u,e,n){var r=e[0],o=e[1],l=e[2],h=n[3]*r+n[7]*o+n[11]*l+n[15];return h=h||1,u[0]=(n[0]*r+n[4]*o+n[8]*l+n[12])/h,u[1]=(n[1]*r+n[5]*o+n[9]*l+n[13])/h,u[2]=(n[2]*r+n[6]*o+n[10]*l+n[14])/h,u}(function(){var u=Fy();return function(e,n,r,o,l,h){var d,p;for(n||(n=3),r||(r=0),o?p=Math.min(o*n+r,e.length):p=e.length,d=r;d<p;d+=n)u[0]=e[d],u[1]=e[d+1],u[2]=e[d+2],l(u,u,h),e[d]=u[0],e[d+1]=u[1],e[d+2]=u[2];return e}})();function Xy(u){const e=tg(),n=u.propertyType===k.NODE?[u]:u.listChildren();for(const r of n)r.traverse(o=>{const l=o.getMesh();if(!l)return;const h=qy(l,o.getWorldMatrix());h.min.every(isFinite)&&h.max.every(isFinite)&&(Ic(h.min,e),Ic(h.max,e))});return e}function qy(u,e){const n=tg();for(const r of u.listPrimitives()){const o=r.getAttribute("POSITION"),l=r.getIndices();if(!o)continue;let h=[0,0,0],d=[0,0,0];for(let p=0,m=l?l.getCount():o.getCount();p<m;p++){const v=l?l.getScalar(p):p;h=o.getElement(v,h),d=Yy(d,h,e),Ic(d,n)}}return n}function Ic(u,e){for(let n=0;n<3;n++)e.min[n]=Math.min(u[n],e.min[n]),e.max[n]=Math.max(u[n],e.max[n])}function tg(){return{min:[1/0,1/0,1/0],max:[-1/0,-1/0,-1/0]}}const dm="https://null.example";class hi{static dirname(e){const n=e.lastIndexOf("/");return n===-1?"./":e.substring(0,n+1)}static basename(e){return ss.basename(new URL(e,dm).pathname)}static extension(e){return ss.extension(new URL(e,dm).pathname)}static resolve(e,n){if(!this.isRelativePath(n))return n;const r=e.split("/"),o=n.split("/");r.pop();for(let l=0;l<o.length;l++)o[l]!=="."&&(o[l]===".."?r.pop():r.push(o[l]));return r.join("/")}static isAbsoluteURL(e){return this.PROTOCOL_REGEXP.test(e)}static isRelativePath(e){return!/^(?:[a-zA-Z]+:)?\//.test(e)}}hi.DEFAULT_INIT={};hi.PROTOCOL_REGEXP=/^[a-zA-Z]+:\/\//;function fm(u){return Object.prototype.toString.call(u)==="[object Object]"}function is(u){if(fm(u)===!1)return!1;const e=u.constructor;if(e===void 0)return!0;const n=e.prototype;return!(fm(n)===!1||Object.hasOwn(n,"isPrototypeOf")===!1)}var Gc,Lc;(function(u){u[u.SILENT=4]="SILENT",u[u.ERROR=3]="ERROR",u[u.WARN=2]="WARN",u[u.INFO=1]="INFO",u[u.DEBUG=0]="DEBUG"})(Lc||(Lc={}));class si{constructor(e){this.verbosity=void 0,this.verbosity=e}debug(e){this.verbosity<=si.Verbosity.DEBUG&&console.debug(e)}info(e){this.verbosity<=si.Verbosity.INFO&&console.info(e)}warn(e){this.verbosity<=si.Verbosity.WARN&&console.warn(e)}error(e){this.verbosity<=si.Verbosity.ERROR&&console.error(e)}}Gc=si;si.Verbosity=Lc;si.DEFAULT_INSTANCE=new Gc(Gc.Verbosity.INFO);function Wy(u){var e=u[0],n=u[1],r=u[2],o=u[3],l=u[4],h=u[5],d=u[6],p=u[7],m=u[8],v=u[9],y=u[10],b=u[11],x=u[12],D=u[13],R=u[14],B=u[15],w=e*h-n*l,F=e*d-r*l,O=e*p-o*l,z=n*d-r*h,M=n*p-o*h,V=r*p-o*d,T=m*D-v*x,U=m*R-y*x,K=m*B-b*x,Q=v*R-y*D,ee=v*B-b*D,$=y*B-b*R;return w*$-F*ee+O*Q+z*K-M*U+V*T}function Zy(u,e,n){var r=e[0],o=e[1],l=e[2],h=e[3],d=e[4],p=e[5],m=e[6],v=e[7],y=e[8],b=e[9],x=e[10],D=e[11],R=e[12],B=e[13],w=e[14],F=e[15],O=n[0],z=n[1],M=n[2],V=n[3];return u[0]=O*r+z*d+M*y+V*R,u[1]=O*o+z*p+M*b+V*B,u[2]=O*l+z*m+M*x+V*w,u[3]=O*h+z*v+M*D+V*F,O=n[4],z=n[5],M=n[6],V=n[7],u[4]=O*r+z*d+M*y+V*R,u[5]=O*o+z*p+M*b+V*B,u[6]=O*l+z*m+M*x+V*w,u[7]=O*h+z*v+M*D+V*F,O=n[8],z=n[9],M=n[10],V=n[11],u[8]=O*r+z*d+M*y+V*R,u[9]=O*o+z*p+M*b+V*B,u[10]=O*l+z*m+M*x+V*w,u[11]=O*h+z*v+M*D+V*F,O=n[12],z=n[13],M=n[14],V=n[15],u[12]=O*r+z*d+M*y+V*R,u[13]=O*o+z*p+M*b+V*B,u[14]=O*l+z*m+M*x+V*w,u[15]=O*h+z*v+M*D+V*F,u}function Ky(u,e){var n=e[0],r=e[1],o=e[2],l=e[4],h=e[5],d=e[6],p=e[8],m=e[9],v=e[10];return u[0]=Math.hypot(n,r,o),u[1]=Math.hypot(l,h,d),u[2]=Math.hypot(p,m,v),u}function Qy(u,e){var n=new zc(3);Ky(n,e);var r=1/n[0],o=1/n[1],l=1/n[2],h=e[0]*r,d=e[1]*o,p=e[2]*l,m=e[4]*r,v=e[5]*o,y=e[6]*l,b=e[8]*r,x=e[9]*o,D=e[10]*l,R=h+v+D,B=0;return R>0?(B=Math.sqrt(R+1)*2,u[3]=.25*B,u[0]=(y-x)/B,u[1]=(b-p)/B,u[2]=(d-m)/B):h>v&&h>D?(B=Math.sqrt(1+h-v-D)*2,u[3]=(y-x)/B,u[0]=.25*B,u[1]=(d+m)/B,u[2]=(b+p)/B):v>D?(B=Math.sqrt(1+v-h-D)*2,u[3]=(b-p)/B,u[0]=(d+m)/B,u[1]=.25*B,u[2]=(y+x)/B):(B=Math.sqrt(1+D-h-v)*2,u[3]=(d-m)/B,u[0]=(b+p)/B,u[1]=(y+x)/B,u[2]=.25*B),u}class Ge{static identity(e){return e}static eq(e,n,r=1e-5){if(e.length!==n.length)return!1;for(let o=0;o<e.length;o++)if(Math.abs(e[o]-n[o])>r)return!1;return!0}static clamp(e,n,r){return e<n?n:e>r?r:e}static decodeNormalizedInt(e,n){switch(n){case 5126:return e;case 5123:return e/65535;case 5121:return e/255;case 5122:return Math.max(e/32767,-1);case 5120:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}static encodeNormalizedInt(e,n){switch(n){case 5126:return e;case 5123:return Math.round(Ge.clamp(e,0,1)*65535);case 5121:return Math.round(Ge.clamp(e,0,1)*255);case 5122:return Math.round(Ge.clamp(e,-1,1)*32767);case 5120:return Math.round(Ge.clamp(e,-1,1)*127);default:throw new Error("Invalid component type.")}}static decompose(e,n,r,o){let l=Ac([e[0],e[1],e[2]]);const h=Ac([e[4],e[5],e[6]]),d=Ac([e[8],e[9],e[10]]);Wy(e)<0&&(l=-l),n[0]=e[12],n[1]=e[13],n[2]=e[14];const m=e.slice(),v=1/l,y=1/h,b=1/d;m[0]*=v,m[1]*=v,m[2]*=v,m[4]*=y,m[5]*=y,m[6]*=y,m[8]*=b,m[9]*=b,m[10]*=b,Qy(r,m),o[0]=l,o[1]=h,o[2]=d}static compose(e,n,r,o){const l=o,h=n[0],d=n[1],p=n[2],m=n[3],v=h+h,y=d+d,b=p+p,x=h*v,D=h*y,R=h*b,B=d*y,w=d*b,F=p*b,O=m*v,z=m*y,M=m*b,V=r[0],T=r[1],U=r[2];return l[0]=(1-(B+F))*V,l[1]=(D+M)*V,l[2]=(R-z)*V,l[3]=0,l[4]=(D-M)*T,l[5]=(1-(x+F))*T,l[6]=(w+O)*T,l[7]=0,l[8]=(R+z)*U,l[9]=(w-O)*U,l[10]=(1-(x+B))*U,l[11]=0,l[12]=e[0],l[13]=e[1],l[14]=e[2],l[15]=1,l}}function Jy(u,e){if(!!u!=!!e)return!1;const n=u.getChild(),r=e.getChild();return n===r||n.equals(r)}function $y(u,e){if(!!u!=!!e)return!1;const n=u.values(),r=e.values();if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++){const l=n[o],h=r[o];if(l.getChild()!==h.getChild()&&!l.getChild().equals(h.getChild()))return!1}return!0}function e0(u,e){if(!!u!=!!e)return!1;const n=u.keys(),r=e.keys();if(n.length!==r.length)return!1;for(const o of n){const l=u.get(o),h=e.get(o);if(!!l!=!!h)return!1;const d=l.getChild(),p=h.getChild();if(d!==p&&!d.equals(p))return!1}return!0}function ig(u,e){if(u===e)return!0;if(!!u!=!!e||!u||!e||u.length!==e.length)return!1;for(let n=0;n<u.length;n++)if(u[n]!==e[n])return!1;return!0}function ng(u,e){if(u===e)return!0;if(!!u!=!!e)return!1;if(!is(u)||!is(e))return u===e;const n=u,r=e;let o=0,l=0,h;for(h in n)o++;for(h in r)l++;if(o!==l)return!1;for(h in n){const d=n[h],p=r[h];if(Wo(d)&&Wo(p)){if(!ig(d,p))return!1}else if(is(d)&&is(p)){if(!ng(d,p))return!1}else if(d!==p)return!1}return!0}function Wo(u){return Array.isArray(u)||ArrayBuffer.isView(u)}const pm="23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ",t0=999,i0=6,mm=new Set,n0=function(){let e="";for(let n=0;n<i0;n++)e+=pm.charAt(Math.floor(Math.random()*pm.length));return e},s0=function(){for(let e=0;e<t0;e++){const n=n0();if(!mm.has(n))return mm.add(n),n}return""},Ln=u=>u,r0=new Set;class Qc extends Kc{constructor(e,n=""){super(e),this[Re].name=n,this.init(),this.dispatchEvent({type:"create"})}getGraph(){return this.graph}getDefaults(){return Object.assign(super.getDefaults(),{name:"",extras:{}})}set(e,n){return Array.isArray(n)&&(n=n.slice()),super.set(e,n)}getName(){return this.get("name")}setName(e){return this.set("name",e)}getExtras(){return this.get("extras")}setExtras(e){return this.set("extras",e)}clone(){const e=this.constructor;return new e(this.graph).copy(this,Ln)}copy(e,n=Ln){for(const r in this[Re]){const o=this[Re][r];if(o instanceof Zs)this[ts].has(r)||o.dispose();else if(o instanceof zn||o instanceof He)for(const l of o.values())l.dispose();else if(o instanceof di)for(const l of o.values())l.dispose()}for(const r in e[Re]){const o=this[Re][r],l=e[Re][r];if(l instanceof Zs)this[ts].has(r)?o.getChild().copy(n(l.getChild()),n):this.setRef(r,n(l.getChild()),l.getAttributes());else if(l instanceof He||l instanceof zn)for(const h of l.values())this.addRef(r,n(h.getChild()),h.getAttributes());else if(l instanceof di)for(const h of l.keys()){const d=l.get(h);this.setRefMap(r,h,n(d.getChild()),d.getAttributes())}else is(l)?this[Re][r]=JSON.parse(JSON.stringify(l)):Array.isArray(l)||l instanceof ArrayBuffer||ArrayBuffer.isView(l)?this[Re][r]=l.slice():this[Re][r]=l}return this}equals(e,n=r0){if(this===e)return!0;if(this.propertyType!==e.propertyType)return!1;for(const r in this[Re]){if(n.has(r))continue;const o=this[Re][r],l=e[Re][r];if(o instanceof Zs||l instanceof Zs){if(!Jy(o,l))return!1}else if(o instanceof He||l instanceof He||o instanceof zn||l instanceof zn){if(!$y(o,l))return!1}else if(o instanceof di||l instanceof di){if(!e0(o,l))return!1}else if(is(o)||is(l)){if(!ng(o,l))return!1}else if(Wo(o)||Wo(l)){if(!ig(o,l))return!1}else if(o!==l)return!1}return!0}detach(){return this.graph.disconnectParents(this,e=>e.propertyType!=="Root"),this}listParents(){return this.graph.listParents(this)}}class At extends Qc{getDefaults(){return Object.assign(super.getDefaults(),{extensions:new di})}getExtension(e){return this.getRefMap("extensions",e)}setExtension(e,n){return n&&n._validateParent(this),this.setRefMap("extensions",e,n)}listExtensions(){return this.listRefMapValues("extensions")}}class se extends At{init(){this.propertyType=k.ACCESSOR}getDefaults(){return Object.assign(super.getDefaults(),{array:null,type:se.Type.SCALAR,componentType:se.ComponentType.FLOAT,normalized:!1,sparse:!1,buffer:null})}static getElementSize(e){switch(e){case se.Type.SCALAR:return 1;case se.Type.VEC2:return 2;case se.Type.VEC3:return 3;case se.Type.VEC4:return 4;case se.Type.MAT2:return 4;case se.Type.MAT3:return 9;case se.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+e)}}static getComponentSize(e){switch(e){case se.ComponentType.BYTE:return 1;case se.ComponentType.UNSIGNED_BYTE:return 1;case se.ComponentType.SHORT:return 2;case se.ComponentType.UNSIGNED_SHORT:return 2;case se.ComponentType.UNSIGNED_INT:return 4;case se.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+e)}}getMinNormalized(e){const n=this.getNormalized(),r=this.getElementSize(),o=this.getComponentType();if(this.getMin(e),n)for(let l=0;l<r;l++)e[l]=Ge.decodeNormalizedInt(e[l],o);return e}getMin(e){const n=this.getArray(),r=this.getCount(),o=this.getElementSize();for(let l=0;l<o;l++)e[l]=1/0;for(let l=0;l<r*o;l+=o)for(let h=0;h<o;h++){const d=n[l+h];Number.isFinite(d)&&(e[h]=Math.min(e[h],d))}return e}getMaxNormalized(e){const n=this.getNormalized(),r=this.getElementSize(),o=this.getComponentType();if(this.getMax(e),n)for(let l=0;l<r;l++)e[l]=Ge.decodeNormalizedInt(e[l],o);return e}getMax(e){const n=this.get("array"),r=this.getCount(),o=this.getElementSize();for(let l=0;l<o;l++)e[l]=-1/0;for(let l=0;l<r*o;l+=o)for(let h=0;h<o;h++){const d=n[l+h];Number.isFinite(d)&&(e[h]=Math.max(e[h],d))}return e}getCount(){const e=this.get("array");return e?e.length/this.getElementSize():0}getType(){return this.get("type")}setType(e){return this.set("type",e)}getElementSize(){return se.getElementSize(this.get("type"))}getComponentSize(){return this.get("array").BYTES_PER_ELEMENT}getComponentType(){return this.get("componentType")}getNormalized(){return this.get("normalized")}setNormalized(e){return this.set("normalized",e)}getScalar(e){const n=this.getElementSize(),r=this.getComponentType(),o=this.getArray();return this.getNormalized()?Ge.decodeNormalizedInt(o[e*n],r):o[e*n]}setScalar(e,n){const r=this.getElementSize(),o=this.getComponentType(),l=this.getArray();return this.getNormalized()?l[e*r]=Ge.encodeNormalizedInt(n,o):l[e*r]=n,this}getElement(e,n){const r=this.getNormalized(),o=this.getElementSize(),l=this.getComponentType(),h=this.getArray();for(let d=0;d<o;d++)r?n[d]=Ge.decodeNormalizedInt(h[e*o+d],l):n[d]=h[e*o+d];return n}setElement(e,n){const r=this.getNormalized(),o=this.getElementSize(),l=this.getComponentType(),h=this.getArray();for(let d=0;d<o;d++)r?h[e*o+d]=Ge.encodeNormalizedInt(n[d],l):h[e*o+d]=n[d];return this}getSparse(){return this.get("sparse")}setSparse(e){return this.set("sparse",e)}getBuffer(){return this.getRef("buffer")}setBuffer(e){return this.setRef("buffer",e)}getArray(){return this.get("array")}setArray(e){return this.set("componentType",e?a0(e):se.ComponentType.FLOAT),this.set("array",e),this}getByteLength(){const e=this.get("array");return e?e.byteLength:0}}se.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"};se.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};function a0(u){switch(u.constructor){case Float32Array:return se.ComponentType.FLOAT;case Uint32Array:return se.ComponentType.UNSIGNED_INT;case Uint16Array:return se.ComponentType.UNSIGNED_SHORT;case Uint8Array:return se.ComponentType.UNSIGNED_BYTE;case Int16Array:return se.ComponentType.SHORT;case Int8Array:return se.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}class sg extends At{init(){this.propertyType=k.ANIMATION}getDefaults(){return Object.assign(super.getDefaults(),{channels:new He,samplers:new He})}addChannel(e){return this.addRef("channels",e)}removeChannel(e){return this.removeRef("channels",e)}listChannels(){return this.listRefs("channels")}addSampler(e){return this.addRef("samplers",e)}removeSampler(e){return this.removeRef("samplers",e)}listSamplers(){return this.listRefs("samplers")}}class Jc extends At{init(){this.propertyType=k.ANIMATION_CHANNEL}getDefaults(){return Object.assign(super.getDefaults(),{targetPath:null,targetNode:null,sampler:null})}getTargetPath(){return this.get("targetPath")}setTargetPath(e){return this.set("targetPath",e)}getTargetNode(){return this.getRef("targetNode")}setTargetNode(e){return this.setRef("targetNode",e)}getSampler(){return this.getRef("sampler")}setSampler(e){return this.setRef("sampler",e)}}Jc.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"};class er extends At{init(){this.propertyType=k.ANIMATION_SAMPLER}getDefaultAttributes(){return Object.assign(super.getDefaults(),{interpolation:er.Interpolation.LINEAR,input:null,output:null})}getInterpolation(){return this.get("interpolation")}setInterpolation(e){return this.set("interpolation",e)}getInput(){return this.getRef("input")}setInput(e){return this.setRef("input",e,{usage:kt.OTHER})}getOutput(){return this.getRef("output")}setOutput(e){return this.setRef("output",e,{usage:kt.OTHER})}}er.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"};class rg extends At{init(){this.propertyType=k.BUFFER}getDefaults(){return Object.assign(super.getDefaults(),{uri:""})}getURI(){return this.get("uri")}setURI(e){return this.set("uri",e)}}let _a=class ag extends At{init(){this.propertyType=k.CAMERA}getDefaults(){return Object.assign(super.getDefaults(),{type:ag.Type.PERSPECTIVE,znear:.1,zfar:100,aspectRatio:null,yfov:Math.PI*2*50/360,xmag:1,ymag:1})}getType(){return this.get("type")}setType(e){return this.set("type",e)}getZNear(){return this.get("znear")}setZNear(e){return this.set("znear",e)}getZFar(){return this.get("zfar")}setZFar(e){return this.set("zfar",e)}getAspectRatio(){return this.get("aspectRatio")}setAspectRatio(e){return this.set("aspectRatio",e)}getYFov(){return this.get("yfov")}setYFov(e){return this.set("yfov",e)}getXMag(){return this.get("xmag")}setXMag(e){return this.set("xmag",e)}getYMag(){return this.get("ymag")}setYMag(e){return this.set("ymag",e)}};_a.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};class Ke extends Qc{_validateParent(e){if(!this.parentTypes.includes(e.propertyType))throw new Error(`Parent "${e.propertyType}" invalid for child "${this.propertyType}".`)}}Ke.EXTENSION_NAME=void 0;class Ue extends At{init(){this.propertyType=k.TEXTURE_INFO}getDefaults(){return Object.assign(super.getDefaults(),{texCoord:0,magFilter:null,minFilter:null,wrapS:Ue.WrapMode.REPEAT,wrapT:Ue.WrapMode.REPEAT})}getTexCoord(){return this.get("texCoord")}setTexCoord(e){return this.set("texCoord",e)}getMagFilter(){return this.get("magFilter")}setMagFilter(e){return this.set("magFilter",e)}getMinFilter(){return this.get("minFilter")}setMinFilter(e){return this.set("minFilter",e)}getWrapS(){return this.get("wrapS")}setWrapS(e){return this.set("wrapS",e)}getWrapT(){return this.get("wrapT")}setWrapT(e){return this.set("wrapT",e)}}Ue.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497};Ue.MagFilter={NEAREST:9728,LINEAR:9729};Ue.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};const{R:Go,G:Lo,B:Uo,A:o0}=ai;class rs extends At{init(){this.propertyType=k.MATERIAL}getDefaults(){return Object.assign(super.getDefaults(),{alphaMode:rs.AlphaMode.OPAQUE,alphaCutoff:.5,doubleSided:!1,baseColorFactor:[1,1,1,1],baseColorTexture:null,baseColorTextureInfo:new Ue(this.graph,"baseColorTextureInfo"),emissiveFactor:[0,0,0],emissiveTexture:null,emissiveTextureInfo:new Ue(this.graph,"emissiveTextureInfo"),normalScale:1,normalTexture:null,normalTextureInfo:new Ue(this.graph,"normalTextureInfo"),occlusionStrength:1,occlusionTexture:null,occlusionTextureInfo:new Ue(this.graph,"occlusionTextureInfo"),roughnessFactor:1,metallicFactor:1,metallicRoughnessTexture:null,metallicRoughnessTextureInfo:new Ue(this.graph,"metallicRoughnessTextureInfo")})}getDoubleSided(){return this.get("doubleSided")}setDoubleSided(e){return this.set("doubleSided",e)}getAlpha(){return this.get("baseColorFactor")[3]}setAlpha(e){const n=this.get("baseColorFactor").slice();return n[3]=e,this.set("baseColorFactor",n)}getAlphaMode(){return this.get("alphaMode")}setAlphaMode(e){return this.set("alphaMode",e)}getAlphaCutoff(){return this.get("alphaCutoff")}setAlphaCutoff(e){return this.set("alphaCutoff",e)}getBaseColorFactor(){return this.get("baseColorFactor")}setBaseColorFactor(e){return this.set("baseColorFactor",e)}getBaseColorTexture(){return this.getRef("baseColorTexture")}getBaseColorTextureInfo(){return this.getRef("baseColorTexture")?this.getRef("baseColorTextureInfo"):null}setBaseColorTexture(e){return this.setRef("baseColorTexture",e,{channels:Go|Lo|Uo|o0,isColor:!0})}getEmissiveFactor(){return this.get("emissiveFactor")}setEmissiveFactor(e){return this.set("emissiveFactor",e)}getEmissiveTexture(){return this.getRef("emissiveTexture")}getEmissiveTextureInfo(){return this.getRef("emissiveTexture")?this.getRef("emissiveTextureInfo"):null}setEmissiveTexture(e){return this.setRef("emissiveTexture",e,{channels:Go|Lo|Uo,isColor:!0})}getNormalScale(){return this.get("normalScale")}setNormalScale(e){return this.set("normalScale",e)}getNormalTexture(){return this.getRef("normalTexture")}getNormalTextureInfo(){return this.getRef("normalTexture")?this.getRef("normalTextureInfo"):null}setNormalTexture(e){return this.setRef("normalTexture",e,{channels:Go|Lo|Uo})}getOcclusionStrength(){return this.get("occlusionStrength")}setOcclusionStrength(e){return this.set("occlusionStrength",e)}getOcclusionTexture(){return this.getRef("occlusionTexture")}getOcclusionTextureInfo(){return this.getRef("occlusionTexture")?this.getRef("occlusionTextureInfo"):null}setOcclusionTexture(e){return this.setRef("occlusionTexture",e,{channels:Go})}getRoughnessFactor(){return this.get("roughnessFactor")}setRoughnessFactor(e){return this.set("roughnessFactor",e)}getMetallicFactor(){return this.get("metallicFactor")}setMetallicFactor(e){return this.set("metallicFactor",e)}getMetallicRoughnessTexture(){return this.getRef("metallicRoughnessTexture")}getMetallicRoughnessTextureInfo(){return this.getRef("metallicRoughnessTexture")?this.getRef("metallicRoughnessTextureInfo"):null}setMetallicRoughnessTexture(e){return this.setRef("metallicRoughnessTexture",e,{channels:Lo|Uo})}}rs.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};let og=class extends At{init(){this.propertyType=k.MESH}getDefaults(){return Object.assign(super.getDefaults(),{weights:[],primitives:new He})}addPrimitive(e){return this.addRef("primitives",e)}removePrimitive(e){return this.removeRef("primitives",e)}listPrimitives(){return this.listRefs("primitives")}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}},lg=class extends At{init(){this.propertyType=k.NODE}getDefaults(){return Object.assign(super.getDefaults(),{translation:[0,0,0],rotation:[0,0,0,1],scale:[1,1,1],weights:[],camera:null,mesh:null,skin:null,children:new He})}copy(e,n=Ln){if(n===Ln)throw new Error("Node cannot be copied.");return super.copy(e,n)}getTranslation(){return this.get("translation")}getRotation(){return this.get("rotation")}getScale(){return this.get("scale")}setTranslation(e){return this.set("translation",e)}setRotation(e){return this.set("rotation",e)}setScale(e){return this.set("scale",e)}getMatrix(){return Ge.compose(this.get("translation"),this.get("rotation"),this.get("scale"),[])}setMatrix(e){const n=this.get("translation").slice(),r=this.get("rotation").slice(),o=this.get("scale").slice();return Ge.decompose(e,n,r,o),this.set("translation",n).set("rotation",r).set("scale",o)}getWorldTranslation(){const e=[0,0,0];return Ge.decompose(this.getWorldMatrix(),e,[0,0,0,1],[1,1,1]),e}getWorldRotation(){const e=[0,0,0,1];return Ge.decompose(this.getWorldMatrix(),[0,0,0],e,[1,1,1]),e}getWorldScale(){const e=[1,1,1];return Ge.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],e),e}getWorldMatrix(){const e=[];for(let o=this;o!=null;o=o.getParentNode())e.push(o);let n;const r=e.pop().getMatrix();for(;n=e.pop();)Zy(r,r,n.getMatrix());return r}addChild(e){const n=e.getParentNode();n&&n.removeChild(e);for(const r of e.listParents())r.propertyType===k.SCENE&&r.removeChild(e);return this.addRef("children",e)}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}getParentNode(){for(const e of this.listParents())if(e.propertyType===k.NODE)return e;return null}getMesh(){return this.getRef("mesh")}setMesh(e){return this.setRef("mesh",e)}getCamera(){return this.getRef("camera")}setCamera(e){return this.setRef("camera",e)}getSkin(){return this.getRef("skin")}setSkin(e){return this.setRef("skin",e)}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}traverse(e){e(this);for(const n of this.listChildren())n.traverse(e);return this}};class as extends At{init(){this.propertyType=k.PRIMITIVE}getDefaults(){return Object.assign(super.getDefaults(),{mode:as.Mode.TRIANGLES,material:null,indices:null,attributes:new di,targets:new He})}getIndices(){return this.getRef("indices")}setIndices(e){return this.setRef("indices",e,{usage:kt.ELEMENT_ARRAY_BUFFER})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,n){return this.setRefMap("attributes",e,n,{usage:kt.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}getMaterial(){return this.getRef("material")}setMaterial(e){return this.setRef("material",e)}getMode(){return this.get("mode")}setMode(e){return this.set("mode",e)}listTargets(){return this.listRefs("targets")}addTarget(e){return this.addRef("targets",e)}removeTarget(e){return this.removeRef("targets",e)}}as.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class l0 extends Qc{init(){this.propertyType=k.PRIMITIVE_TARGET}getDefaults(){return Object.assign(super.getDefaults(),{attributes:new di})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,n){return this.setRefMap("attributes",e,n,{usage:kt.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}}function Dt(){return Dt=Object.assign?Object.assign.bind():function(u){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(u[r]=n[r])}return u},Dt.apply(null,arguments)}class ug extends At{init(){this.propertyType=k.SCENE}getDefaults(){return Object.assign(super.getDefaults(),{children:new He})}copy(e,n=Ln){if(n===Ln)throw new Error("Scene cannot be copied.");return super.copy(e,n)}addChild(e){const n=e.getParentNode();return n&&n.removeChild(e),this.addRef("children",e)}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}traverse(e){for(const n of this.listChildren())n.traverse(e);return this}}class cg extends At{init(){this.propertyType=k.SKIN}getDefaults(){return Object.assign(super.getDefaults(),{skeleton:null,inverseBindMatrices:null,joints:new He})}getSkeleton(){return this.getRef("skeleton")}setSkeleton(e){return this.setRef("skeleton",e)}getInverseBindMatrices(){return this.getRef("inverseBindMatrices")}setInverseBindMatrices(e){return this.setRef("inverseBindMatrices",e,{usage:kt.INVERSE_BIND_MATRICES})}addJoint(e){return this.addRef("joints",e)}removeJoint(e){return this.removeRef("joints",e)}listJoints(){return this.listRefs("joints")}}class hg extends At{init(){this.propertyType=k.TEXTURE}getDefaults(){return Object.assign(super.getDefaults(),{image:null,mimeType:"",uri:""})}getMimeType(){return this.get("mimeType")||Ti.extensionToMimeType(ss.extension(this.get("uri")))}setMimeType(e){return this.set("mimeType",e)}getURI(){return this.get("uri")}setURI(e){this.set("uri",e);const n=Ti.extensionToMimeType(ss.extension(e));return n&&this.set("mimeType",n),this}getImage(){return this.get("image")}setImage(e){return this.set("image",_e.assertView(e))}getSize(){const e=this.get("image");return e?Ti.getSize(e,this.getMimeType()):null}}class dg extends At{init(){this.propertyType=k.ROOT}getDefaults(){return Object.assign(super.getDefaults(),{asset:{generator:`glTF-Transform ${eg}`,version:"2.0"},defaultScene:null,accessors:new He,animations:new He,buffers:new He,cameras:new He,materials:new He,meshes:new He,nodes:new He,scenes:new He,skins:new He,textures:new He})}constructor(e){super(e),this._extensions=new Set,e.addEventListener("node:create",n=>{this._addChildOfRoot(n.target)})}clone(){throw new Error("Root cannot be cloned.")}copy(e,n=Ln){if(n===Ln)throw new Error("Root cannot be copied.");this.set("asset",Dt({},e.get("asset"))),this.setName(e.getName()),this.setExtras(Dt({},e.getExtras())),this.setDefaultScene(e.getDefaultScene()?n(e.getDefaultScene()):null);for(const r of e.listRefMapKeys("extensions")){const o=e.getExtension(r);this.setExtension(r,n(o))}return this}_addChildOfRoot(e){return e instanceof ug?this.addRef("scenes",e):e instanceof lg?this.addRef("nodes",e):e instanceof _a?this.addRef("cameras",e):e instanceof cg?this.addRef("skins",e):e instanceof og?this.addRef("meshes",e):e instanceof rs?this.addRef("materials",e):e instanceof hg?this.addRef("textures",e):e instanceof sg?this.addRef("animations",e):e instanceof se?this.addRef("accessors",e):e instanceof rg&&this.addRef("buffers",e),this}getAsset(){return this.get("asset")}listExtensionsUsed(){return Array.from(this._extensions)}listExtensionsRequired(){return this.listExtensionsUsed().filter(e=>e.isRequired())}_enableExtension(e){return this._extensions.add(e),this}_disableExtension(e){return this._extensions.delete(e),this}listScenes(){return this.listRefs("scenes")}setDefaultScene(e){return this.setRef("defaultScene",e)}getDefaultScene(){return this.getRef("defaultScene")}listNodes(){return this.listRefs("nodes")}listCameras(){return this.listRefs("cameras")}listSkins(){return this.listRefs("skins")}listMeshes(){return this.listRefs("meshes")}listMaterials(){return this.listRefs("materials")}listTextures(){return this.listRefs("textures")}listAnimations(){return this.listRefs("animations")}listAccessors(){return this.listRefs("accessors")}listBuffers(){return this.listRefs("buffers")}}class ha{static fromGraph(e){return ha._GRAPH_DOCUMENTS.get(e)||null}constructor(){this._graph=new Py,this._root=new dg(this._graph),this._logger=si.DEFAULT_INSTANCE,ha._GRAPH_DOCUMENTS.set(this._graph,this)}getRoot(){return this._root}getGraph(){return this._graph}getLogger(){return this._logger}setLogger(e){return this._logger=e,this}clone(){throw new Error("Use 'cloneDocument(source)' from '@gltf-transform/functions'.")}merge(e){throw new Error("Use 'mergeDocuments(target, source)' from '@gltf-transform/functions'.")}async transform(...e){const n=e.map(r=>r.name);for(const r of e)await r(this,{stack:n});return this}createExtension(e){const n=e.EXTENSION_NAME;return this.getRoot().listExtensionsUsed().find(o=>o.extensionName===n)||new e(this)}createScene(e=""){return new ug(this._graph,e)}createNode(e=""){return new lg(this._graph,e)}createCamera(e=""){return new _a(this._graph,e)}createSkin(e=""){return new cg(this._graph,e)}createMesh(e=""){return new og(this._graph,e)}createPrimitive(){return new as(this._graph)}createPrimitiveTarget(e=""){return new l0(this._graph,e)}createMaterial(e=""){return new rs(this._graph,e)}createTexture(e=""){return new hg(this._graph,e)}createAnimation(e=""){return new sg(this._graph,e)}createAnimationChannel(e=""){return new Jc(this._graph,e)}createAnimationSampler(e=""){return new er(this._graph,e)}createAccessor(e="",n=null){return n||(n=this.getRoot().listBuffers()[0]),new se(this._graph,e).setBuffer(n)}createBuffer(e=""){return new rg(this._graph,e)}}ha._GRAPH_DOCUMENTS=new WeakMap;class je{constructor(e){this.extensionName="",this.prereadTypes=[],this.prewriteTypes=[],this.readDependencies=[],this.writeDependencies=[],this.document=void 0,this.required=!1,this.properties=new Set,this._listener=void 0,this.document=e,e.getRoot()._enableExtension(this),this._listener=r=>{const o=r,l=o.target;l instanceof Ke&&l.extensionName===this.extensionName&&(o.type==="node:create"&&this._addExtensionProperty(l),o.type==="node:dispose"&&this._removeExtensionProperty(l))};const n=e.getGraph();n.addEventListener("node:create",this._listener),n.addEventListener("node:dispose",this._listener)}dispose(){this.document.getRoot()._disableExtension(this);const e=this.document.getGraph();e.removeEventListener("node:create",this._listener),e.removeEventListener("node:dispose",this._listener);for(const n of this.properties)n.dispose()}static register(){}isRequired(){return this.required}setRequired(e){return this.required=e,this}listProperties(){return Array.from(this.properties)}_addExtensionProperty(e){return this.properties.add(e),this}_removeExtensionProperty(e){return this.properties.delete(e),this}install(e,n){return this}preread(e,n){return this}prewrite(e,n){return this}}je.EXTENSION_NAME=void 0;class u0{constructor(e){this.jsonDoc=void 0,this.buffers=[],this.bufferViews=[],this.bufferViewBuffers=[],this.accessors=[],this.textures=[],this.textureInfos=new Map,this.materials=[],this.meshes=[],this.cameras=[],this.nodes=[],this.skins=[],this.animations=[],this.scenes=[],this.jsonDoc=e}setTextureInfo(e,n){this.textureInfos.set(e,n),n.texCoord!==void 0&&e.setTexCoord(n.texCoord),n.extras!==void 0&&e.setExtras(n.extras);const r=this.jsonDoc.json.textures[n.index];if(r.sampler===void 0)return;const o=this.jsonDoc.json.samplers[r.sampler];o.magFilter!==void 0&&e.setMagFilter(o.magFilter),o.minFilter!==void 0&&e.setMinFilter(o.minFilter),o.wrapS!==void 0&&e.setWrapS(o.wrapS),o.wrapT!==void 0&&e.setWrapT(o.wrapT)}}const gm={logger:si.DEFAULT_INSTANCE,extensions:[],dependencies:{}},c0=new Set([k.BUFFER,k.TEXTURE,k.MATERIAL,k.MESH,k.PRIMITIVE,k.NODE,k.SCENE]);class h0{static read(e,n=gm){const r=Dt({},gm,n),{json:o}=e,l=new ha().setLogger(r.logger);this.validate(e,r);const h=new u0(e),d=o.asset,p=l.getRoot().getAsset();d.copyright&&(p.copyright=d.copyright),d.extras&&(p.extras=d.extras),o.extras!==void 0&&l.getRoot().setExtras(Dt({},o.extras));const m=o.extensionsUsed||[],v=o.extensionsRequired||[];r.extensions.sort((T,U)=>T.EXTENSION_NAME>U.EXTENSION_NAME?1:-1);for(const T of r.extensions)if(m.includes(T.EXTENSION_NAME)){const U=l.createExtension(T).setRequired(v.includes(T.EXTENSION_NAME)),K=U.prereadTypes.filter(Q=>!c0.has(Q));K.length&&r.logger.warn(`Preread hooks for some types (${K.join()}), requested by extension ${U.extensionName}, are unsupported. Please file an issue or a PR.`);for(const Q of U.readDependencies)U.install(Q,r.dependencies[Q])}const y=o.buffers||[];l.getRoot().listExtensionsUsed().filter(T=>T.prereadTypes.includes(k.BUFFER)).forEach(T=>T.preread(h,k.BUFFER)),h.buffers=y.map(T=>{const U=l.createBuffer(T.name);return T.extras&&U.setExtras(T.extras),T.uri&&T.uri.indexOf("__")!==0&&U.setURI(T.uri),U});const b=o.bufferViews||[];h.bufferViewBuffers=b.map((T,U)=>{if(!h.bufferViews[U]){const K=e.json.buffers[T.buffer],Q=K.uri?e.resources[K.uri]:e.resources[Js],ee=T.byteOffset||0;h.bufferViews[U]=_e.toView(Q,ee,T.byteLength)}return h.buffers[T.buffer]});const x=o.accessors||[];h.accessors=x.map(T=>{const U=h.bufferViewBuffers[T.bufferView],K=l.createAccessor(T.name,U).setType(T.type);return T.extras&&K.setExtras(T.extras),T.normalized!==void 0&&K.setNormalized(T.normalized),T.bufferView===void 0||K.setArray(Yo(T,h)),K});const D=o.images||[],R=o.textures||[];l.getRoot().listExtensionsUsed().filter(T=>T.prereadTypes.includes(k.TEXTURE)).forEach(T=>T.preread(h,k.TEXTURE)),h.textures=D.map(T=>{const U=l.createTexture(T.name);if(T.extras&&U.setExtras(T.extras),T.bufferView!==void 0){const K=o.bufferViews[T.bufferView],Q=e.json.buffers[K.buffer],ee=Q.uri?e.resources[Q.uri]:e.resources[Js],$=K.byteOffset||0,J=K.byteLength,ae=ee.slice($,$+J);U.setImage(ae)}else T.uri!==void 0&&(U.setImage(e.resources[T.uri]),T.uri.indexOf("__")!==0&&U.setURI(T.uri));if(T.mimeType!==void 0)U.setMimeType(T.mimeType);else if(T.uri){const K=ss.extension(T.uri);U.setMimeType(Ti.extensionToMimeType(K))}return U}),l.getRoot().listExtensionsUsed().filter(T=>T.prereadTypes.includes(k.MATERIAL)).forEach(T=>T.preread(h,k.MATERIAL));const B=o.materials||[];h.materials=B.map(T=>{const U=l.createMaterial(T.name);T.extras&&U.setExtras(T.extras),T.alphaMode!==void 0&&U.setAlphaMode(T.alphaMode),T.alphaCutoff!==void 0&&U.setAlphaCutoff(T.alphaCutoff),T.doubleSided!==void 0&&U.setDoubleSided(T.doubleSided);const K=T.pbrMetallicRoughness||{};if(K.baseColorFactor!==void 0&&U.setBaseColorFactor(K.baseColorFactor),T.emissiveFactor!==void 0&&U.setEmissiveFactor(T.emissiveFactor),K.metallicFactor!==void 0&&U.setMetallicFactor(K.metallicFactor),K.roughnessFactor!==void 0&&U.setRoughnessFactor(K.roughnessFactor),K.baseColorTexture!==void 0){const Q=K.baseColorTexture,ee=h.textures[R[Q.index].source];U.setBaseColorTexture(ee),h.setTextureInfo(U.getBaseColorTextureInfo(),Q)}if(T.emissiveTexture!==void 0){const Q=T.emissiveTexture,ee=h.textures[R[Q.index].source];U.setEmissiveTexture(ee),h.setTextureInfo(U.getEmissiveTextureInfo(),Q)}if(T.normalTexture!==void 0){const Q=T.normalTexture,ee=h.textures[R[Q.index].source];U.setNormalTexture(ee),h.setTextureInfo(U.getNormalTextureInfo(),Q),T.normalTexture.scale!==void 0&&U.setNormalScale(T.normalTexture.scale)}if(T.occlusionTexture!==void 0){const Q=T.occlusionTexture,ee=h.textures[R[Q.index].source];U.setOcclusionTexture(ee),h.setTextureInfo(U.getOcclusionTextureInfo(),Q),T.occlusionTexture.strength!==void 0&&U.setOcclusionStrength(T.occlusionTexture.strength)}if(K.metallicRoughnessTexture!==void 0){const Q=K.metallicRoughnessTexture,ee=h.textures[R[Q.index].source];U.setMetallicRoughnessTexture(ee),h.setTextureInfo(U.getMetallicRoughnessTextureInfo(),Q)}return U}),l.getRoot().listExtensionsUsed().filter(T=>T.prereadTypes.includes(k.MESH)).forEach(T=>T.preread(h,k.MESH));const w=o.meshes||[];l.getRoot().listExtensionsUsed().filter(T=>T.prereadTypes.includes(k.PRIMITIVE)).forEach(T=>T.preread(h,k.PRIMITIVE)),h.meshes=w.map(T=>{const U=l.createMesh(T.name);return T.extras&&U.setExtras(T.extras),T.weights!==void 0&&U.setWeights(T.weights),(T.primitives||[]).forEach(Q=>{const ee=l.createPrimitive();Q.extras&&ee.setExtras(Q.extras),Q.material!==void 0&&ee.setMaterial(h.materials[Q.material]),Q.mode!==void 0&&ee.setMode(Q.mode);for(const[ae,P]of Object.entries(Q.attributes||{}))ee.setAttribute(ae,h.accessors[P]);Q.indices!==void 0&&ee.setIndices(h.accessors[Q.indices]);const $=T.extras&&T.extras.targetNames||[];(Q.targets||[]).forEach((ae,P)=>{const A=$[P]||P.toString(),X=l.createPrimitiveTarget(A);for(const[ne,ve]of Object.entries(ae))X.setAttribute(ne,h.accessors[ve]);ee.addTarget(X)}),U.addPrimitive(ee)}),U});const F=o.cameras||[];h.cameras=F.map(T=>{const U=l.createCamera(T.name).setType(T.type);if(T.extras&&U.setExtras(T.extras),T.type===_a.Type.PERSPECTIVE){const K=T.perspective;U.setYFov(K.yfov),U.setZNear(K.znear),K.zfar!==void 0&&U.setZFar(K.zfar),K.aspectRatio!==void 0&&U.setAspectRatio(K.aspectRatio)}else{const K=T.orthographic;U.setZNear(K.znear).setZFar(K.zfar).setXMag(K.xmag).setYMag(K.ymag)}return U});const O=o.nodes||[];l.getRoot().listExtensionsUsed().filter(T=>T.prereadTypes.includes(k.NODE)).forEach(T=>T.preread(h,k.NODE)),h.nodes=O.map(T=>{const U=l.createNode(T.name);if(T.extras&&U.setExtras(T.extras),T.translation!==void 0&&U.setTranslation(T.translation),T.rotation!==void 0&&U.setRotation(T.rotation),T.scale!==void 0&&U.setScale(T.scale),T.matrix!==void 0){const K=[0,0,0],Q=[0,0,0,1],ee=[1,1,1];Ge.decompose(T.matrix,K,Q,ee),U.setTranslation(K),U.setRotation(Q),U.setScale(ee)}return T.weights!==void 0&&U.setWeights(T.weights),U});const z=o.skins||[];h.skins=z.map(T=>{const U=l.createSkin(T.name);T.extras&&U.setExtras(T.extras),T.inverseBindMatrices!==void 0&&U.setInverseBindMatrices(h.accessors[T.inverseBindMatrices]),T.skeleton!==void 0&&U.setSkeleton(h.nodes[T.skeleton]);for(const K of T.joints)U.addJoint(h.nodes[K]);return U}),O.map((T,U)=>{const K=h.nodes[U];(T.children||[]).forEach(ee=>K.addChild(h.nodes[ee])),T.mesh!==void 0&&K.setMesh(h.meshes[T.mesh]),T.camera!==void 0&&K.setCamera(h.cameras[T.camera]),T.skin!==void 0&&K.setSkin(h.skins[T.skin])});const M=o.animations||[];h.animations=M.map(T=>{const U=l.createAnimation(T.name);T.extras&&U.setExtras(T.extras);const Q=(T.samplers||[]).map($=>{const J=l.createAnimationSampler().setInput(h.accessors[$.input]).setOutput(h.accessors[$.output]).setInterpolation($.interpolation||er.Interpolation.LINEAR);return $.extras&&J.setExtras($.extras),U.addSampler(J),J});return(T.channels||[]).forEach($=>{const J=l.createAnimationChannel().setSampler(Q[$.sampler]).setTargetPath($.target.path);$.target.node!==void 0&&J.setTargetNode(h.nodes[$.target.node]),$.extras&&J.setExtras($.extras),U.addChannel(J)}),U});const V=o.scenes||[];return l.getRoot().listExtensionsUsed().filter(T=>T.prereadTypes.includes(k.SCENE)).forEach(T=>T.preread(h,k.SCENE)),h.scenes=V.map(T=>{const U=l.createScene(T.name);return T.extras&&U.setExtras(T.extras),(T.nodes||[]).map(Q=>h.nodes[Q]).forEach(Q=>U.addChild(Q)),U}),o.scene!==void 0&&l.getRoot().setDefaultScene(h.scenes[o.scene]),l.getRoot().listExtensionsUsed().forEach(T=>T.read(h)),x.forEach((T,U)=>{const K=h.accessors[U],Q=!!T.sparse,ee=!T.bufferView&&!K.getArray();(Q||ee)&&K.setSparse(!0).setArray(f0(T,h))}),l}static validate(e,n){const r=e.json;if(r.asset.version!=="2.0")throw new Error(`Unsupported glTF version, "${r.asset.version}".`);if(r.extensionsRequired){for(const o of r.extensionsRequired)if(!n.extensions.find(l=>l.EXTENSION_NAME===o))throw new Error(`Missing required extension, "${o}".`)}if(r.extensionsUsed)for(const o of r.extensionsUsed)n.extensions.find(l=>l.EXTENSION_NAME===o)||n.logger.warn(`Missing optional extension, "${o}".`)}}function d0(u,e){const n=e.jsonDoc,r=e.bufferViews[u.bufferView],o=n.json.bufferViews[u.bufferView],l=il[u.componentType],h=se.getElementSize(u.type),d=l.BYTES_PER_ELEMENT,p=u.byteOffset||0,m=new l(u.count*h),v=new DataView(r.buffer,r.byteOffset,r.byteLength),y=o.byteStride;for(let b=0;b<u.count;b++)for(let x=0;x<h;x++){const D=p+b*y+x*d;let R;switch(u.componentType){case se.ComponentType.FLOAT:R=v.getFloat32(D,!0);break;case se.ComponentType.UNSIGNED_INT:R=v.getUint32(D,!0);break;case se.ComponentType.UNSIGNED_SHORT:R=v.getUint16(D,!0);break;case se.ComponentType.UNSIGNED_BYTE:R=v.getUint8(D);break;case se.ComponentType.SHORT:R=v.getInt16(D,!0);break;case se.ComponentType.BYTE:R=v.getInt8(D);break;default:throw new Error(`Unexpected componentType "${u.componentType}".`)}m[b*h+x]=R}return m}function Yo(u,e){const n=e.jsonDoc,r=e.bufferViews[u.bufferView],o=n.json.bufferViews[u.bufferView],l=il[u.componentType],h=se.getElementSize(u.type),d=l.BYTES_PER_ELEMENT,p=h*d;if(o.byteStride!==void 0&&o.byteStride!==p)return d0(u,e);const m=r.byteOffset+(u.byteOffset||0),v=u.count*h*d;return new l(r.buffer.slice(m,m+v))}function f0(u,e){const n=il[u.componentType],r=se.getElementSize(u.type);let o;u.bufferView!==void 0?o=Yo(u,e):o=new n(u.count*r);const l=u.sparse;if(!l)return o;const h=l.count,d=Dt({},u,l.indices,{count:h,type:"SCALAR"}),p=Dt({},u,l.values,{count:h}),m=Yo(d,e),v=Yo(p,e);for(let y=0;y<d.count;y++)for(let b=0;b<r;b++)o[m[y]*r+b]=v[y*r+b];return o}var da;(function(u){u[u.ARRAY_BUFFER=34962]="ARRAY_BUFFER",u[u.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"})(da||(da={}));class Si{constructor(e,n,r){this._doc=void 0,this.jsonDoc=void 0,this.options=void 0,this.accessorIndexMap=new Map,this.animationIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.sceneIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.bufferURIGenerator=void 0,this.imageURIGenerator=void 0,this.logger=void 0,this._accessorUsageMap=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map,this._doc=e,this.jsonDoc=n,this.options=r;const o=e.getRoot(),l=o.listBuffers().length,h=o.listTextures().length;this.bufferURIGenerator=new vm(l>1,()=>r.basename||"buffer"),this.imageURIGenerator=new vm(h>1,d=>p0(e,d)||r.basename||"texture"),this.logger=e.getLogger()}createTextureInfoDef(e,n){const r={magFilter:n.getMagFilter()||void 0,minFilter:n.getMinFilter()||void 0,wrapS:n.getWrapS(),wrapT:n.getWrapT()},o=JSON.stringify(r);this.samplerDefIndexMap.has(o)||(this.samplerDefIndexMap.set(o,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(r));const l={source:this.imageIndexMap.get(e),sampler:this.samplerDefIndexMap.get(o)},h=JSON.stringify(l);this.textureDefIndexMap.has(h)||(this.textureDefIndexMap.set(h,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(l));const d={index:this.textureDefIndexMap.get(h)};return n.getTexCoord()!==0&&(d.texCoord=n.getTexCoord()),Object.keys(n.getExtras()).length>0&&(d.extras=n.getExtras()),this.textureInfoDefMap.set(n,d),d}createPropertyDef(e){const n={};return e.getName()&&(n.name=e.getName()),Object.keys(e.getExtras()).length>0&&(n.extras=e.getExtras()),n}createAccessorDef(e){const n=this.createPropertyDef(e);return n.type=e.getType(),n.componentType=e.getComponentType(),n.count=e.getCount(),this._doc.getGraph().listParentEdges(e).some(o=>o.getName()==="attributes"&&o.getAttributes().key==="POSITION"||o.getName()==="input")&&(n.max=e.getMax([]).map(Math.fround),n.min=e.getMin([]).map(Math.fround)),e.getNormalized()&&(n.normalized=e.getNormalized()),n}createImageData(e,n,r){if(this.options.format===sn.GLB)this.imageBufferViews.push(n),e.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:n.byteLength});else{const o=Ti.mimeTypeToExtension(r.getMimeType());e.uri=this.imageURIGenerator.createURI(r,o),this.assignResourceURI(e.uri,n,!1)}}assignResourceURI(e,n,r){const o=this.jsonDoc.resources;if(!(e in o)){o[e]=n;return}if(n===o[e]){this.logger.warn(`Duplicate resource URI, "${e}".`);return}const l=`Resource URI "${e}" already assigned to different data.`;if(!r){this.logger.warn(l);return}throw new Error(l)}getAccessorUsage(e){const n=this._accessorUsageMap.get(e);if(n)return n;if(e.getSparse())return kt.SPARSE;for(const r of this._doc.getGraph().listParentEdges(e)){const{usage:o}=r.getAttributes();if(o)return o;r.getParent().propertyType!==k.ROOT&&this.logger.warn(`Missing attribute ".usage" on edge, "${r.getName()}".`)}return kt.OTHER}addAccessorToUsageGroup(e,n){const r=this._accessorUsageMap.get(e);if(r&&r!==n)throw new Error(`Accessor with usage "${r}" cannot be reused as "${n}".`);return this._accessorUsageMap.set(e,n),this}}Si.BufferViewTarget=da;Si.BufferViewUsage=kt;Si.USAGE_TO_TARGET={[kt.ARRAY_BUFFER]:da.ARRAY_BUFFER,[kt.ELEMENT_ARRAY_BUFFER]:da.ELEMENT_ARRAY_BUFFER};class vm{constructor(e,n){this.multiple=void 0,this.basename=void 0,this.counter={},this.multiple=e,this.basename=n}createURI(e,n){if(e.getURI())return e.getURI();if(this.multiple){const r=this.basename(e);return this.counter[r]=this.counter[r]||1,`${r}_${this.counter[r]++}.${n}`}else return`${this.basename(e)}.${n}`}}function p0(u,e){const n=u.getGraph().listParentEdges(e).find(r=>r.getParent()!==u.getRoot());return n?n.getName().replace(/texture$/i,""):""}const{BufferViewUsage:Vo}=Si,{UNSIGNED_INT:m0,UNSIGNED_SHORT:g0,UNSIGNED_BYTE:v0}=se.ComponentType,_0=new Set([k.ACCESSOR,k.BUFFER,k.MATERIAL,k.MESH]);class y0{static write(e,n){const r=e.getGraph(),o=e.getRoot(),l={asset:Dt({generator:`glTF-Transform ${eg}`},o.getAsset()),extras:Dt({},o.getExtras())},h={json:l,resources:{}},d=new Si(e,h,n),p=n.logger||si.DEFAULT_INSTANCE,m=new Set(n.extensions.map(w=>w.EXTENSION_NAME)),v=e.getRoot().listExtensionsUsed().filter(w=>m.has(w.extensionName)).sort((w,F)=>w.extensionName>F.extensionName?1:-1),y=e.getRoot().listExtensionsRequired().filter(w=>m.has(w.extensionName)).sort((w,F)=>w.extensionName>F.extensionName?1:-1);v.length<e.getRoot().listExtensionsUsed().length&&p.warn("Some extensions were not registered for I/O, and will not be written.");for(const w of v){const F=w.prewriteTypes.filter(O=>!_0.has(O));F.length&&p.warn(`Prewrite hooks for some types (${F.join()}), requested by extension ${w.extensionName}, are unsupported. Please file an issue or a PR.`);for(const O of w.writeDependencies)w.install(O,n.dependencies[O])}function b(w,F,O,z){const M=[];let V=0;for(const K of w){const Q=d.createAccessorDef(K);Q.bufferView=l.bufferViews.length;const ee=K.getArray(),$=_e.pad(_e.toView(ee));Q.byteOffset=V,V+=$.byteLength,M.push($),d.accessorIndexMap.set(K,l.accessors.length),l.accessors.push(Q)}const T=_e.concat(M),U={buffer:F,byteOffset:O,byteLength:T.byteLength};return z&&(U.target=z),l.bufferViews.push(U),{buffers:M,byteLength:V}}function x(w,F,O){const z=w[0].getCount();let M=0;for(const Q of w){const ee=d.createAccessorDef(Q);ee.bufferView=l.bufferViews.length,ee.byteOffset=M;const $=Q.getElementSize(),J=Q.getComponentSize();M+=_e.padNumber($*J),d.accessorIndexMap.set(Q,l.accessors.length),l.accessors.push(ee)}const V=z*M,T=new ArrayBuffer(V),U=new DataView(T);for(let Q=0;Q<z;Q++){let ee=0;for(const $ of w){const J=$.getElementSize(),ae=$.getComponentSize(),P=$.getComponentType(),A=$.getArray();for(let X=0;X<J;X++){const ne=Q*M+ee+X*ae,ve=A[Q*J+X];switch(P){case se.ComponentType.FLOAT:U.setFloat32(ne,ve,!0);break;case se.ComponentType.BYTE:U.setInt8(ne,ve);break;case se.ComponentType.SHORT:U.setInt16(ne,ve,!0);break;case se.ComponentType.UNSIGNED_BYTE:U.setUint8(ne,ve);break;case se.ComponentType.UNSIGNED_SHORT:U.setUint16(ne,ve,!0);break;case se.ComponentType.UNSIGNED_INT:U.setUint32(ne,ve,!0);break;default:throw new Error("Unexpected component type: "+P)}}ee+=_e.padNumber(J*ae)}}const K={buffer:F,byteOffset:O,byteLength:V,byteStride:M,target:Si.BufferViewTarget.ARRAY_BUFFER};return l.bufferViews.push(K),{byteLength:V,buffers:[new Uint8Array(T)]}}function D(w,F,O){const z=[];let M=0;const V=new Map;let T=-1/0,U=!1;for(const P of w){const A=d.createAccessorDef(P);l.accessors.push(A),d.accessorIndexMap.set(P,l.accessors.length-1);const X=[],ne=[],ve=[],S=new Array(P.getElementSize()).fill(0);for(let oe=0,Ee=P.getCount();oe<Ee;oe++)if(P.getElement(oe,ve),!Ge.eq(ve,S,0)){T=Math.max(oe,T),X.push(oe);for(let de=0;de<ve.length;de++)ne.push(ve[de])}const Z=X.length,ie={accessorDef:A,count:Z};if(V.set(P,ie),Z===0)continue;Z>P.getCount()/2&&(U=!0);const te=il[P.getComponentType()];ie.indices=X,ie.values=new te(ne)}if(!Number.isFinite(T))return{buffers:z,byteLength:M};U&&p.warn("Some sparse accessors have >50% non-zero elements, which may increase file size.");const K=T<255?Uint8Array:T<65535?Uint16Array:Uint32Array,Q=T<255?v0:T<65535?g0:m0,ee={buffer:F,byteOffset:O+M,byteLength:0};for(const P of w){const A=V.get(P);if(A.count===0)continue;A.indicesByteOffset=ee.byteLength;const X=_e.pad(_e.toView(new K(A.indices)));z.push(X),M+=X.byteLength,ee.byteLength+=X.byteLength}l.bufferViews.push(ee);const $=l.bufferViews.length-1,J={buffer:F,byteOffset:O+M,byteLength:0};for(const P of w){const A=V.get(P);if(A.count===0)continue;A.valuesByteOffset=J.byteLength;const X=_e.pad(_e.toView(A.values));z.push(X),M+=X.byteLength,J.byteLength+=X.byteLength}l.bufferViews.push(J);const ae=l.bufferViews.length-1;for(const P of w){const A=V.get(P);A.count!==0&&(A.accessorDef.sparse={count:A.count,indices:{bufferView:$,byteOffset:A.indicesByteOffset,componentType:Q},values:{bufferView:ae,byteOffset:A.valuesByteOffset}})}return{buffers:z,byteLength:M}}if(l.accessors=[],l.bufferViews=[],l.samplers=[],l.textures=[],l.images=o.listTextures().map((w,F)=>{const O=d.createPropertyDef(w);w.getMimeType()&&(O.mimeType=w.getMimeType());const z=w.getImage();return z&&d.createImageData(O,z,w),d.imageIndexMap.set(w,F),O}),v.filter(w=>w.prewriteTypes.includes(k.ACCESSOR)).forEach(w=>w.prewrite(d,k.ACCESSOR)),o.listAccessors().forEach(w=>{const F=d.accessorUsageGroupedByParent,O=d.accessorParents;if(d.accessorIndexMap.has(w))return;const z=d.getAccessorUsage(w);if(d.addAccessorToUsageGroup(w,z),F.has(z)){const M=r.listParents(w).find(V=>V.propertyType!==k.ROOT);O.set(w,M)}}),v.filter(w=>w.prewriteTypes.includes(k.BUFFER)).forEach(w=>w.prewrite(d,k.BUFFER)),(o.listAccessors().length>0||d.otherBufferViews.size>0||o.listTextures().length>0&&n.format===sn.GLB)&&o.listBuffers().length===0)throw new Error("Buffer required for Document resources, but none was found.");l.buffers=[],o.listBuffers().forEach((w,F)=>{const O=d.createPropertyDef(w),z=d.accessorUsageGroupedByParent,M=w.listParents().filter(J=>J instanceof se),V=new Set(M.map(J=>d.accessorParents.get(J))),T=new Map(Array.from(V).map((J,ae)=>[J,ae])),U={};for(const J of M){var K;if(d.accessorIndexMap.has(J))continue;const ae=d.getAccessorUsage(J);let P=ae;if(z.has(ae)){const A=d.accessorParents.get(J);P+=`:${T.get(A)}`}U[K=P]||(U[K]={usage:ae,accessors:[]}),U[P].accessors.push(J)}const Q=[],ee=l.buffers.length;let $=0;for(const{usage:J,accessors:ae}of Object.values(U))if(J===Vo.ARRAY_BUFFER&&n.vertexLayout===qo.INTERLEAVED){const P=x(ae,ee,$);$+=P.byteLength;for(const A of P.buffers)Q.push(A)}else if(J===Vo.ARRAY_BUFFER)for(const P of ae){const A=x([P],ee,$);$+=A.byteLength;for(const X of A.buffers)Q.push(X)}else if(J===Vo.SPARSE){const P=D(ae,ee,$);$+=P.byteLength;for(const A of P.buffers)Q.push(A)}else if(J===Vo.ELEMENT_ARRAY_BUFFER){const P=Si.BufferViewTarget.ELEMENT_ARRAY_BUFFER,A=b(ae,ee,$,P);$+=A.byteLength;for(const X of A.buffers)Q.push(X)}else{const P=b(ae,ee,$);$+=P.byteLength;for(const A of P.buffers)Q.push(A)}if(d.imageBufferViews.length&&F===0){for(let J=0;J<d.imageBufferViews.length;J++)if(l.bufferViews[l.images[J].bufferView].byteOffset=$,$+=d.imageBufferViews[J].byteLength,Q.push(d.imageBufferViews[J]),$%8){const ae=8-$%8;$+=ae,Q.push(new Uint8Array(ae))}}if(d.otherBufferViews.has(w))for(const J of d.otherBufferViews.get(w))l.bufferViews.push({buffer:ee,byteOffset:$,byteLength:J.byteLength}),d.otherBufferViewsIndexMap.set(J,l.bufferViews.length-1),$+=J.byteLength,Q.push(J);if($){let J;n.format===sn.GLB?J=Js:(J=d.bufferURIGenerator.createURI(w,"bin"),O.uri=J),O.byteLength=$,d.assignResourceURI(J,_e.concat(Q),!0)}l.buffers.push(O),d.bufferIndexMap.set(w,F)}),o.listAccessors().find(w=>!w.getBuffer())&&p.warn("Skipped writing one or more Accessors: no Buffer assigned."),v.filter(w=>w.prewriteTypes.includes(k.MATERIAL)).forEach(w=>w.prewrite(d,k.MATERIAL)),l.materials=o.listMaterials().map((w,F)=>{const O=d.createPropertyDef(w);if(w.getAlphaMode()!==rs.AlphaMode.OPAQUE&&(O.alphaMode=w.getAlphaMode()),w.getAlphaMode()===rs.AlphaMode.MASK&&(O.alphaCutoff=w.getAlphaCutoff()),w.getDoubleSided()&&(O.doubleSided=!0),O.pbrMetallicRoughness={},Ge.eq(w.getBaseColorFactor(),[1,1,1,1])||(O.pbrMetallicRoughness.baseColorFactor=w.getBaseColorFactor()),Ge.eq(w.getEmissiveFactor(),[0,0,0])||(O.emissiveFactor=w.getEmissiveFactor()),w.getRoughnessFactor()!==1&&(O.pbrMetallicRoughness.roughnessFactor=w.getRoughnessFactor()),w.getMetallicFactor()!==1&&(O.pbrMetallicRoughness.metallicFactor=w.getMetallicFactor()),w.getBaseColorTexture()){const z=w.getBaseColorTexture(),M=w.getBaseColorTextureInfo();O.pbrMetallicRoughness.baseColorTexture=d.createTextureInfoDef(z,M)}if(w.getEmissiveTexture()){const z=w.getEmissiveTexture(),M=w.getEmissiveTextureInfo();O.emissiveTexture=d.createTextureInfoDef(z,M)}if(w.getNormalTexture()){const z=w.getNormalTexture(),M=w.getNormalTextureInfo(),V=d.createTextureInfoDef(z,M);w.getNormalScale()!==1&&(V.scale=w.getNormalScale()),O.normalTexture=V}if(w.getOcclusionTexture()){const z=w.getOcclusionTexture(),M=w.getOcclusionTextureInfo(),V=d.createTextureInfoDef(z,M);w.getOcclusionStrength()!==1&&(V.strength=w.getOcclusionStrength()),O.occlusionTexture=V}if(w.getMetallicRoughnessTexture()){const z=w.getMetallicRoughnessTexture(),M=w.getMetallicRoughnessTextureInfo();O.pbrMetallicRoughness.metallicRoughnessTexture=d.createTextureInfoDef(z,M)}return d.materialIndexMap.set(w,F),O}),v.filter(w=>w.prewriteTypes.includes(k.MESH)).forEach(w=>w.prewrite(d,k.MESH)),l.meshes=o.listMeshes().map((w,F)=>{const O=d.createPropertyDef(w);let z=null;return O.primitives=w.listPrimitives().map(M=>{const V={attributes:{}};V.mode=M.getMode();const T=M.getMaterial();T&&(V.material=d.materialIndexMap.get(T)),Object.keys(M.getExtras()).length&&(V.extras=M.getExtras());const U=M.getIndices();U&&(V.indices=d.accessorIndexMap.get(U));for(const K of M.listSemantics())V.attributes[K]=d.accessorIndexMap.get(M.getAttribute(K));for(const K of M.listTargets()){const Q={};for(const ee of K.listSemantics())Q[ee]=d.accessorIndexMap.get(K.getAttribute(ee));V.targets=V.targets||[],V.targets.push(Q)}return M.listTargets().length&&!z&&(z=M.listTargets().map(K=>K.getName())),V}),w.getWeights().length&&(O.weights=w.getWeights()),z&&(O.extras=O.extras||{},O.extras.targetNames=z),d.meshIndexMap.set(w,F),O}),l.cameras=o.listCameras().map((w,F)=>{const O=d.createPropertyDef(w);if(O.type=w.getType(),O.type===_a.Type.PERSPECTIVE){O.perspective={znear:w.getZNear(),zfar:w.getZFar(),yfov:w.getYFov()};const z=w.getAspectRatio();z!==null&&(O.perspective.aspectRatio=z)}else O.orthographic={znear:w.getZNear(),zfar:w.getZFar(),xmag:w.getXMag(),ymag:w.getYMag()};return d.cameraIndexMap.set(w,F),O}),l.nodes=o.listNodes().map((w,F)=>{const O=d.createPropertyDef(w);return Ge.eq(w.getTranslation(),[0,0,0])||(O.translation=w.getTranslation()),Ge.eq(w.getRotation(),[0,0,0,1])||(O.rotation=w.getRotation()),Ge.eq(w.getScale(),[1,1,1])||(O.scale=w.getScale()),w.getWeights().length&&(O.weights=w.getWeights()),d.nodeIndexMap.set(w,F),O}),l.skins=o.listSkins().map((w,F)=>{const O=d.createPropertyDef(w),z=w.getInverseBindMatrices();z&&(O.inverseBindMatrices=d.accessorIndexMap.get(z));const M=w.getSkeleton();return M&&(O.skeleton=d.nodeIndexMap.get(M)),O.joints=w.listJoints().map(V=>d.nodeIndexMap.get(V)),d.skinIndexMap.set(w,F),O}),o.listNodes().forEach((w,F)=>{const O=l.nodes[F],z=w.getMesh();z&&(O.mesh=d.meshIndexMap.get(z));const M=w.getCamera();M&&(O.camera=d.cameraIndexMap.get(M));const V=w.getSkin();V&&(O.skin=d.skinIndexMap.get(V)),w.listChildren().length>0&&(O.children=w.listChildren().map(T=>d.nodeIndexMap.get(T)))}),l.animations=o.listAnimations().map((w,F)=>{const O=d.createPropertyDef(w),z=new Map;return O.samplers=w.listSamplers().map((M,V)=>{const T=d.createPropertyDef(M);return T.input=d.accessorIndexMap.get(M.getInput()),T.output=d.accessorIndexMap.get(M.getOutput()),T.interpolation=M.getInterpolation(),z.set(M,V),T}),O.channels=w.listChannels().map(M=>{const V=d.createPropertyDef(M);return V.sampler=z.get(M.getSampler()),V.target={node:d.nodeIndexMap.get(M.getTargetNode()),path:M.getTargetPath()},V}),d.animationIndexMap.set(w,F),O}),l.scenes=o.listScenes().map((w,F)=>{const O=d.createPropertyDef(w);return O.nodes=w.listChildren().map(z=>d.nodeIndexMap.get(z)),d.sceneIndexMap.set(w,F),O});const B=o.getDefaultScene();return B&&(l.scene=o.listScenes().indexOf(B)),l.extensionsUsed=v.map(w=>w.extensionName),l.extensionsRequired=y.map(w=>w.extensionName),v.forEach(w=>w.write(d)),b0(l),h}}function b0(u){const e=[];for(const n in u){const r=u[n];(Array.isArray(r)&&r.length===0||r===null||r===""||r&&typeof r=="object"&&Object.keys(r).length===0)&&e.push(n)}for(const n of e)delete u[n]}var Zo;(function(u){u[u.JSON=1313821514]="JSON",u[u.BIN=5130562]="BIN"})(Zo||(Zo={}));class x0{constructor(){this._logger=si.DEFAULT_INSTANCE,this._extensions=new Set,this._dependencies={},this._vertexLayout=qo.INTERLEAVED,this.lastReadBytes=0,this.lastWriteBytes=0}setLogger(e){return this._logger=e,this}registerExtensions(e){for(const n of e)this._extensions.add(n),n.register();return this}registerDependencies(e){return Object.assign(this._dependencies,e),this}setVertexLayout(e){return this._vertexLayout=e,this}async read(e){return await this.readJSON(await this.readAsJSON(e))}async readAsJSON(e){const n=await this.readURI(e,"view");this.lastReadBytes=n.byteLength;const r=_m(n)?this._binaryToJSON(n):{json:JSON.parse(_e.decodeText(n)),resources:{}};return await this._readResourcesExternal(r,this.dirname(e)),this._readResourcesInternal(r),r}async readJSON(e){return e=this._copyJSON(e),this._readResourcesInternal(e),h0.read(e,{extensions:Array.from(this._extensions),dependencies:this._dependencies,logger:this._logger})}async binaryToJSON(e){const n=this._binaryToJSON(_e.assertView(e));this._readResourcesInternal(n);const r=n.json;if(r.buffers&&r.buffers.some(o=>w0(n,o)))throw new Error("Cannot resolve external buffers with binaryToJSON().");if(r.images&&r.images.some(o=>E0(n,o)))throw new Error("Cannot resolve external images with binaryToJSON().");return n}async readBinary(e){return this.readJSON(await this.binaryToJSON(_e.assertView(e)))}async writeJSON(e,n={}){if(n.format===sn.GLB&&e.getRoot().listBuffers().length>1)throw new Error("GLB must have 01 buffers.");return y0.write(e,{format:n.format||sn.GLTF,basename:n.basename||"",logger:this._logger,vertexLayout:this._vertexLayout,dependencies:Dt({},this._dependencies),extensions:Array.from(this._extensions)})}async writeBinary(e){const{json:n,resources:r}=await this.writeJSON(e,{format:sn.GLB}),o=new Uint32Array([1179937895,2,12]),l=JSON.stringify(n),h=_e.pad(_e.encodeText(l),32),d=_e.toView(new Uint32Array([h.byteLength,1313821514])),p=_e.concat([d,h]);o[o.length-1]+=p.byteLength;const m=Object.values(r)[0];if(!m||!m.byteLength)return _e.concat([_e.toView(o),p]);const v=_e.pad(m,0),y=_e.toView(new Uint32Array([v.byteLength,5130562])),b=_e.concat([y,v]);return o[o.length-1]+=b.byteLength,_e.concat([_e.toView(o),p,b])}async _readResourcesExternal(e,n){var r=this;const o=e.json.images||[],l=e.json.buffers||[],h=[...o,...l].map(async function(d){const p=d.uri;if(!p||p.match(/data:/))return Promise.resolve();e.resources[p]=await r.readURI(r.resolve(n,p),"view"),r.lastReadBytes+=e.resources[p].byteLength});await Promise.all(h)}_readResourcesInternal(e){function n(l){if(l.uri){if(l.uri in e.resources){_e.assertView(e.resources[l.uri]);return}if(l.uri.match(/data:/)){const h=`__${s0()}.${ss.extension(l.uri)}`;e.resources[h]=_e.createBufferFromDataURI(l.uri),l.uri=h}}}(e.json.images||[]).forEach(l=>{if(l.bufferView===void 0&&l.uri===void 0)throw new Error("Missing resource URI or buffer view.");n(l)}),(e.json.buffers||[]).forEach(n)}_copyJSON(e){const{images:n,buffers:r}=e.json;return e={json:Dt({},e.json),resources:Dt({},e.resources)},n&&(e.json.images=n.map(o=>Dt({},o))),r&&(e.json.buffers=r.map(o=>Dt({},o))),e}_binaryToJSON(e){if(!_m(e))throw new Error("Invalid glTF 2.0 binary.");const n=new Uint32Array(e.buffer,e.byteOffset+12,2);if(n[1]!==Zo.JSON)throw new Error("Missing required GLB JSON chunk.");const r=20,o=n[0],l=_e.decodeText(_e.toView(e,r,o)),h=JSON.parse(l),d=r+o;if(e.byteLength<=d)return{json:h,resources:{}};const p=new Uint32Array(e.buffer,e.byteOffset+d,2);if(p[1]!==Zo.BIN)return{json:h,resources:{}};const m=p[0],v=_e.toView(e,d+8,m);return{json:h,resources:{[Js]:v}}}}function w0(u,e){return e.uri!==void 0&&!(e.uri in u.resources)}function E0(u,e){return e.uri!==void 0&&!(e.uri in u.resources)&&e.bufferView===void 0}function _m(u){if(u.byteLength<3*Uint32Array.BYTES_PER_ELEMENT)return!1;const e=new Uint32Array(u.buffer,u.byteOffset,3);return e[0]===1179937895&&e[1]===2}class T0 extends x0{constructor(e=null,n=hi.DEFAULT_INIT){super(),this._fetch=void 0,this._fetchConfig=void 0,this._init=void 0,this._fetchEnabled=!1,this._fetch=e,this._fetchConfig=n,this._init=this.init()}async init(){return this._init?this._init:Promise.all([hm(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),hm(()=>import("./__vite-browser-external-BIHI7g3E.js"),[])]).then(([e,n])=>{this._fs=e.promises,this._path=n})}setAllowNetwork(e){if(e&&!this._fetch)throw new Error("NodeIO requires a Fetch API implementation for HTTP requests.");return this._fetchEnabled=e,this}async readURI(e,n){if(await this.init(),hi.isAbsoluteURL(e)){if(!this._fetchEnabled||!this._fetch)throw new Error("Network request blocked. Allow HTTP requests explicitly, if needed.");const r=await this._fetch(e,this._fetchConfig);switch(n){case"view":return new Uint8Array(await r.arrayBuffer());case"text":return r.text()}}else switch(n){case"view":return this._fs.readFile(e);case"text":return this._fs.readFile(e,"utf8")}}resolve(e,n){return hi.isAbsoluteURL(e)||hi.isAbsoluteURL(n)?hi.resolve(e,n):this._path.resolve(e,decodeURIComponent(n))}dirname(e){return hi.isAbsoluteURL(e)?hi.dirname(e):this._path.dirname(e)}async write(e,n){await this.init(),await(!!e.match(/\.glb$/)?this._writeGLB(e,n):this._writeGLTF(e,n))}async _writeGLTF(e,n){var r=this;this.lastWriteBytes=0;const{json:o,resources:l}=await this.writeJSON(n,{format:sn.GLTF,basename:ss.basename(e)}),{_fs:h,_path:d}=this,p=d.dirname(e),m=JSON.stringify(o,null,2);await h.writeFile(e,m),this.lastWriteBytes+=m.length;for(const v of S0(Object.keys(l),10))await Promise.all(v.map(async function(y){if(hi.isAbsoluteURL(y)){if(hi.extension(y)==="bin")throw new Error(`Cannot write buffer to path "${y}".`);return}const b=d.join(p,decodeURIComponent(y));await h.mkdir(d.dirname(b),{recursive:!0}),await h.writeFile(b,l[y]),r.lastWriteBytes+=l[y].byteLength}))}async _writeGLB(e,n){const r=await this.writeBinary(n);await this._fs.writeFile(e,r),this.lastWriteBytes=r.byteLength}}function S0(u,e){const n=[];for(let r=0,o=u.length;r<o;r+=e){const l=[];for(let h=0;h<e&&r+h<o;h++)l.push(u[r+h]);n.push(l)}return n}const D0=0,A0=0,C0=0,R0=2,O0=0,N0=163,M0=166,z0=0,I0=2,G0=1,L0=64,U0=0;function V0(){return{vkFormat:U0,typeSize:1,pixelWidth:0,pixelHeight:0,pixelDepth:0,layerCount:0,faceCount:1,supercompressionScheme:D0,levels:[],dataFormatDescriptor:[{vendorId:C0,descriptorType:A0,versionNumber:R0,colorModel:O0,colorPrimaries:G0,transferFunction:I0,flags:z0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],keyValue:{},globalData:null}}class ia{constructor(e,n,r,o){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+n,r),this._littleEndian=o,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian),n=this._dataView.getUint32(this._offset+4,this._littleEndian),r=e+2**32*n;return this._offset+=8,r}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){const n=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,n}_skip(e){return this._offset+=e,this}_scan(e,n=0){const r=this._offset;let o=0;for(;this._dataView.getUint8(this._offset)!==n&&o<e;)o++,this._offset++;return o<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+r,o)}}const St=[171,75,84,88,32,50,48,187,13,10,26,10];function ym(u){return new TextDecoder().decode(u)}function Cc(u){const e=new Uint8Array(u.buffer,u.byteOffset,St.length);if(e[0]!==St[0]||e[1]!==St[1]||e[2]!==St[2]||e[3]!==St[3]||e[4]!==St[4]||e[5]!==St[5]||e[6]!==St[6]||e[7]!==St[7]||e[8]!==St[8]||e[9]!==St[9]||e[10]!==St[10]||e[11]!==St[11])throw new Error("Missing KTX 2.0 identifier.");const n=V0(),r=17*Uint32Array.BYTES_PER_ELEMENT,o=new ia(u,St.length,r,!0);n.vkFormat=o._nextUint32(),n.typeSize=o._nextUint32(),n.pixelWidth=o._nextUint32(),n.pixelHeight=o._nextUint32(),n.pixelDepth=o._nextUint32(),n.layerCount=o._nextUint32(),n.faceCount=o._nextUint32();const l=o._nextUint32();n.supercompressionScheme=o._nextUint32();const h=o._nextUint32(),d=o._nextUint32(),p=o._nextUint32(),m=o._nextUint32(),v=o._nextUint64(),y=o._nextUint64(),b=l*3*8,x=new ia(u,St.length+r,b,!0);for(let nt=0;nt<l;nt++)n.levels.push({levelData:new Uint8Array(u.buffer,u.byteOffset+x._nextUint64(),x._nextUint64()),uncompressedByteLength:x._nextUint64()});const D=new ia(u,h,d,!0);D._skip(4);const R=D._nextUint16(),B=D._nextUint16(),w=D._nextUint16(),F=D._nextUint16(),O=D._nextUint8(),z=D._nextUint8(),M=D._nextUint8(),V=D._nextUint8(),T=[D._nextUint8(),D._nextUint8(),D._nextUint8(),D._nextUint8()],U=[D._nextUint8(),D._nextUint8(),D._nextUint8(),D._nextUint8(),D._nextUint8(),D._nextUint8(),D._nextUint8(),D._nextUint8()],Q={vendorId:R,descriptorType:B,versionNumber:w,colorModel:O,colorPrimaries:z,transferFunction:M,flags:V,texelBlockDimension:T,bytesPlane:U,samples:[]},J=(F/4-6)/4;for(let nt=0;nt<J;nt++){const zt={bitOffset:D._nextUint16(),bitLength:D._nextUint8(),channelType:D._nextUint8(),samplePosition:[D._nextUint8(),D._nextUint8(),D._nextUint8(),D._nextUint8()],sampleLower:Number.NEGATIVE_INFINITY,sampleUpper:Number.POSITIVE_INFINITY};zt.channelType&L0?(zt.sampleLower=D._nextInt32(),zt.sampleUpper=D._nextInt32()):(zt.sampleLower=D._nextUint32(),zt.sampleUpper=D._nextUint32()),Q.samples[nt]=zt}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(Q);const ae=new ia(u,p,m,!0);for(;ae._offset<m;){const nt=ae._nextUint32(),zt=ae._scan(nt),an=ym(zt);if(n.keyValue[an]=ae._nextUint8Array(nt-zt.byteLength-1),an.match(/^ktx/i)){const ya=ym(n.keyValue[an]);n.keyValue[an]=ya.substring(0,ya.lastIndexOf("\0"))}const ir=nt%4?4-nt%4:0;ae._skip(ir)}if(y<=0)return n;const P=new ia(u,v,y,!0),A=P._nextUint16(),X=P._nextUint16(),ne=P._nextUint32(),ve=P._nextUint32(),S=P._nextUint32(),Z=P._nextUint32(),ie=[];for(let nt=0;nt<l;nt++)ie.push({imageFlags:P._nextUint32(),rgbSliceByteOffset:P._nextUint32(),rgbSliceByteLength:P._nextUint32(),alphaSliceByteOffset:P._nextUint32(),alphaSliceByteLength:P._nextUint32()});const te=v+P._offset,oe=te+ne,Ee=oe+ve,de=Ee+S,Et=new Uint8Array(u.buffer,u.byteOffset+te,ne),Ve=new Uint8Array(u.buffer,u.byteOffset+oe,ve),pi=new Uint8Array(u.buffer,u.byteOffset+Ee,S),tr=new Uint8Array(u.buffer,u.byteOffset+de,Z);return n.globalData={endpointCount:A,selectorCount:X,imageDescs:ie,endpointsData:Et,selectorsData:Ve,tablesData:pi,extendedData:tr},n}const ji="EXT_mesh_gpu_instancing",mt="EXT_meshopt_compression",ra="EXT_texture_webp",aa="EXT_texture_avif",Ye="KHR_draco_mesh_compression",ti="KHR_lights_punctual",ki="KHR_materials_anisotropy",Fi="KHR_materials_clearcoat",Yi="KHR_materials_diffuse_transmission",Xi="KHR_materials_dispersion",qi="KHR_materials_emissive_strength",Wi="KHR_materials_ior",Zi="KHR_materials_iridescence",Ki="KHR_materials_pbrSpecularGlossiness",Qi="KHR_materials_sheen",Ji="KHR_materials_specular",$i="KHR_materials_transmission",Mn="KHR_materials_unlit",en="KHR_materials_volume",bt="KHR_materials_variants",fg="KHR_mesh_quantization",oa="KHR_texture_basisu",tn="KHR_texture_transform",ii="KHR_xmp_json_ld",Uc="INSTANCE_ATTRIBUTE";class pg extends Ke{init(){this.extensionName=ji,this.propertyType="InstancedMesh",this.parentTypes=[k.NODE]}getDefaults(){return Object.assign(super.getDefaults(),{attributes:new di})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,n){return this.setRefMap("attributes",e,n,{usage:Uc})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}}pg.EXTENSION_NAME=ji;class B0 extends je{constructor(...e){super(...e),this.extensionName=ji,this.provideTypes=[k.NODE],this.prewriteTypes=[k.ACCESSOR]}createInstancedMesh(){return new pg(this.document.getGraph())}read(e){return(e.jsonDoc.json.nodes||[]).forEach((o,l)=>{if(!o.extensions||!o.extensions[ji])return;const h=o.extensions[ji],d=this.createInstancedMesh();for(const p in h.attributes)d.setAttribute(p,e.accessors[h.attributes[p]]);e.nodes[l].setExtension(ji,d)}),this}prewrite(e){e.accessorUsageGroupedByParent.add(Uc);for(const n of this.properties)for(const r of n.listAttributes())e.addAccessorToUsageGroup(r,Uc);return this}write(e){const n=e.jsonDoc;return this.document.getRoot().listNodes().forEach(r=>{const o=r.getExtension(ji);if(o){const l=e.nodeIndexMap.get(r),h=n.json.nodes[l],d={attributes:{}};o.listSemantics().forEach(p=>{const m=o.getAttribute(p);d.attributes[p]=e.accessorIndexMap.get(m)}),h.extensions=h.extensions||{},h.extensions[ji]=d}}),this}}B0.EXTENSION_NAME=ji;function rn(){return rn=Object.assign?Object.assign.bind():function(u){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(u[r]=n[r])}return u},rn.apply(null,arguments)}var fa;(function(u){u.QUANTIZE="quantize",u.FILTER="filter"})(fa||(fa={}));var Qs;(function(u){u.ATTRIBUTES="ATTRIBUTES",u.TRIANGLES="TRIANGLES",u.INDICES="INDICES"})(Qs||(Qs={}));var Ze;(function(u){u.NONE="NONE",u.OCTAHEDRAL="OCTAHEDRAL",u.QUATERNION="QUATERNION",u.EXPONENTIAL="EXPONENTIAL"})(Ze||(Ze={}));function H0(u){return!u.extensions||!u.extensions[mt]?!1:!!u.extensions[mt].fallback}const{BYTE:P0,SHORT:bm,FLOAT:j0}=se.ComponentType,{encodeNormalizedInt:xm,decodeNormalizedInt:Vc}=Ge;function k0(u,e,n,r){const{filter:o,bits:l}=r,h={array:u.getArray(),byteStride:u.getElementSize()*u.getComponentSize(),componentType:u.getComponentType(),normalized:u.getNormalized()};if(n!==Qs.ATTRIBUTES)return h;if(o!==Ze.NONE){let d=u.getNormalized()?F0(u):new Float32Array(h.array);switch(o){case Ze.EXPONENTIAL:h.byteStride=u.getElementSize()*4,h.componentType=j0,h.normalized=!1,h.array=e.encodeFilterExp(d,u.getCount(),h.byteStride,l);break;case Ze.OCTAHEDRAL:h.byteStride=l>8?8:4,h.componentType=l>8?bm:P0,h.normalized=!0,d=u.getElementSize()===3?X0(d):d,h.array=e.encodeFilterOct(d,u.getCount(),h.byteStride,l);break;case Ze.QUATERNION:h.byteStride=8,h.componentType=bm,h.normalized=!0,h.array=e.encodeFilterQuat(d,u.getCount(),h.byteStride,l);break;default:throw new Error("Invalid filter.")}h.min=u.getMin([]),h.max=u.getMax([]),u.getNormalized()&&(h.min=h.min.map(p=>Vc(p,u.getComponentType())),h.max=h.max.map(p=>Vc(p,u.getComponentType()))),h.normalized&&(h.min=h.min.map(p=>xm(p,h.componentType)),h.max=h.max.map(p=>xm(p,h.componentType)))}else h.byteStride%4&&(h.array=Y0(h.array,u.getElementSize()),h.byteStride=h.array.byteLength/u.getCount());return h}function F0(u){const e=u.getComponentType(),n=u.getArray(),r=new Float32Array(n.length);for(let o=0;o<n.length;o++)r[o]=Vc(n[o],e);return r}function Y0(u,e){const r=_e.padNumber(u.BYTES_PER_ELEMENT*e)/u.BYTES_PER_ELEMENT,o=u.length/e,l=new u.constructor(o*r);for(let h=0;h*e<u.length;h++)for(let d=0;d<e;d++)l[h*r+d]=u[h*e+d];return l}function X0(u){const e=new Float32Array(u.length*4/3);for(let n=0,r=u.length/3;n<r;n++)e[n*4]=u[n*3],e[n*4+1]=u[n*3+1],e[n*4+2]=u[n*3+2];return e}function q0(u,e){return e===Si.BufferViewUsage.ELEMENT_ARRAY_BUFFER?u.listParents().some(r=>r instanceof as&&r.getMode()===as.Mode.TRIANGLES)?Qs.TRIANGLES:Qs.INDICES:Qs.ATTRIBUTES}function W0(u,e){const n=e.getGraph().listParentEdges(u).filter(r=>!(r.getParent()instanceof dg));for(const r of n){const o=r.getName(),l=r.getAttributes().key||"",h=r.getParent().propertyType===k.PRIMITIVE_TARGET;if(o==="indices")return{filter:Ze.NONE};if(o==="attributes"){if(l==="POSITION")return{filter:Ze.NONE};if(l==="TEXCOORD_0")return{filter:Ze.NONE};if(l.startsWith("JOINTS_"))return{filter:Ze.NONE};if(l.startsWith("WEIGHTS_"))return{filter:Ze.NONE};if(l==="NORMAL"||l==="TANGENT")return h?{filter:Ze.NONE}:{filter:Ze.OCTAHEDRAL,bits:8}}if(o==="output"){const d=mg(u);return d==="rotation"?{filter:Ze.QUATERNION,bits:16}:d==="translation"?{filter:Ze.EXPONENTIAL,bits:12}:d==="scale"?{filter:Ze.EXPONENTIAL,bits:12}:{filter:Ze.NONE}}if(o==="input")return{filter:Ze.NONE};if(o==="inverseBindMatrices")return{filter:Ze.NONE}}return{filter:Ze.NONE}}function mg(u){for(const e of u.listParents())if(e instanceof er){for(const n of e.listParents())if(n instanceof Jc)return n.getTargetPath()}return null}const wm={method:fa.QUANTIZE};class gg extends je{constructor(...e){super(...e),this.extensionName=mt,this.prereadTypes=[k.BUFFER,k.PRIMITIVE],this.prewriteTypes=[k.BUFFER,k.ACCESSOR],this.readDependencies=["meshopt.decoder"],this.writeDependencies=["meshopt.encoder"],this._decoder=null,this._decoderFallbackBufferMap=new Map,this._encoder=null,this._encoderOptions=wm,this._encoderFallbackBuffer=null,this._encoderBufferViews={},this._encoderBufferViewData={},this._encoderBufferViewAccessors={}}install(e,n){return e==="meshopt.decoder"&&(this._decoder=n),e==="meshopt.encoder"&&(this._encoder=n),this}setEncoderOptions(e){return this._encoderOptions=rn({},wm,e),this}preread(e,n){if(!this._decoder){if(!this.isRequired())return this;throw new Error(`[${mt}] Please install extension dependency, "meshopt.decoder".`)}if(!this._decoder.supported){if(!this.isRequired())return this;throw new Error(`[${mt}]: Missing WASM support.`)}return n===k.BUFFER?this._prereadBuffers(e):n===k.PRIMITIVE&&this._prereadPrimitives(e),this}_prereadBuffers(e){const n=e.jsonDoc;(n.json.bufferViews||[]).forEach((o,l)=>{if(!o.extensions||!o.extensions[mt])return;const h=o.extensions[mt],d=h.byteOffset||0,p=h.byteLength||0,m=h.count,v=h.byteStride,y=new Uint8Array(m*v),b=n.json.buffers[h.buffer],x=b.uri?n.resources[b.uri]:n.resources[Js],D=_e.toView(x,d,p);this._decoder.decodeGltfBuffer(y,m,v,D,h.mode,h.filter),e.bufferViews[l]=y})}_prereadPrimitives(e){const n=e.jsonDoc;(n.json.bufferViews||[]).forEach(o=>{if(!o.extensions||!o.extensions[mt])return;const l=o.extensions[mt],h=e.buffers[l.buffer],d=e.buffers[o.buffer],p=n.json.buffers[o.buffer];H0(p)&&this._decoderFallbackBufferMap.set(d,h)})}read(e){if(!this.isRequired())return this;for(const[n,r]of this._decoderFallbackBufferMap){for(const o of n.listParents())o instanceof se&&o.swap(n,r);n.dispose()}return this}prewrite(e,n){return n===k.ACCESSOR?this._prewriteAccessors(e):n===k.BUFFER&&this._prewriteBuffers(e),this}_prewriteAccessors(e){const n=e.jsonDoc.json,r=this._encoder,o=this._encoderOptions,l=this.document.getGraph(),h=this.document.createBuffer(),d=this.document.getRoot().listBuffers().indexOf(h);let p=1;const m=new Map,v=y=>{for(const b of l.listParents(y)){if(b.propertyType===k.ROOT)continue;let x=m.get(y);return x===void 0&&m.set(y,x=p++),x}return-1};this._encoderFallbackBuffer=h,this._encoderBufferViews={},this._encoderBufferViewData={},this._encoderBufferViewAccessors={};for(const y of this.document.getRoot().listAccessors()){if(mg(y)==="weights"||y.getSparse())continue;const b=e.getAccessorUsage(y),x=e.accessorUsageGroupedByParent.has(b)?v(y):null,D=q0(y,b),R=o.method===fa.FILTER?W0(y,this.document):{filter:Ze.NONE},B=k0(y,r,D,R),{array:w,byteStride:F}=B,O=y.getBuffer();if(!O)throw new Error(`${mt}: Missing buffer for accessor.`);const z=this.document.getRoot().listBuffers().indexOf(O),M=[b,x,D,R.filter,F,z].join(":");let V=this._encoderBufferViews[M],T=this._encoderBufferViewData[M],U=this._encoderBufferViewAccessors[M];(!V||!T)&&(U=this._encoderBufferViewAccessors[M]=[],T=this._encoderBufferViewData[M]=[],V=this._encoderBufferViews[M]={buffer:d,target:Si.USAGE_TO_TARGET[b],byteOffset:0,byteLength:0,byteStride:b===Si.BufferViewUsage.ARRAY_BUFFER?F:void 0,extensions:{[mt]:{buffer:z,byteOffset:0,byteLength:0,mode:D,filter:R.filter!==Ze.NONE?R.filter:void 0,byteStride:F,count:0}}});const K=e.createAccessorDef(y);K.componentType=B.componentType,K.normalized=B.normalized,K.byteOffset=V.byteLength,K.min&&B.min&&(K.min=B.min),K.max&&B.max&&(K.max=B.max),e.accessorIndexMap.set(y,n.accessors.length),n.accessors.push(K),U.push(K),T.push(new Uint8Array(w.buffer,w.byteOffset,w.byteLength)),V.byteLength+=w.byteLength,V.extensions.EXT_meshopt_compression.count+=y.getCount()}}_prewriteBuffers(e){const n=this._encoder;for(const r in this._encoderBufferViews){const o=this._encoderBufferViews[r],l=this._encoderBufferViewData[r],h=this.document.getRoot().listBuffers()[o.extensions[mt].buffer],d=e.otherBufferViews.get(h)||[],{count:p,byteStride:m,mode:v}=o.extensions[mt],y=_e.concat(l),b=n.encodeGltfBuffer(y,p,m,v),x=_e.pad(b);o.extensions[mt].byteLength=b.byteLength,l.length=0,l.push(x),d.push(x),e.otherBufferViews.set(h,d)}}write(e){let n=0;for(const h in this._encoderBufferViews){const d=this._encoderBufferViews[h],p=this._encoderBufferViewData[h][0],m=e.otherBufferViewsIndexMap.get(p),v=this._encoderBufferViewAccessors[h];for(const D of v)D.bufferView=m;const y=e.jsonDoc.json.bufferViews[m],b=y.byteOffset||0;Object.assign(y,d),y.byteOffset=n;const x=y.extensions[mt];x.byteOffset=b,n+=_e.padNumber(d.byteLength)}const r=this._encoderFallbackBuffer,o=e.bufferIndexMap.get(r),l=e.jsonDoc.json.buffers[o];return l.byteLength=n,l.extensions={[mt]:{fallback:!0}},r.dispose(),this}}gg.EXTENSION_NAME=mt;gg.EncoderMethod=fa;class Z0{match(e){return e.length>=12&&_e.decodeText(e.slice(4,12))==="ftypavif"}getSize(e){if(!this.match(e))return null;const n=new DataView(e.buffer,e.byteOffset,e.byteLength);let r=Em(n,0);if(!r)return null;let o=r.end;for(;r=Em(n,o);)if(r.type==="meta")o=r.start+4;else if(r.type==="iprp"||r.type==="ipco")o=r.start;else{if(r.type==="ispe")return[n.getUint32(r.start+4),n.getUint32(r.start+8)];if(r.type==="mdat")break;o=r.end}return null}getChannels(e){return 4}}class K0 extends je{constructor(...e){super(...e),this.extensionName=aa,this.prereadTypes=[k.TEXTURE]}static register(){Ti.registerFormat("image/avif",new Z0)}preread(e){return(e.jsonDoc.json.textures||[]).forEach(r=>{r.extensions&&r.extensions[aa]&&(r.source=r.extensions[aa].source)}),this}read(e){return this}write(e){const n=e.jsonDoc;return this.document.getRoot().listTextures().forEach(r=>{if(r.getMimeType()==="image/avif"){const o=e.imageIndexMap.get(r);(n.json.textures||[]).forEach(h=>{h.source===o&&(h.extensions=h.extensions||{},h.extensions[aa]={source:h.source},delete h.source)})}}),this}}K0.EXTENSION_NAME=aa;function Em(u,e){if(u.byteLength<4+e)return null;const n=u.getUint32(e);return u.byteLength<n+e||n<8?null:{type:_e.decodeText(new Uint8Array(u.buffer,u.byteOffset+e+4,4)),start:e+8,end:e+n}}class Q0{match(e){return e.length>=12&&e[8]===87&&e[9]===69&&e[10]===66&&e[11]===80}getSize(e){const n=_e.decodeText(e.slice(0,4)),r=_e.decodeText(e.slice(8,12));if(n!=="RIFF"||r!=="WEBP")return null;const o=new DataView(e.buffer,e.byteOffset);let l=12;for(;l<o.byteLength;){const h=_e.decodeText(new Uint8Array([o.getUint8(l),o.getUint8(l+1),o.getUint8(l+2),o.getUint8(l+3)])),d=o.getUint32(l+4,!0);if(h==="VP8 "){const p=o.getInt16(l+14,!0)&16383,m=o.getInt16(l+16,!0)&16383;return[p,m]}else if(h==="VP8L"){const p=o.getUint8(l+9),m=o.getUint8(l+10),v=o.getUint8(l+11),y=o.getUint8(l+12),b=1+((m&63)<<8|p),x=1+((y&15)<<10|v<<2|(m&192)>>6);return[b,x]}l+=8+d+d%2}return null}getChannels(e){return 4}}class J0 extends je{constructor(...e){super(...e),this.extensionName=ra,this.prereadTypes=[k.TEXTURE]}static register(){Ti.registerFormat("image/webp",new Q0)}preread(e){return(e.jsonDoc.json.textures||[]).forEach(r=>{r.extensions&&r.extensions[ra]&&(r.source=r.extensions[ra].source)}),this}read(e){return this}write(e){const n=e.jsonDoc;return this.document.getRoot().listTextures().forEach(r=>{if(r.getMimeType()==="image/webp"){const o=e.imageIndexMap.get(r);(n.json.textures||[]).forEach(h=>{h.source===o&&(h.extensions=h.extensions||{},h.extensions[ra]={source:h.source},delete h.source)})}}),this}}J0.EXTENSION_NAME=ra;let ot,vg,_g;function $0(u,e){const n=new ot.DecoderBuffer;try{if(n.Init(e,e.length),u.GetEncodedGeometryType(n)!==ot.TRIANGULAR_MESH)throw new Error(`[${Ye}] Unknown geometry type.`);const o=new ot.Mesh;if(!u.DecodeBufferToMesh(n,o).ok()||o.ptr===0)throw new Error(`[${Ye}] Decoding failure.`);return o}finally{ot.destroy(n)}}function eb(u,e){const r=e.num_faces()*3;let o,l;if(e.num_points()<=65534){const h=r*Uint16Array.BYTES_PER_ELEMENT;o=ot._malloc(h),u.GetTrianglesUInt16Array(e,h,o),l=new Uint16Array(ot.HEAPU16.buffer,o,r).slice()}else{const h=r*Uint32Array.BYTES_PER_ELEMENT;o=ot._malloc(h),u.GetTrianglesUInt32Array(e,h,o),l=new Uint32Array(ot.HEAPU32.buffer,o,r).slice()}return ot._free(o),l}function tb(u,e,n,r){const o=_g[r.componentType],l=vg[r.componentType],h=n.num_components(),p=e.num_points()*h,m=p*l.BYTES_PER_ELEMENT,v=ot._malloc(m);u.GetAttributeDataArrayForAllPoints(e,n,o,m,v);const y=new l(ot.HEAPF32.buffer,v,p).slice();return ot._free(v),y}function ib(u){ot=u,vg={[se.ComponentType.FLOAT]:Float32Array,[se.ComponentType.UNSIGNED_INT]:Uint32Array,[se.ComponentType.UNSIGNED_SHORT]:Uint16Array,[se.ComponentType.UNSIGNED_BYTE]:Uint8Array,[se.ComponentType.SHORT]:Int16Array,[se.ComponentType.BYTE]:Int8Array},_g={[se.ComponentType.FLOAT]:ot.DT_FLOAT32,[se.ComponentType.UNSIGNED_INT]:ot.DT_UINT32,[se.ComponentType.UNSIGNED_SHORT]:ot.DT_UINT16,[se.ComponentType.UNSIGNED_BYTE]:ot.DT_UINT8,[se.ComponentType.SHORT]:ot.DT_INT16,[se.ComponentType.BYTE]:ot.DT_INT8}}let $t;var pa;(function(u){u[u.EDGEBREAKER=1]="EDGEBREAKER",u[u.SEQUENTIAL=0]="SEQUENTIAL"})(pa||(pa={}));var ni;(function(u){u.POSITION="POSITION",u.NORMAL="NORMAL",u.COLOR="COLOR",u.TEX_COORD="TEX_COORD",u.GENERIC="GENERIC"})(ni||(ni={}));const yg={[ni.POSITION]:14,[ni.NORMAL]:10,[ni.COLOR]:8,[ni.TEX_COORD]:12,[ni.GENERIC]:12},Tm={decodeSpeed:5,encodeSpeed:5,method:pa.EDGEBREAKER,quantizationBits:yg,quantizationVolume:"mesh"};function nb(u){$t=u}function sb(u,e=Tm){const n=rn({},Tm,e);n.quantizationBits=rn({},yg,e.quantizationBits);const r=new $t.MeshBuilder,o=new $t.Mesh,l=new $t.ExpertEncoder(o),h={},d=new $t.DracoInt8Array,p=u.listTargets().length>0;let m=!1;for(const R of u.listSemantics()){const B=u.getAttribute(R);if(B.getSparse()){m=!0;continue}const w=rb(R),F=ab(r,B.getComponentType(),o,$t[w],B.getCount(),B.getElementSize(),B.getArray());if(F===-1)throw new Error(`Error compressing "${R}" attribute.`);if(h[R]=F,n.quantizationVolume==="mesh"||R!=="POSITION")l.SetAttributeQuantization(F,n.quantizationBits[w]);else if(typeof n.quantizationVolume=="object"){const{quantizationVolume:O}=n,z=Math.max(O.max[0]-O.min[0],O.max[1]-O.min[1],O.max[2]-O.min[2]);l.SetAttributeExplicitQuantization(F,n.quantizationBits[w],B.getElementSize(),O.min,z)}else throw new Error("Invalid quantization volume state.")}const v=u.getIndices();if(!v)throw new Bc("Primitive must have indices.");r.AddFacesToMesh(o,v.getCount()/3,v.getArray()),l.SetSpeedOptions(n.encodeSpeed,n.decodeSpeed),l.SetTrackEncodedProperties(!0),n.method===pa.SEQUENTIAL||p||m?l.SetEncodingMethod($t.MESH_SEQUENTIAL_ENCODING):l.SetEncodingMethod($t.MESH_EDGEBREAKER_ENCODING);const y=l.EncodeToDracoBuffer(!(p||m),d);if(y<=0)throw new Bc("Error applying Draco compression.");const b=new Uint8Array(y);for(let R=0;R<y;++R)b[R]=d.GetValue(R);const x=l.GetNumberOfEncodedPoints(),D=l.GetNumberOfEncodedFaces()*3;return $t.destroy(d),$t.destroy(o),$t.destroy(r),$t.destroy(l),{numVertices:x,numIndices:D,data:b,attributeIDs:h}}function rb(u){return u==="POSITION"?ni.POSITION:u==="NORMAL"?ni.NORMAL:u.startsWith("COLOR_")?ni.COLOR:u.startsWith("TEXCOORD_")?ni.TEX_COORD:ni.GENERIC}function ab(u,e,n,r,o,l,h){switch(e){case se.ComponentType.UNSIGNED_BYTE:return u.AddUInt8Attribute(n,r,o,l,h);case se.ComponentType.BYTE:return u.AddInt8Attribute(n,r,o,l,h);case se.ComponentType.UNSIGNED_SHORT:return u.AddUInt16Attribute(n,r,o,l,h);case se.ComponentType.SHORT:return u.AddInt16Attribute(n,r,o,l,h);case se.ComponentType.UNSIGNED_INT:return u.AddUInt32Attribute(n,r,o,l,h);case se.ComponentType.FLOAT:return u.AddFloatAttribute(n,r,o,l,h);default:throw new Error(`Unexpected component type, "${e}".`)}}class Bc extends Error{}class bg extends je{constructor(...e){super(...e),this.extensionName=Ye,this.prereadTypes=[k.PRIMITIVE],this.prewriteTypes=[k.ACCESSOR],this.readDependencies=["draco3d.decoder"],this.writeDependencies=["draco3d.encoder"],this._decoderModule=null,this._encoderModule=null,this._encoderOptions={}}install(e,n){return e==="draco3d.decoder"&&(this._decoderModule=n,ib(this._decoderModule)),e==="draco3d.encoder"&&(this._encoderModule=n,nb(this._encoderModule)),this}setEncoderOptions(e){return this._encoderOptions=e,this}preread(e){if(!this._decoderModule)throw new Error(`[${Ye}] Please install extension dependency, "draco3d.decoder".`);const n=this.document.getLogger(),r=e.jsonDoc,o=new Map;try{const l=r.json.meshes||[];for(const h of l)for(const d of h.primitives){if(!d.extensions||!d.extensions[Ye])continue;const p=d.extensions[Ye];let[m,v]=o.get(p.bufferView)||[];if(!v||!m){const y=r.json.bufferViews[p.bufferView],b=r.json.buffers[y.buffer],x=b.uri?r.resources[b.uri]:r.resources[Js],D=y.byteOffset||0,R=y.byteLength,B=_e.toView(x,D,R);m=new this._decoderModule.Decoder,v=$0(m,B),o.set(p.bufferView,[m,v]),n.debug(`[${Ye}] Decompressed ${B.byteLength} bytes.`)}for(const y in p.attributes){const b=e.jsonDoc.json.accessors[d.attributes[y]],x=m.GetAttributeByUniqueId(v,p.attributes[y]),D=tb(m,v,x,b);e.accessors[d.attributes[y]].setArray(D)}d.indices!==void 0&&e.accessors[d.indices].setArray(eb(m,v))}}finally{for(const[l,h]of Array.from(o.values()))this._decoderModule.destroy(l),this._decoderModule.destroy(h)}return this}read(e){return this}prewrite(e,n){if(!this._encoderModule)throw new Error(`[${Ye}] Please install extension dependency, "draco3d.encoder".`);const r=this.document.getLogger();r.debug(`[${Ye}] Compression options: ${JSON.stringify(this._encoderOptions)}`);const o=ob(this.document),l=new Map;let h="mesh";this._encoderOptions.quantizationVolume==="scene"&&(this.document.getRoot().listScenes().length!==1?r.warn(`[${Ye}]: quantizationVolume=scene requires exactly 1 scene.`):h=Xy(this.document.getRoot().listScenes().pop()));for(const d of Array.from(o.keys())){const p=o.get(d);if(!p)throw new Error("Unexpected primitive.");if(l.has(p)){l.set(p,l.get(p));continue}const m=d.getIndices(),v=e.jsonDoc.json.accessors;let y;try{y=sb(d,rn({},this._encoderOptions,{quantizationVolume:h}))}catch(D){if(D instanceof Bc){r.warn(`[${Ye}]: ${D.message} Skipping primitive compression.`);continue}throw D}l.set(p,y);const b=e.createAccessorDef(m);b.count=y.numIndices,e.accessorIndexMap.set(m,v.length),v.push(b),y.numVertices>65534&&se.getComponentSize(b.componentType)<=2?b.componentType=se.ComponentType.UNSIGNED_INT:y.numVertices>254&&se.getComponentSize(b.componentType)<=1&&(b.componentType=se.ComponentType.UNSIGNED_SHORT);for(const D of d.listSemantics()){const R=d.getAttribute(D);if(y.attributeIDs[D]===void 0)continue;const B=e.createAccessorDef(R);B.count=y.numVertices,e.accessorIndexMap.set(R,v.length),v.push(B)}const x=d.getAttribute("POSITION").getBuffer()||this.document.getRoot().listBuffers()[0];e.otherBufferViews.has(x)||e.otherBufferViews.set(x,[]),e.otherBufferViews.get(x).push(y.data)}return r.debug(`[${Ye}] Compressed ${o.size} primitives.`),e.extensionData[Ye]={primitiveHashMap:o,primitiveEncodingMap:l},this}write(e){const n=e.extensionData[Ye];for(const r of this.document.getRoot().listMeshes()){const o=e.jsonDoc.json.meshes[e.meshIndexMap.get(r)];for(let l=0;l<r.listPrimitives().length;l++){const h=r.listPrimitives()[l],d=o.primitives[l],p=n.primitiveHashMap.get(h);if(!p)continue;const m=n.primitiveEncodingMap.get(p);m&&(d.extensions=d.extensions||{},d.extensions[Ye]={bufferView:e.otherBufferViewsIndexMap.get(m.data),attributes:m.attributeIDs})}}if(!n.primitiveHashMap.size){const r=e.jsonDoc.json;r.extensionsUsed=(r.extensionsUsed||[]).filter(o=>o!==Ye),r.extensionsRequired=(r.extensionsRequired||[]).filter(o=>o!==Ye)}return this}}bg.EXTENSION_NAME=Ye;bg.EncoderMethod=pa;function ob(u){const e=u.getLogger(),n=new Set,r=new Set;let o=0,l=0;for(const y of u.getRoot().listMeshes())for(const b of y.listPrimitives())b.getIndices()?b.getMode()!==as.Mode.TRIANGLES?(r.add(b),l++):n.add(b):(r.add(b),o++);o>0&&e.warn(`[${Ye}] Skipping Draco compression of ${o} non-indexed primitives.`),l>0&&e.warn(`[${Ye}] Skipping Draco compression of ${l} non-TRIANGLES primitives.`);const h=u.getRoot().listAccessors(),d=new Map;for(let y=0;y<h.length;y++)d.set(h[y],y);const p=new Map,m=new Set,v=new Map;for(const y of Array.from(n)){let b=Sm(y,d);if(m.has(b)){v.set(y,b);continue}if(p.has(y.getIndices())){const x=y.getIndices(),D=x.clone();d.set(D,u.getRoot().listAccessors().length-1),y.swap(x,D)}for(const x of y.listAttributes())if(p.has(x)){const D=x.clone();d.set(D,u.getRoot().listAccessors().length-1),y.swap(x,D)}b=Sm(y,d),m.add(b),v.set(y,b),p.set(y.getIndices(),b);for(const x of y.listAttributes())p.set(x,b)}for(const y of Array.from(p.keys())){const b=new Set(y.listParents().map(x=>x.propertyType));if(b.size!==2||!b.has(k.PRIMITIVE)||!b.has(k.ROOT))throw new Error(`[${Ye}] Compressed accessors must only be used as indices or vertex attributes.`)}for(const y of Array.from(n)){const b=v.get(y),x=y.getIndices();if(p.get(x)!==b||y.listAttributes().some(D=>p.get(D)!==b))throw new Error(`[${Ye}] Draco primitives must share all, or no, accessors.`)}for(const y of Array.from(r)){const b=y.getIndices();if(p.has(b)||y.listAttributes().some(x=>p.has(x)))throw new Error(`[${Ye}] Accessor cannot be shared by compressed and uncompressed primitives.`)}return v}function Sm(u,e){const n=[],r=u.getIndices();n.push(e.get(r));for(const o of u.listAttributes())n.push(e.get(o));return n.sort().join("|")}class $s extends Ke{init(){this.extensionName=ti,this.propertyType="Light",this.parentTypes=[k.NODE]}getDefaults(){return Object.assign(super.getDefaults(),{color:[1,1,1],intensity:1,type:$s.Type.POINT,range:null,innerConeAngle:0,outerConeAngle:Math.PI/4})}getColor(){return this.get("color")}setColor(e){return this.set("color",e)}getIntensity(){return this.get("intensity")}setIntensity(e){return this.set("intensity",e)}getType(){return this.get("type")}setType(e){return this.set("type",e)}getRange(){return this.get("range")}setRange(e){return this.set("range",e)}getInnerConeAngle(){return this.get("innerConeAngle")}setInnerConeAngle(e){return this.set("innerConeAngle",e)}getOuterConeAngle(){return this.get("outerConeAngle")}setOuterConeAngle(e){return this.set("outerConeAngle",e)}}$s.EXTENSION_NAME=ti;$s.Type={POINT:"point",SPOT:"spot",DIRECTIONAL:"directional"};class lb extends je{constructor(...e){super(...e),this.extensionName=ti}createLight(e=""){return new $s(this.document.getGraph(),e)}read(e){const n=e.jsonDoc;if(!n.json.extensions||!n.json.extensions[ti])return this;const l=(n.json.extensions[ti].lights||[]).map(h=>{var d,p;const m=this.createLight().setName(h.name||"").setType(h.type);return h.color!==void 0&&m.setColor(h.color),h.intensity!==void 0&&m.setIntensity(h.intensity),h.range!==void 0&&m.setRange(h.range),((d=h.spot)==null?void 0:d.innerConeAngle)!==void 0&&m.setInnerConeAngle(h.spot.innerConeAngle),((p=h.spot)==null?void 0:p.outerConeAngle)!==void 0&&m.setOuterConeAngle(h.spot.outerConeAngle),m});return n.json.nodes.forEach((h,d)=>{if(!h.extensions||!h.extensions[ti])return;const p=h.extensions[ti];e.nodes[d].setExtension(ti,l[p.light])}),this}write(e){const n=e.jsonDoc;if(this.properties.size===0)return this;const r=[],o=new Map;for(const l of this.properties){const h=l,d={type:h.getType()};Ge.eq(h.getColor(),[1,1,1])||(d.color=h.getColor()),h.getIntensity()!==1&&(d.intensity=h.getIntensity()),h.getRange()!=null&&(d.range=h.getRange()),h.getName()&&(d.name=h.getName()),h.getType()===$s.Type.SPOT&&(d.spot={innerConeAngle:h.getInnerConeAngle(),outerConeAngle:h.getOuterConeAngle()}),r.push(d),o.set(h,r.length-1)}return this.document.getRoot().listNodes().forEach(l=>{const h=l.getExtension(ti);if(h){const d=e.nodeIndexMap.get(l),p=n.json.nodes[d];p.extensions=p.extensions||{},p.extensions[ti]={light:o.get(h)}}}),n.json.extensions=n.json.extensions||{},n.json.extensions[ti]={lights:r},this}}lb.EXTENSION_NAME=ti;const{R:ub,G:cb,B:hb}=ai;class xg extends Ke{init(){this.extensionName=ki,this.propertyType="Anisotropy",this.parentTypes=[k.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{anisotropyStrength:0,anisotropyRotation:0,anisotropyTexture:null,anisotropyTextureInfo:new Ue(this.graph,"anisotropyTextureInfo")})}getAnisotropyStrength(){return this.get("anisotropyStrength")}setAnisotropyStrength(e){return this.set("anisotropyStrength",e)}getAnisotropyRotation(){return this.get("anisotropyRotation")}setAnisotropyRotation(e){return this.set("anisotropyRotation",e)}getAnisotropyTexture(){return this.getRef("anisotropyTexture")}getAnisotropyTextureInfo(){return this.getRef("anisotropyTexture")?this.getRef("anisotropyTextureInfo"):null}setAnisotropyTexture(e){return this.setRef("anisotropyTexture",e,{channels:ub|cb|hb})}}xg.EXTENSION_NAME=ki;class db extends je{constructor(...e){super(...e),this.extensionName=ki,this.prereadTypes=[k.MESH],this.prewriteTypes=[k.MESH]}createAnisotropy(){return new xg(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){const n=e.jsonDoc,r=n.json.materials||[],o=n.json.textures||[];return r.forEach((l,h)=>{if(l.extensions&&l.extensions[ki]){const d=this.createAnisotropy();e.materials[h].setExtension(ki,d);const p=l.extensions[ki];if(p.anisotropyStrength!==void 0&&d.setAnisotropyStrength(p.anisotropyStrength),p.anisotropyRotation!==void 0&&d.setAnisotropyRotation(p.anisotropyRotation),p.anisotropyTexture!==void 0){const m=p.anisotropyTexture,v=e.textures[o[m.index].source];d.setAnisotropyTexture(v),e.setTextureInfo(d.getAnisotropyTextureInfo(),m)}}}),this}prewrite(e){const n=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(r=>{const o=r.getExtension(ki);if(o){const l=e.materialIndexMap.get(r),h=n.json.materials[l];h.extensions=h.extensions||{};const d=h.extensions[ki]={};if(o.getAnisotropyStrength()>0&&(d.anisotropyStrength=o.getAnisotropyStrength()),o.getAnisotropyRotation()!==0&&(d.anisotropyRotation=o.getAnisotropyRotation()),o.getAnisotropyTexture()){const p=o.getAnisotropyTexture(),m=o.getAnisotropyTextureInfo();d.anisotropyTexture=e.createTextureInfoDef(p,m)}}}),this}}db.EXTENSION_NAME=ki;const{R:Dm,G:Am,B:fb}=ai;class wg extends Ke{init(){this.extensionName=Fi,this.propertyType="Clearcoat",this.parentTypes=[k.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{clearcoatFactor:0,clearcoatTexture:null,clearcoatTextureInfo:new Ue(this.graph,"clearcoatTextureInfo"),clearcoatRoughnessFactor:0,clearcoatRoughnessTexture:null,clearcoatRoughnessTextureInfo:new Ue(this.graph,"clearcoatRoughnessTextureInfo"),clearcoatNormalScale:1,clearcoatNormalTexture:null,clearcoatNormalTextureInfo:new Ue(this.graph,"clearcoatNormalTextureInfo")})}getClearcoatFactor(){return this.get("clearcoatFactor")}setClearcoatFactor(e){return this.set("clearcoatFactor",e)}getClearcoatTexture(){return this.getRef("clearcoatTexture")}getClearcoatTextureInfo(){return this.getRef("clearcoatTexture")?this.getRef("clearcoatTextureInfo"):null}setClearcoatTexture(e){return this.setRef("clearcoatTexture",e,{channels:Dm})}getClearcoatRoughnessFactor(){return this.get("clearcoatRoughnessFactor")}setClearcoatRoughnessFactor(e){return this.set("clearcoatRoughnessFactor",e)}getClearcoatRoughnessTexture(){return this.getRef("clearcoatRoughnessTexture")}getClearcoatRoughnessTextureInfo(){return this.getRef("clearcoatRoughnessTexture")?this.getRef("clearcoatRoughnessTextureInfo"):null}setClearcoatRoughnessTexture(e){return this.setRef("clearcoatRoughnessTexture",e,{channels:Am})}getClearcoatNormalScale(){return this.get("clearcoatNormalScale")}setClearcoatNormalScale(e){return this.set("clearcoatNormalScale",e)}getClearcoatNormalTexture(){return this.getRef("clearcoatNormalTexture")}getClearcoatNormalTextureInfo(){return this.getRef("clearcoatNormalTexture")?this.getRef("clearcoatNormalTextureInfo"):null}setClearcoatNormalTexture(e){return this.setRef("clearcoatNormalTexture",e,{channels:Dm|Am|fb})}}wg.EXTENSION_NAME=Fi;class pb extends je{constructor(...e){super(...e),this.extensionName=Fi,this.prereadTypes=[k.MESH],this.prewriteTypes=[k.MESH]}createClearcoat(){return new wg(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){const n=e.jsonDoc,r=n.json.materials||[],o=n.json.textures||[];return r.forEach((l,h)=>{if(l.extensions&&l.extensions[Fi]){const d=this.createClearcoat();e.materials[h].setExtension(Fi,d);const p=l.extensions[Fi];if(p.clearcoatFactor!==void 0&&d.setClearcoatFactor(p.clearcoatFactor),p.clearcoatRoughnessFactor!==void 0&&d.setClearcoatRoughnessFactor(p.clearcoatRoughnessFactor),p.clearcoatTexture!==void 0){const m=p.clearcoatTexture,v=e.textures[o[m.index].source];d.setClearcoatTexture(v),e.setTextureInfo(d.getClearcoatTextureInfo(),m)}if(p.clearcoatRoughnessTexture!==void 0){const m=p.clearcoatRoughnessTexture,v=e.textures[o[m.index].source];d.setClearcoatRoughnessTexture(v),e.setTextureInfo(d.getClearcoatRoughnessTextureInfo(),m)}if(p.clearcoatNormalTexture!==void 0){const m=p.clearcoatNormalTexture,v=e.textures[o[m.index].source];d.setClearcoatNormalTexture(v),e.setTextureInfo(d.getClearcoatNormalTextureInfo(),m),m.scale!==void 0&&d.setClearcoatNormalScale(m.scale)}}}),this}prewrite(e){const n=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(r=>{const o=r.getExtension(Fi);if(o){const l=e.materialIndexMap.get(r),h=n.json.materials[l];h.extensions=h.extensions||{};const d=h.extensions[Fi]={clearcoatFactor:o.getClearcoatFactor(),clearcoatRoughnessFactor:o.getClearcoatRoughnessFactor()};if(o.getClearcoatTexture()){const p=o.getClearcoatTexture(),m=o.getClearcoatTextureInfo();d.clearcoatTexture=e.createTextureInfoDef(p,m)}if(o.getClearcoatRoughnessTexture()){const p=o.getClearcoatRoughnessTexture(),m=o.getClearcoatRoughnessTextureInfo();d.clearcoatRoughnessTexture=e.createTextureInfoDef(p,m)}if(o.getClearcoatNormalTexture()){const p=o.getClearcoatNormalTexture(),m=o.getClearcoatNormalTextureInfo();d.clearcoatNormalTexture=e.createTextureInfoDef(p,m),o.getClearcoatNormalScale()!==1&&(d.clearcoatNormalTexture.scale=o.getClearcoatNormalScale())}}}),this}}pb.EXTENSION_NAME=Fi;const{R:mb,G:gb,B:vb,A:_b}=ai;class Eg extends Ke{init(){this.extensionName=Yi,this.propertyType="DiffuseTransmission",this.parentTypes=[k.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{diffuseTransmissionFactor:0,diffuseTransmissionTexture:null,diffuseTransmissionTextureInfo:new Ue(this.graph,"diffuseTransmissionTextureInfo"),diffuseTransmissionColorFactor:[1,1,1],diffuseTransmissionColorTexture:null,diffuseTransmissionColorTextureInfo:new Ue(this.graph,"diffuseTransmissionColorTextureInfo")})}getDiffuseTransmissionFactor(){return this.get("diffuseTransmissionFactor")}setDiffuseTransmissionFactor(e){return this.set("diffuseTransmissionFactor",e)}getDiffuseTransmissionTexture(){return this.getRef("diffuseTransmissionTexture")}getDiffuseTransmissionTextureInfo(){return this.getRef("diffuseTransmissionTexture")?this.getRef("diffuseTransmissionTextureInfo"):null}setDiffuseTransmissionTexture(e){return this.setRef("diffuseTransmissionTexture",e,{channels:_b})}getDiffuseTransmissionColorFactor(){return this.get("diffuseTransmissionColorFactor")}setDiffuseTransmissionColorFactor(e){return this.set("diffuseTransmissionColorFactor",e)}getDiffuseTransmissionColorTexture(){return this.getRef("diffuseTransmissionColorTexture")}getDiffuseTransmissionColorTextureInfo(){return this.getRef("diffuseTransmissionColorTexture")?this.getRef("diffuseTransmissionColorTextureInfo"):null}setDiffuseTransmissionColorTexture(e){return this.setRef("diffuseTransmissionColorTexture",e,{channels:mb|gb|vb})}}Eg.EXTENSION_NAME=Yi;class yb extends je{constructor(...e){super(...e),this.extensionName=Yi}createDiffuseTransmission(){return new Eg(this.document.getGraph())}read(e){const n=e.jsonDoc,r=n.json.materials||[],o=n.json.textures||[];return r.forEach((l,h)=>{if(l.extensions&&l.extensions[Yi]){const d=this.createDiffuseTransmission();e.materials[h].setExtension(Yi,d);const p=l.extensions[Yi];if(p.diffuseTransmissionFactor!==void 0&&d.setDiffuseTransmissionFactor(p.diffuseTransmissionFactor),p.diffuseTransmissionColorFactor!==void 0&&d.setDiffuseTransmissionColorFactor(p.diffuseTransmissionColorFactor),p.diffuseTransmissionTexture!==void 0){const m=p.diffuseTransmissionTexture,v=e.textures[o[m.index].source];d.setDiffuseTransmissionTexture(v),e.setTextureInfo(d.getDiffuseTransmissionTextureInfo(),m)}if(p.diffuseTransmissionColorTexture!==void 0){const m=p.diffuseTransmissionColorTexture,v=e.textures[o[m.index].source];d.setDiffuseTransmissionColorTexture(v),e.setTextureInfo(d.getDiffuseTransmissionColorTextureInfo(),m)}}}),this}write(e){const n=e.jsonDoc;for(const r of this.document.getRoot().listMaterials()){const o=r.getExtension(Yi);if(!o)continue;const l=e.materialIndexMap.get(r),h=n.json.materials[l];h.extensions=h.extensions||{};const d=h.extensions[Yi]={diffuseTransmissionFactor:o.getDiffuseTransmissionFactor(),diffuseTransmissionColorFactor:o.getDiffuseTransmissionColorFactor()};if(o.getDiffuseTransmissionTexture()){const p=o.getDiffuseTransmissionTexture(),m=o.getDiffuseTransmissionTextureInfo();d.diffuseTransmissionTexture=e.createTextureInfoDef(p,m)}if(o.getDiffuseTransmissionColorTexture()){const p=o.getDiffuseTransmissionColorTexture(),m=o.getDiffuseTransmissionColorTextureInfo();d.diffuseTransmissionColorTexture=e.createTextureInfoDef(p,m)}}return this}}yb.EXTENSION_NAME=Yi;class Tg extends Ke{init(){this.extensionName=Xi,this.propertyType="Dispersion",this.parentTypes=[k.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{dispersion:0})}getDispersion(){return this.get("dispersion")}setDispersion(e){return this.set("dispersion",e)}}Tg.EXTENSION_NAME=Xi;class bb extends je{constructor(...e){super(...e),this.extensionName=Xi,this.prereadTypes=[k.MESH],this.prewriteTypes=[k.MESH]}createDispersion(){return new Tg(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){return(e.jsonDoc.json.materials||[]).forEach((o,l)=>{if(o.extensions&&o.extensions[Xi]){const h=this.createDispersion();e.materials[l].setExtension(Xi,h);const d=o.extensions[Xi];d.dispersion!==void 0&&h.setDispersion(d.dispersion)}}),this}prewrite(e){const n=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(r=>{const o=r.getExtension(Xi);if(o){const l=e.materialIndexMap.get(r),h=n.json.materials[l];h.extensions=h.extensions||{},h.extensions[Xi]={dispersion:o.getDispersion()}}}),this}}bb.EXTENSION_NAME=Xi;class Sg extends Ke{init(){this.extensionName=qi,this.propertyType="EmissiveStrength",this.parentTypes=[k.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{emissiveStrength:1})}getEmissiveStrength(){return this.get("emissiveStrength")}setEmissiveStrength(e){return this.set("emissiveStrength",e)}}Sg.EXTENSION_NAME=qi;class xb extends je{constructor(...e){super(...e),this.extensionName=qi,this.prereadTypes=[k.MESH],this.prewriteTypes=[k.MESH]}createEmissiveStrength(){return new Sg(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){return(e.jsonDoc.json.materials||[]).forEach((o,l)=>{if(o.extensions&&o.extensions[qi]){const h=this.createEmissiveStrength();e.materials[l].setExtension(qi,h);const d=o.extensions[qi];d.emissiveStrength!==void 0&&h.setEmissiveStrength(d.emissiveStrength)}}),this}prewrite(e){const n=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(r=>{const o=r.getExtension(qi);if(o){const l=e.materialIndexMap.get(r),h=n.json.materials[l];h.extensions=h.extensions||{},h.extensions[qi]={emissiveStrength:o.getEmissiveStrength()}}}),this}}xb.EXTENSION_NAME=qi;class Dg extends Ke{init(){this.extensionName=Wi,this.propertyType="IOR",this.parentTypes=[k.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{ior:1.5})}getIOR(){return this.get("ior")}setIOR(e){return this.set("ior",e)}}Dg.EXTENSION_NAME=Wi;class wb extends je{constructor(...e){super(...e),this.extensionName=Wi,this.prereadTypes=[k.MESH],this.prewriteTypes=[k.MESH]}createIOR(){return new Dg(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){return(e.jsonDoc.json.materials||[]).forEach((o,l)=>{if(o.extensions&&o.extensions[Wi]){const h=this.createIOR();e.materials[l].setExtension(Wi,h);const d=o.extensions[Wi];d.ior!==void 0&&h.setIOR(d.ior)}}),this}prewrite(e){const n=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(r=>{const o=r.getExtension(Wi);if(o){const l=e.materialIndexMap.get(r),h=n.json.materials[l];h.extensions=h.extensions||{},h.extensions[Wi]={ior:o.getIOR()}}}),this}}wb.EXTENSION_NAME=Wi;const{R:Eb,G:Tb}=ai;class Ag extends Ke{init(){this.extensionName=Zi,this.propertyType="Iridescence",this.parentTypes=[k.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{iridescenceFactor:0,iridescenceTexture:null,iridescenceTextureInfo:new Ue(this.graph,"iridescenceTextureInfo"),iridescenceIOR:1.3,iridescenceThicknessMinimum:100,iridescenceThicknessMaximum:400,iridescenceThicknessTexture:null,iridescenceThicknessTextureInfo:new Ue(this.graph,"iridescenceThicknessTextureInfo")})}getIridescenceFactor(){return this.get("iridescenceFactor")}setIridescenceFactor(e){return this.set("iridescenceFactor",e)}getIridescenceTexture(){return this.getRef("iridescenceTexture")}getIridescenceTextureInfo(){return this.getRef("iridescenceTexture")?this.getRef("iridescenceTextureInfo"):null}setIridescenceTexture(e){return this.setRef("iridescenceTexture",e,{channels:Eb})}getIridescenceIOR(){return this.get("iridescenceIOR")}setIridescenceIOR(e){return this.set("iridescenceIOR",e)}getIridescenceThicknessMinimum(){return this.get("iridescenceThicknessMinimum")}setIridescenceThicknessMinimum(e){return this.set("iridescenceThicknessMinimum",e)}getIridescenceThicknessMaximum(){return this.get("iridescenceThicknessMaximum")}setIridescenceThicknessMaximum(e){return this.set("iridescenceThicknessMaximum",e)}getIridescenceThicknessTexture(){return this.getRef("iridescenceThicknessTexture")}getIridescenceThicknessTextureInfo(){return this.getRef("iridescenceThicknessTexture")?this.getRef("iridescenceThicknessTextureInfo"):null}setIridescenceThicknessTexture(e){return this.setRef("iridescenceThicknessTexture",e,{channels:Tb})}}Ag.EXTENSION_NAME=Zi;class Sb extends je{constructor(...e){super(...e),this.extensionName=Zi,this.prereadTypes=[k.MESH],this.prewriteTypes=[k.MESH]}createIridescence(){return new Ag(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){const n=e.jsonDoc,r=n.json.materials||[],o=n.json.textures||[];return r.forEach((l,h)=>{if(l.extensions&&l.extensions[Zi]){const d=this.createIridescence();e.materials[h].setExtension(Zi,d);const p=l.extensions[Zi];if(p.iridescenceFactor!==void 0&&d.setIridescenceFactor(p.iridescenceFactor),p.iridescenceIor!==void 0&&d.setIridescenceIOR(p.iridescenceIor),p.iridescenceThicknessMinimum!==void 0&&d.setIridescenceThicknessMinimum(p.iridescenceThicknessMinimum),p.iridescenceThicknessMaximum!==void 0&&d.setIridescenceThicknessMaximum(p.iridescenceThicknessMaximum),p.iridescenceTexture!==void 0){const m=p.iridescenceTexture,v=e.textures[o[m.index].source];d.setIridescenceTexture(v),e.setTextureInfo(d.getIridescenceTextureInfo(),m)}if(p.iridescenceThicknessTexture!==void 0){const m=p.iridescenceThicknessTexture,v=e.textures[o[m.index].source];d.setIridescenceThicknessTexture(v),e.setTextureInfo(d.getIridescenceThicknessTextureInfo(),m)}}}),this}prewrite(e){const n=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(r=>{const o=r.getExtension(Zi);if(o){const l=e.materialIndexMap.get(r),h=n.json.materials[l];h.extensions=h.extensions||{};const d=h.extensions[Zi]={};if(o.getIridescenceFactor()>0&&(d.iridescenceFactor=o.getIridescenceFactor()),o.getIridescenceIOR()!==1.3&&(d.iridescenceIor=o.getIridescenceIOR()),o.getIridescenceThicknessMinimum()!==100&&(d.iridescenceThicknessMinimum=o.getIridescenceThicknessMinimum()),o.getIridescenceThicknessMaximum()!==400&&(d.iridescenceThicknessMaximum=o.getIridescenceThicknessMaximum()),o.getIridescenceTexture()){const p=o.getIridescenceTexture(),m=o.getIridescenceTextureInfo();d.iridescenceTexture=e.createTextureInfoDef(p,m)}if(o.getIridescenceThicknessTexture()){const p=o.getIridescenceThicknessTexture(),m=o.getIridescenceThicknessTextureInfo();d.iridescenceThicknessTexture=e.createTextureInfoDef(p,m)}}}),this}}Sb.EXTENSION_NAME=Zi;const{R:Cm,G:Rm,B:Om,A:Nm}=ai;class Cg extends Ke{init(){this.extensionName=Ki,this.propertyType="PBRSpecularGlossiness",this.parentTypes=[k.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{diffuseFactor:[1,1,1,1],diffuseTexture:null,diffuseTextureInfo:new Ue(this.graph,"diffuseTextureInfo"),specularFactor:[1,1,1],glossinessFactor:1,specularGlossinessTexture:null,specularGlossinessTextureInfo:new Ue(this.graph,"specularGlossinessTextureInfo")})}getDiffuseFactor(){return this.get("diffuseFactor")}setDiffuseFactor(e){return this.set("diffuseFactor",e)}getDiffuseTexture(){return this.getRef("diffuseTexture")}getDiffuseTextureInfo(){return this.getRef("diffuseTexture")?this.getRef("diffuseTextureInfo"):null}setDiffuseTexture(e){return this.setRef("diffuseTexture",e,{channels:Cm|Rm|Om|Nm,isColor:!0})}getSpecularFactor(){return this.get("specularFactor")}setSpecularFactor(e){return this.set("specularFactor",e)}getGlossinessFactor(){return this.get("glossinessFactor")}setGlossinessFactor(e){return this.set("glossinessFactor",e)}getSpecularGlossinessTexture(){return this.getRef("specularGlossinessTexture")}getSpecularGlossinessTextureInfo(){return this.getRef("specularGlossinessTexture")?this.getRef("specularGlossinessTextureInfo"):null}setSpecularGlossinessTexture(e){return this.setRef("specularGlossinessTexture",e,{channels:Cm|Rm|Om|Nm})}}Cg.EXTENSION_NAME=Ki;class Db extends je{constructor(...e){super(...e),this.extensionName=Ki,this.prereadTypes=[k.MESH],this.prewriteTypes=[k.MESH]}createPBRSpecularGlossiness(){return new Cg(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){const n=e.jsonDoc,r=n.json.materials||[],o=n.json.textures||[];return r.forEach((l,h)=>{if(l.extensions&&l.extensions[Ki]){const d=this.createPBRSpecularGlossiness();e.materials[h].setExtension(Ki,d);const p=l.extensions[Ki];if(p.diffuseFactor!==void 0&&d.setDiffuseFactor(p.diffuseFactor),p.specularFactor!==void 0&&d.setSpecularFactor(p.specularFactor),p.glossinessFactor!==void 0&&d.setGlossinessFactor(p.glossinessFactor),p.diffuseTexture!==void 0){const m=p.diffuseTexture,v=e.textures[o[m.index].source];d.setDiffuseTexture(v),e.setTextureInfo(d.getDiffuseTextureInfo(),m)}if(p.specularGlossinessTexture!==void 0){const m=p.specularGlossinessTexture,v=e.textures[o[m.index].source];d.setSpecularGlossinessTexture(v),e.setTextureInfo(d.getSpecularGlossinessTextureInfo(),m)}}}),this}prewrite(e){const n=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(r=>{const o=r.getExtension(Ki);if(o){const l=e.materialIndexMap.get(r),h=n.json.materials[l];h.extensions=h.extensions||{};const d=h.extensions[Ki]={diffuseFactor:o.getDiffuseFactor(),specularFactor:o.getSpecularFactor(),glossinessFactor:o.getGlossinessFactor()};if(o.getDiffuseTexture()){const p=o.getDiffuseTexture(),m=o.getDiffuseTextureInfo();d.diffuseTexture=e.createTextureInfoDef(p,m)}if(o.getSpecularGlossinessTexture()){const p=o.getSpecularGlossinessTexture(),m=o.getSpecularGlossinessTextureInfo();d.specularGlossinessTexture=e.createTextureInfoDef(p,m)}}}),this}}Db.EXTENSION_NAME=Ki;const{R:Ab,G:Cb,B:Rb,A:Ob}=ai;class Rg extends Ke{init(){this.extensionName=Qi,this.propertyType="Sheen",this.parentTypes=[k.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{sheenColorFactor:[0,0,0],sheenColorTexture:null,sheenColorTextureInfo:new Ue(this.graph,"sheenColorTextureInfo"),sheenRoughnessFactor:0,sheenRoughnessTexture:null,sheenRoughnessTextureInfo:new Ue(this.graph,"sheenRoughnessTextureInfo")})}getSheenColorFactor(){return this.get("sheenColorFactor")}setSheenColorFactor(e){return this.set("sheenColorFactor",e)}getSheenColorTexture(){return this.getRef("sheenColorTexture")}getSheenColorTextureInfo(){return this.getRef("sheenColorTexture")?this.getRef("sheenColorTextureInfo"):null}setSheenColorTexture(e){return this.setRef("sheenColorTexture",e,{channels:Ab|Cb|Rb,isColor:!0})}getSheenRoughnessFactor(){return this.get("sheenRoughnessFactor")}setSheenRoughnessFactor(e){return this.set("sheenRoughnessFactor",e)}getSheenRoughnessTexture(){return this.getRef("sheenRoughnessTexture")}getSheenRoughnessTextureInfo(){return this.getRef("sheenRoughnessTexture")?this.getRef("sheenRoughnessTextureInfo"):null}setSheenRoughnessTexture(e){return this.setRef("sheenRoughnessTexture",e,{channels:Ob})}}Rg.EXTENSION_NAME=Qi;class Nb extends je{constructor(...e){super(...e),this.extensionName=Qi,this.prereadTypes=[k.MESH],this.prewriteTypes=[k.MESH]}createSheen(){return new Rg(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){const n=e.jsonDoc,r=n.json.materials||[],o=n.json.textures||[];return r.forEach((l,h)=>{if(l.extensions&&l.extensions[Qi]){const d=this.createSheen();e.materials[h].setExtension(Qi,d);const p=l.extensions[Qi];if(p.sheenColorFactor!==void 0&&d.setSheenColorFactor(p.sheenColorFactor),p.sheenRoughnessFactor!==void 0&&d.setSheenRoughnessFactor(p.sheenRoughnessFactor),p.sheenColorTexture!==void 0){const m=p.sheenColorTexture,v=e.textures[o[m.index].source];d.setSheenColorTexture(v),e.setTextureInfo(d.getSheenColorTextureInfo(),m)}if(p.sheenRoughnessTexture!==void 0){const m=p.sheenRoughnessTexture,v=e.textures[o[m.index].source];d.setSheenRoughnessTexture(v),e.setTextureInfo(d.getSheenRoughnessTextureInfo(),m)}}}),this}prewrite(e){const n=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(r=>{const o=r.getExtension(Qi);if(o){const l=e.materialIndexMap.get(r),h=n.json.materials[l];h.extensions=h.extensions||{};const d=h.extensions[Qi]={sheenColorFactor:o.getSheenColorFactor(),sheenRoughnessFactor:o.getSheenRoughnessFactor()};if(o.getSheenColorTexture()){const p=o.getSheenColorTexture(),m=o.getSheenColorTextureInfo();d.sheenColorTexture=e.createTextureInfoDef(p,m)}if(o.getSheenRoughnessTexture()){const p=o.getSheenRoughnessTexture(),m=o.getSheenRoughnessTextureInfo();d.sheenRoughnessTexture=e.createTextureInfoDef(p,m)}}}),this}}Nb.EXTENSION_NAME=Qi;const{R:Mb,G:zb,B:Ib,A:Gb}=ai;class Og extends Ke{init(){this.extensionName=Ji,this.propertyType="Specular",this.parentTypes=[k.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{specularFactor:1,specularTexture:null,specularTextureInfo:new Ue(this.graph,"specularTextureInfo"),specularColorFactor:[1,1,1],specularColorTexture:null,specularColorTextureInfo:new Ue(this.graph,"specularColorTextureInfo")})}getSpecularFactor(){return this.get("specularFactor")}setSpecularFactor(e){return this.set("specularFactor",e)}getSpecularColorFactor(){return this.get("specularColorFactor")}setSpecularColorFactor(e){return this.set("specularColorFactor",e)}getSpecularTexture(){return this.getRef("specularTexture")}getSpecularTextureInfo(){return this.getRef("specularTexture")?this.getRef("specularTextureInfo"):null}setSpecularTexture(e){return this.setRef("specularTexture",e,{channels:Gb})}getSpecularColorTexture(){return this.getRef("specularColorTexture")}getSpecularColorTextureInfo(){return this.getRef("specularColorTexture")?this.getRef("specularColorTextureInfo"):null}setSpecularColorTexture(e){return this.setRef("specularColorTexture",e,{channels:Mb|zb|Ib,isColor:!0})}}Og.EXTENSION_NAME=Ji;class Lb extends je{constructor(...e){super(...e),this.extensionName=Ji,this.prereadTypes=[k.MESH],this.prewriteTypes=[k.MESH]}createSpecular(){return new Og(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){const n=e.jsonDoc,r=n.json.materials||[],o=n.json.textures||[];return r.forEach((l,h)=>{if(l.extensions&&l.extensions[Ji]){const d=this.createSpecular();e.materials[h].setExtension(Ji,d);const p=l.extensions[Ji];if(p.specularFactor!==void 0&&d.setSpecularFactor(p.specularFactor),p.specularColorFactor!==void 0&&d.setSpecularColorFactor(p.specularColorFactor),p.specularTexture!==void 0){const m=p.specularTexture,v=e.textures[o[m.index].source];d.setSpecularTexture(v),e.setTextureInfo(d.getSpecularTextureInfo(),m)}if(p.specularColorTexture!==void 0){const m=p.specularColorTexture,v=e.textures[o[m.index].source];d.setSpecularColorTexture(v),e.setTextureInfo(d.getSpecularColorTextureInfo(),m)}}}),this}prewrite(e){const n=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(r=>{const o=r.getExtension(Ji);if(o){const l=e.materialIndexMap.get(r),h=n.json.materials[l];h.extensions=h.extensions||{};const d=h.extensions[Ji]={};if(o.getSpecularFactor()!==1&&(d.specularFactor=o.getSpecularFactor()),Ge.eq(o.getSpecularColorFactor(),[1,1,1])||(d.specularColorFactor=o.getSpecularColorFactor()),o.getSpecularTexture()){const p=o.getSpecularTexture(),m=o.getSpecularTextureInfo();d.specularTexture=e.createTextureInfoDef(p,m)}if(o.getSpecularColorTexture()){const p=o.getSpecularColorTexture(),m=o.getSpecularColorTextureInfo();d.specularColorTexture=e.createTextureInfoDef(p,m)}}}),this}}Lb.EXTENSION_NAME=Ji;const{R:Ub}=ai;class Ng extends Ke{init(){this.extensionName=$i,this.propertyType="Transmission",this.parentTypes=[k.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{transmissionFactor:0,transmissionTexture:null,transmissionTextureInfo:new Ue(this.graph,"transmissionTextureInfo")})}getTransmissionFactor(){return this.get("transmissionFactor")}setTransmissionFactor(e){return this.set("transmissionFactor",e)}getTransmissionTexture(){return this.getRef("transmissionTexture")}getTransmissionTextureInfo(){return this.getRef("transmissionTexture")?this.getRef("transmissionTextureInfo"):null}setTransmissionTexture(e){return this.setRef("transmissionTexture",e,{channels:Ub})}}Ng.EXTENSION_NAME=$i;class Vb extends je{constructor(...e){super(...e),this.extensionName=$i,this.prereadTypes=[k.MESH],this.prewriteTypes=[k.MESH]}createTransmission(){return new Ng(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){const n=e.jsonDoc,r=n.json.materials||[],o=n.json.textures||[];return r.forEach((l,h)=>{if(l.extensions&&l.extensions[$i]){const d=this.createTransmission();e.materials[h].setExtension($i,d);const p=l.extensions[$i];if(p.transmissionFactor!==void 0&&d.setTransmissionFactor(p.transmissionFactor),p.transmissionTexture!==void 0){const m=p.transmissionTexture,v=e.textures[o[m.index].source];d.setTransmissionTexture(v),e.setTextureInfo(d.getTransmissionTextureInfo(),m)}}}),this}prewrite(e){const n=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(r=>{const o=r.getExtension($i);if(o){const l=e.materialIndexMap.get(r),h=n.json.materials[l];h.extensions=h.extensions||{};const d=h.extensions[$i]={transmissionFactor:o.getTransmissionFactor()};if(o.getTransmissionTexture()){const p=o.getTransmissionTexture(),m=o.getTransmissionTextureInfo();d.transmissionTexture=e.createTextureInfoDef(p,m)}}}),this}}Vb.EXTENSION_NAME=$i;class Mg extends Ke{init(){this.extensionName=Mn,this.propertyType="Unlit",this.parentTypes=[k.MATERIAL]}}Mg.EXTENSION_NAME=Mn;class Bb extends je{constructor(...e){super(...e),this.extensionName=Mn,this.prereadTypes=[k.MESH],this.prewriteTypes=[k.MESH]}createUnlit(){return new Mg(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){return(e.jsonDoc.json.materials||[]).forEach((r,o)=>{r.extensions&&r.extensions[Mn]&&e.materials[o].setExtension(Mn,this.createUnlit())}),this}prewrite(e){const n=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(r=>{if(r.getExtension(Mn)){const o=e.materialIndexMap.get(r),l=n.json.materials[o];l.extensions=l.extensions||{},l.extensions[Mn]={}}}),this}}Bb.EXTENSION_NAME=Mn;class zg extends Ke{init(){this.extensionName=bt,this.propertyType="Mapping",this.parentTypes=["MappingList"]}getDefaults(){return Object.assign(super.getDefaults(),{material:null,variants:new He})}getMaterial(){return this.getRef("material")}setMaterial(e){return this.setRef("material",e)}addVariant(e){return this.addRef("variants",e)}removeVariant(e){return this.removeRef("variants",e)}listVariants(){return this.listRefs("variants")}}zg.EXTENSION_NAME=bt;class Ig extends Ke{init(){this.extensionName=bt,this.propertyType="MappingList",this.parentTypes=[k.PRIMITIVE]}getDefaults(){return Object.assign(super.getDefaults(),{mappings:new He})}addMapping(e){return this.addRef("mappings",e)}removeMapping(e){return this.removeRef("mappings",e)}listMappings(){return this.listRefs("mappings")}}Ig.EXTENSION_NAME=bt;class Hc extends Ke{init(){this.extensionName=bt,this.propertyType="Variant",this.parentTypes=["MappingList"]}}Hc.EXTENSION_NAME=bt;class Hb extends je{constructor(...e){super(...e),this.extensionName=bt}createMappingList(){return new Ig(this.document.getGraph())}createVariant(e=""){return new Hc(this.document.getGraph(),e)}createMapping(){return new zg(this.document.getGraph())}listVariants(){return Array.from(this.properties).filter(e=>e instanceof Hc)}read(e){const n=e.jsonDoc;if(!n.json.extensions||!n.json.extensions[bt])return this;const l=(n.json.extensions[bt].variants||[]).map(d=>this.createVariant().setName(d.name||""));return(n.json.meshes||[]).forEach((d,p)=>{const m=e.meshes[p];(d.primitives||[]).forEach((y,b)=>{if(!y.extensions||!y.extensions[bt])return;const x=this.createMappingList(),D=y.extensions[bt];for(const R of D.mappings){const B=this.createMapping();R.material!==void 0&&B.setMaterial(e.materials[R.material]);for(const w of R.variants||[])B.addVariant(l[w]);x.addMapping(B)}m.listPrimitives()[b].setExtension(bt,x)})}),this}write(e){const n=e.jsonDoc,r=this.listVariants();if(!r.length)return this;const o=[],l=new Map;for(const h of r)l.set(h,o.length),o.push(e.createPropertyDef(h));for(const h of this.document.getRoot().listMeshes()){const d=e.meshIndexMap.get(h);h.listPrimitives().forEach((p,m)=>{const v=p.getExtension(bt);if(!v)return;const y=e.jsonDoc.json.meshes[d].primitives[m],b=v.listMappings().map(x=>{const D=e.createPropertyDef(x),R=x.getMaterial();return R&&(D.material=e.materialIndexMap.get(R)),D.variants=x.listVariants().map(B=>l.get(B)),D});y.extensions=y.extensions||{},y.extensions[bt]={mappings:b}})}return n.json.extensions=n.json.extensions||{},n.json.extensions[bt]={variants:o},this}}Hb.EXTENSION_NAME=bt;const{G:Pb}=ai;class Gg extends Ke{init(){this.extensionName=en,this.propertyType="Volume",this.parentTypes=[k.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{thicknessFactor:0,thicknessTexture:null,thicknessTextureInfo:new Ue(this.graph,"thicknessTexture"),attenuationDistance:1/0,attenuationColor:[1,1,1]})}getThicknessFactor(){return this.get("thicknessFactor")}setThicknessFactor(e){return this.set("thicknessFactor",e)}getThicknessTexture(){return this.getRef("thicknessTexture")}getThicknessTextureInfo(){return this.getRef("thicknessTexture")?this.getRef("thicknessTextureInfo"):null}setThicknessTexture(e){return this.setRef("thicknessTexture",e,{channels:Pb})}getAttenuationDistance(){return this.get("attenuationDistance")}setAttenuationDistance(e){return this.set("attenuationDistance",e)}getAttenuationColor(){return this.get("attenuationColor")}setAttenuationColor(e){return this.set("attenuationColor",e)}}Gg.EXTENSION_NAME=en;class jb extends je{constructor(...e){super(...e),this.extensionName=en,this.prereadTypes=[k.MESH],this.prewriteTypes=[k.MESH]}createVolume(){return new Gg(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){const n=e.jsonDoc,r=n.json.materials||[],o=n.json.textures||[];return r.forEach((l,h)=>{if(l.extensions&&l.extensions[en]){const d=this.createVolume();e.materials[h].setExtension(en,d);const p=l.extensions[en];if(p.thicknessFactor!==void 0&&d.setThicknessFactor(p.thicknessFactor),p.attenuationDistance!==void 0&&d.setAttenuationDistance(p.attenuationDistance),p.attenuationColor!==void 0&&d.setAttenuationColor(p.attenuationColor),p.thicknessTexture!==void 0){const m=p.thicknessTexture,v=e.textures[o[m.index].source];d.setThicknessTexture(v),e.setTextureInfo(d.getThicknessTextureInfo(),m)}}}),this}prewrite(e){const n=e.jsonDoc;return this.document.getRoot().listMaterials().forEach(r=>{const o=r.getExtension(en);if(o){const l=e.materialIndexMap.get(r),h=n.json.materials[l];h.extensions=h.extensions||{};const d=h.extensions[en]={};if(o.getThicknessFactor()>0&&(d.thicknessFactor=o.getThicknessFactor()),Number.isFinite(o.getAttenuationDistance())&&(d.attenuationDistance=o.getAttenuationDistance()),Ge.eq(o.getAttenuationColor(),[1,1,1])||(d.attenuationColor=o.getAttenuationColor()),o.getThicknessTexture()){const p=o.getThicknessTexture(),m=o.getThicknessTextureInfo();d.thicknessTexture=e.createTextureInfoDef(p,m)}}}),this}}jb.EXTENSION_NAME=en;class Lg extends je{constructor(...e){super(...e),this.extensionName=fg}read(e){return this}write(e){return this}}Lg.EXTENSION_NAME=fg;class kb{match(e){return e[0]===171&&e[1]===75&&e[2]===84&&e[3]===88&&e[4]===32&&e[5]===50&&e[6]===48&&e[7]===187&&e[8]===13&&e[9]===10&&e[10]===26&&e[11]===10}getSize(e){const n=Cc(e);return[n.pixelWidth,n.pixelHeight]}getChannels(e){const r=Cc(e).dataFormatDescriptor[0];if(r.colorModel===N0)return r.samples.length===2&&(r.samples[1].channelType&15)===15?4:3;if(r.colorModel===M0)return(r.samples[0].channelType&15)===3?4:3;throw new Error(`Unexpected KTX2 colorModel, "${r.colorModel}".`)}getVRAMByteLength(e){const n=Cc(e),r=this.getChannels(e)>3;let o=0;for(let l=0;l<n.levels.length;l++){const h=n.levels[l];if(h.uncompressedByteLength)o+=h.uncompressedByteLength;else{const d=Math.max(1,Math.floor(n.pixelWidth/Math.pow(2,l))),p=Math.max(1,Math.floor(n.pixelHeight/Math.pow(2,l))),m=r?16:8;o+=d/4*(p/4)*m}}return o}}class Fb extends je{constructor(...e){super(...e),this.extensionName=oa,this.prereadTypes=[k.TEXTURE]}static register(){Ti.registerFormat("image/ktx2",new kb)}preread(e){return e.jsonDoc.json.textures.forEach(n=>{if(n.extensions&&n.extensions[oa]){const r=n.extensions[oa];n.source=r.source}}),this}read(e){return this}write(e){const n=e.jsonDoc;return this.document.getRoot().listTextures().forEach(r=>{if(r.getMimeType()==="image/ktx2"){const o=e.imageIndexMap.get(r);n.json.textures.forEach(l=>{l.source===o&&(l.extensions=l.extensions||{},l.extensions[oa]={source:l.source},delete l.source)})}}),this}}Fb.EXTENSION_NAME=oa;class Ug extends Ke{init(){this.extensionName=tn,this.propertyType="Transform",this.parentTypes=[k.TEXTURE_INFO]}getDefaults(){return Object.assign(super.getDefaults(),{offset:[0,0],rotation:0,scale:[1,1],texCoord:null})}getOffset(){return this.get("offset")}setOffset(e){return this.set("offset",e)}getRotation(){return this.get("rotation")}setRotation(e){return this.set("rotation",e)}getScale(){return this.get("scale")}setScale(e){return this.set("scale",e)}getTexCoord(){return this.get("texCoord")}setTexCoord(e){return this.set("texCoord",e)}}Ug.EXTENSION_NAME=tn;class Yb extends je{constructor(...e){super(...e),this.extensionName=tn}createTransform(){return new Ug(this.document.getGraph())}read(e){for(const[n,r]of Array.from(e.textureInfos.entries())){if(!r.extensions||!r.extensions[tn])continue;const o=this.createTransform(),l=r.extensions[tn];l.offset!==void 0&&o.setOffset(l.offset),l.rotation!==void 0&&o.setRotation(l.rotation),l.scale!==void 0&&o.setScale(l.scale),l.texCoord!==void 0&&o.setTexCoord(l.texCoord),n.setExtension(tn,o)}return this}write(e){const n=Array.from(e.textureInfoDefMap.entries());for(const[r,o]of n){const l=r.getExtension(tn);if(!l)continue;o.extensions=o.extensions||{};const h={},d=Ge.eq;d(l.getOffset(),[0,0])||(h.offset=l.getOffset()),l.getRotation()!==0&&(h.rotation=l.getRotation()),d(l.getScale(),[1,1])||(h.scale=l.getScale()),l.getTexCoord()!=null&&(h.texCoord=l.getTexCoord()),o.extensions[tn]=h}return this}}Yb.EXTENSION_NAME=tn;const Xb=[k.ROOT,k.SCENE,k.NODE,k.MESH,k.MATERIAL,k.TEXTURE,k.ANIMATION];class Vg extends Ke{init(){this.extensionName=ii,this.propertyType="Packet",this.parentTypes=Xb}getDefaults(){return Object.assign(super.getDefaults(),{context:{},properties:{}})}getContext(){return this.get("context")}setContext(e){return this.set("context",rn({},e))}listProperties(){return Object.keys(this.get("properties"))}getProperty(e){const n=this.get("properties");return e in n?n[e]:null}setProperty(e,n){this._assertContext(e);const r=rn({},this.get("properties"));return n?r[e]=n:delete r[e],this.set("properties",r)}toJSONLD(){const e=Rc(this.get("context")),n=Rc(this.get("properties"));return rn({"@context":e},n)}fromJSONLD(e){e=Rc(e);const n=e["@context"];return n&&this.set("context",n),delete e["@context"],this.set("properties",e)}_assertContext(e){if(!(e.split(":")[0]in this.get("context")))throw new Error(`${ii}: Missing context for term, "${e}".`)}}Vg.EXTENSION_NAME=ii;function Rc(u){return JSON.parse(JSON.stringify(u))}class qb extends je{constructor(...e){super(...e),this.extensionName=ii}createPacket(){return new Vg(this.document.getGraph())}listPackets(){return Array.from(this.properties)}read(e){var n;const r=(n=e.jsonDoc.json.extensions)==null?void 0:n[ii];if(!r||!r.packets)return this;const o=e.jsonDoc.json,l=this.document.getRoot(),h=r.packets.map(m=>this.createPacket().fromJSONLD(m)),d=[[o.asset],o.scenes,o.nodes,o.meshes,o.materials,o.images,o.animations],p=[[l],l.listScenes(),l.listNodes(),l.listMeshes(),l.listMaterials(),l.listTextures(),l.listAnimations()];for(let m=0;m<d.length;m++){const v=d[m]||[];for(let y=0;y<v.length;y++){const b=v[y];if(b.extensions&&b.extensions[ii]){const x=b.extensions[ii];p[m][y].setExtension(ii,h[x.packet])}}}return this}write(e){const{json:n}=e.jsonDoc,r=[];for(const o of this.properties){r.push(o.toJSONLD());for(const l of o.listParents()){let h;switch(l.propertyType){case k.ROOT:h=n.asset;break;case k.SCENE:h=n.scenes[e.sceneIndexMap.get(l)];break;case k.NODE:h=n.nodes[e.nodeIndexMap.get(l)];break;case k.MESH:h=n.meshes[e.meshIndexMap.get(l)];break;case k.MATERIAL:h=n.materials[e.materialIndexMap.get(l)];break;case k.TEXTURE:h=n.images[e.imageIndexMap.get(l)];break;case k.ANIMATION:h=n.animations[e.animationIndexMap.get(l)];break;default:h=null,this.document.getLogger().warn(`[${ii}]: Unsupported parent property, "${l.propertyType}"`);break}h&&(h.extensions=h.extensions||{},h.extensions[ii]={packet:r.length-1})}}return r.length>0&&(n.extensions=n.extensions||{},n.extensions[ii]={packets:r}),this}}qb.EXTENSION_NAME=ii;class Wb{device;vertexBuffer;indexBuffer;indexCount=0;constructor(e){this.device=e}async load(e){const n=new T0().registerExtensions([Lg]),r=await fetch(e).then(x=>x.arrayBuffer()),o=new Uint8Array(r),h=(await n.readBinary(o)).getRoot().listMeshes()[0].listPrimitives()[0],d=h.getAttribute("POSITION").getArray(),p=h.getAttribute("COLOR_0")?.getArray(),m=h.getAttribute("NORMAL")?.getArray(),v=h.getIndices().getArray(),y=d.length/3;this.indexCount=v.length;const b=new Float32Array(y*9);for(let x=0;x<y;x++)b[x*9+0]=d[x*3+0],b[x*9+1]=d[x*3+1],b[x*9+2]=d[x*3+2],p?(b[x*9+3]=p[x*3+0],b[x*9+4]=p[x*3+1],b[x*9+5]=p[x*3+2]):(b[x*9+3]=1,b[x*9+4]=1,b[x*9+5]=1),m?(b[x*9+6]=m[x*3+0],b[x*9+7]=m[x*3+1],b[x*9+8]=m[x*3+2]):(b[x*9+6]=0,b[x*9+7]=0,b[x*9+8]=1);this.vertexBuffer=this.device.createBuffer({label:"VertexBuffer",size:b.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST}),this.device.queue.writeBuffer(this.vertexBuffer,0,b),this.indexBuffer=this.device.createBuffer({label:"IndexBuffer",size:v.byteLength,usage:GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST}),this.device.queue.writeBuffer(this.indexBuffer,0,v)}}var Oc=1e-6,Ko=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var u=0,e=arguments.length;e--;)u+=arguments[e]*arguments[e];return Math.sqrt(u)});function Zb(){var u=new Ko(9);return Ko!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u}function Kb(u,e){return u[0]=e[0],u[1]=e[1],u[2]=e[2],u[3]=e[4],u[4]=e[5],u[5]=e[6],u[6]=e[8],u[7]=e[9],u[8]=e[10],u}function Qb(u,e){if(u===e){var n=e[1],r=e[2],o=e[5];u[1]=e[3],u[2]=e[6],u[3]=n,u[5]=e[7],u[6]=r,u[7]=o}else u[0]=e[0],u[1]=e[3],u[2]=e[6],u[3]=e[1],u[4]=e[4],u[5]=e[7],u[6]=e[2],u[7]=e[5],u[8]=e[8];return u}function Jb(u,e){var n=e[0],r=e[1],o=e[2],l=e[3],h=e[4],d=e[5],p=e[6],m=e[7],v=e[8],y=v*h-d*m,b=-v*l+d*p,x=m*l-h*p,D=n*y+r*b+o*x;return D?(D=1/D,u[0]=y*D,u[1]=(-v*r+o*m)*D,u[2]=(d*r-o*h)*D,u[3]=b*D,u[4]=(v*n-o*p)*D,u[5]=(-d*n+o*l)*D,u[6]=x*D,u[7]=(-m*n+r*p)*D,u[8]=(h*n-r*l)*D,u):null}function ua(){var u=new Ko(16);return Ko!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u}function $b(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function Bg(u,e,n){var r=e[0],o=e[1],l=e[2],h=e[3],d=e[4],p=e[5],m=e[6],v=e[7],y=e[8],b=e[9],x=e[10],D=e[11],R=e[12],B=e[13],w=e[14],F=e[15],O=n[0],z=n[1],M=n[2],V=n[3];return u[0]=O*r+z*d+M*y+V*R,u[1]=O*o+z*p+M*b+V*B,u[2]=O*l+z*m+M*x+V*w,u[3]=O*h+z*v+M*D+V*F,O=n[4],z=n[5],M=n[6],V=n[7],u[4]=O*r+z*d+M*y+V*R,u[5]=O*o+z*p+M*b+V*B,u[6]=O*l+z*m+M*x+V*w,u[7]=O*h+z*v+M*D+V*F,O=n[8],z=n[9],M=n[10],V=n[11],u[8]=O*r+z*d+M*y+V*R,u[9]=O*o+z*p+M*b+V*B,u[10]=O*l+z*m+M*x+V*w,u[11]=O*h+z*v+M*D+V*F,O=n[12],z=n[13],M=n[14],V=n[15],u[12]=O*r+z*d+M*y+V*R,u[13]=O*o+z*p+M*b+V*B,u[14]=O*l+z*m+M*x+V*w,u[15]=O*h+z*v+M*D+V*F,u}function ex(u,e,n,r,o){var l=1/Math.tan(e/2),h;return u[0]=l/n,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=l,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,o!=null&&o!==1/0?(h=1/(r-o),u[10]=(o+r)*h,u[14]=2*o*r*h):(u[10]=-1,u[14]=-2*r),u}var tx=ex;function ix(u,e,n,r){var o,l,h,d,p,m,v,y,b,x,D=e[0],R=e[1],B=e[2],w=r[0],F=r[1],O=r[2],z=n[0],M=n[1],V=n[2];return Math.abs(D-z)<Oc&&Math.abs(R-M)<Oc&&Math.abs(B-V)<Oc?$b(u):(v=D-z,y=R-M,b=B-V,x=1/Math.hypot(v,y,b),v*=x,y*=x,b*=x,o=F*b-O*y,l=O*v-w*b,h=w*y-F*v,x=Math.hypot(o,l,h),x?(x=1/x,o*=x,l*=x,h*=x):(o=0,l=0,h=0),d=y*h-b*l,p=b*o-v*h,m=v*l-y*o,x=Math.hypot(d,p,m),x?(x=1/x,d*=x,p*=x,m*=x):(d=0,p=0,m=0),u[0]=o,u[1]=d,u[2]=v,u[3]=0,u[4]=l,u[5]=p,u[6]=y,u[7]=0,u[8]=h,u[9]=m,u[10]=b,u[11]=0,u[12]=-(o*D+l*R+h*B),u[13]=-(d*D+p*R+m*B),u[14]=-(v*D+y*R+b*B),u[15]=1,u)}class nx{yaw=0;pitch=Math.PI/8;zoom=5;projection;viewProjection;constructor(e,n,r,o){this.projection=tx(ua(),e,n,r,o)}update(){const e=new Float32Array([this.zoom*Math.cos(this.pitch)*Math.sin(this.yaw),this.zoom*Math.sin(this.pitch),this.zoom*Math.cos(this.pitch)*Math.cos(this.yaw)]),n=ix(ua(),e,new Float32Array([0,0,0]),new Float32Array([0,1,0]));this.viewProjection=Bg(ua(),this.projection,n)}}class sx{camera;isDragging=!1;lastMouseX=0;lastMouseY=0;constructor(e){this.camera=e}initEvents(e){e.addEventListener("mousedown",n=>{this.isDragging=!0,this.lastMouseX=n.clientX,this.lastMouseY=n.clientY}),window.addEventListener("mouseup",()=>{this.isDragging=!1}),window.addEventListener("mousemove",n=>{if(!this.isDragging)return;const r=n.clientX-this.lastMouseX,o=n.clientY-this.lastMouseY,l=.005;this.camera.yaw-=r*l,this.camera.pitch+=o*l;const h=Math.PI/2-.01;this.camera.pitch>h&&(this.camera.pitch=h),this.camera.pitch<-h&&(this.camera.pitch=-h),this.lastMouseX=n.clientX,this.lastMouseY=n.clientY}),e.addEventListener("wheel",n=>{n.preventDefault();const r=.5;this.camera.zoom+=n.deltaY*r*.01;const o=.5,l=10;this.camera.zoom<o&&(this.camera.zoom=o),this.camera.zoom>l&&(this.camera.zoom=l)},{passive:!1})}getCamera(){return this.camera}}class Ks{static instance;canvas;device;context;pipeline;depthTexture;msaaColourTexture;uniformBuffer;normalBuffer;uniformBindGroup;cameraController;constructor(e){this.canvas=e,this.cameraController=new sx(new nx(Math.PI/4,1280/720,.1,100)),this.cameraController.initEvents(this.canvas)}static create(e){return Ks.instance||(Ks.instance=new Ks(e)),Ks.instance}async init(){const e=await navigator.gpu.requestAdapter();this.device=await e.requestDevice(),this.context=this.canvas.getContext("webgpu");const n=navigator.gpu.getPreferredCanvasFormat();this.context.configure({device:this.device,format:n}),this.depthTexture=this.device.createTexture({size:[this.canvas.width,this.canvas.height],format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT,sampleCount:4}),this.msaaColourTexture=this.device.createTexture({size:[this.canvas.width,this.canvas.height],sampleCount:4,format:n,usage:GPUTextureUsage.RENDER_ATTACHMENT}),this.uniformBuffer=this.device.createBuffer({size:16*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.normalBuffer=this.device.createBuffer({size:16*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});const r=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"}}]});this.uniformBindGroup=this.device.createBindGroup({layout:r,entries:[{binding:0,resource:{buffer:this.uniformBuffer}},{binding:1,resource:{buffer:this.normalBuffer}}]});const o={arrayStride:36,attributes:[{format:"float32x3",offset:0,shaderLocation:0},{format:"float32x3",offset:12,shaderLocation:1},{format:"float32x3",offset:24,shaderLocation:2}]},l=this.device.createShaderModule({label:"VertexShader",code:Uy}),h=this.device.createShaderModule({label:"FragmentShader",code:Vy});this.pipeline=this.device.createRenderPipeline({label:"Pipeline",layout:this.device.createPipelineLayout({bindGroupLayouts:[r]}),vertex:{module:l,entryPoint:"vertexMain",buffers:[o]},fragment:{module:h,entryPoint:"fragmentMain",targets:[{format:n}]},primitive:{topology:"triangle-list",cullMode:"back"},depthStencil:{format:"depth24plus",depthWriteEnabled:!0,depthCompare:"less"},multisample:{count:4}})}render(e){const n=this.cameraController.getCamera();n.update();const r=ua(),o=Bg(ua(),n.viewProjection,r),l=Zb();Kb(l,r),Jb(l,l),Qb(l,l),this.device.queue.writeBuffer(this.uniformBuffer,0,o),this.device.queue.writeBuffer(this.normalBuffer,0,l);const h=this.device.createCommandEncoder(),d=h.beginRenderPass({colorAttachments:[{view:this.msaaColourTexture.createView(),resolveTarget:this.context.getCurrentTexture().createView(),loadOp:"clear",clearValue:{r:.3,g:.3,b:.3,a:1},storeOp:"store"}],depthStencilAttachment:{view:this.depthTexture.createView(),depthLoadOp:"clear",depthClearValue:1,depthStoreOp:"store"}});d.setPipeline(this.pipeline),d.setBindGroup(0,this.uniformBindGroup),d.setVertexBuffer(0,e.vertexBuffer),d.setIndexBuffer(e.indexBuffer,"uint16"),d.drawIndexed(e.indexCount,1,0,0,0),d.end(),this.device.queue.submit([h.finish()])}}function rx(){const u=Xo.useRef(null);return Xo.useEffect(()=>{(async()=>{const e=Ks.create(u.current);await e.init();const n=new Wb(e.device);await n.load("lattice.glb");function r(){e.render(n),requestAnimationFrame(r)}r()})()},[]),xi.jsx("canvas",{ref:u,width:"1280",height:"720"})}class Hg{}class Gn extends Hg{constructor(e,n,r){super(),this.viewId=e,this.groupId=n,this.panelId=r}}class ca extends Hg{constructor(e,n){super(),this.viewId=e,this.paneId=n}}class Di{constructor(){}static getInstance(){return Di.INSTANCE}hasData(e){return e&&e===this.proto}clearData(e){this.hasData(e)&&(this.proto=void 0,this.data=void 0)}getData(e){if(this.hasData(e))return this.data}setData(e,n){n&&(this.data=e,this.proto=n)}}Di.INSTANCE=new Di;function xt(){const u=Di.getInstance();if(u.hasData(Gn.prototype))return u.getData(Gn.prototype)[0]}function na(){const u=Di.getInstance();if(u.hasData(ca.prototype))return u.getData(ca.prototype)[0]}var ns;(function(u){u.any=(...e)=>n=>{const r=e.map(o=>o(n));return{dispose:()=>{r.forEach(o=>{o.dispose()})}}}})(ns||(ns={}));class $c{constructor(){this._defaultPrevented=!1}get defaultPrevented(){return this._defaultPrevented}preventDefault(){this._defaultPrevented=!0}}class Pg{constructor(){this._isAccepted=!1}get isAccepted(){return this._isAccepted}accept(){this._isAccepted=!0}}class ax{constructor(){this.events=new Map}get size(){return this.events.size}add(e,n){this.events.set(e,n)}delete(e){this.events.delete(e)}clear(){this.events.clear()}}class Qo{static create(){var e;return new Qo((e=new Error().stack)!==null&&e!==void 0?e:"")}constructor(e){this.value=e}print(){console.warn("dockview: stacktrace",this.value)}}class ox{constructor(e,n){this.callback=e,this.stacktrace=n}}class j{static setLeakageMonitorEnabled(e){e!==j.ENABLE_TRACKING&&j.MEMORY_LEAK_WATCHER.clear(),j.ENABLE_TRACKING=e}get value(){return this._last}constructor(e){this.options=e,this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=e=>{var n;!((n=this.options)===null||n===void 0)&&n.replay&&this._last!==void 0&&e(this._last);const r=new ox(e,j.ENABLE_TRACKING?Qo.create():void 0);return this._listeners.push(r),{dispose:()=>{const o=this._listeners.indexOf(r);o>-1&&this._listeners.splice(o,1)}}},j.ENABLE_TRACKING&&j.MEMORY_LEAK_WATCHER.add(this._event,Qo.create())),this._event}fire(e){var n;!((n=this.options)===null||n===void 0)&&n.replay&&(this._last=e);for(const r of this._listeners)r.callback(e)}dispose(){this._disposed||(this._disposed=!0,this._listeners.length>0&&(j.ENABLE_TRACKING&&queueMicrotask(()=>{var e;for(const n of this._listeners)console.warn("dockview: stacktrace",(e=n.stacktrace)===null||e===void 0?void 0:e.print())}),this._listeners=[]),j.ENABLE_TRACKING&&this._event&&j.MEMORY_LEAK_WATCHER.delete(this._event))}}j.ENABLE_TRACKING=!1;j.MEMORY_LEAK_WATCHER=new ax;function be(u,e,n,r){return u.addEventListener(e,n,r),{dispose:()=>{u.removeEventListener(e,n,r)}}}class Mm{constructor(){this._onFired=new j,this._currentFireCount=0,this._queued=!1,this.onEvent=e=>{const n=this._currentFireCount;return this._onFired.event(()=>{this._currentFireCount>n&&e()})}}fire(){this._currentFireCount++,!this._queued&&(this._queued=!0,queueMicrotask(()=>{this._queued=!1,this._onFired.fire()}))}dispose(){this._onFired.dispose()}}var it;(function(u){u.NONE={dispose:()=>{}};function e(n){return{dispose:()=>{n()}}}u.from=e})(it||(it={}));class pe{get isDisposed(){return this._isDisposed}constructor(...e){this._isDisposed=!1,this._disposables=e}addDisposables(...e){e.forEach(n=>this._disposables.push(n))}dispose(){this._isDisposed||(this._isDisposed=!0,this._disposables.forEach(e=>e.dispose()),this._disposables=[])}}class wt{constructor(){this._disposable=it.NONE}set value(e){this._disposable&&this._disposable.dispose(),this._disposable=e}dispose(){this._disposable&&(this._disposable.dispose(),this._disposable=it.NONE)}}class lx extends pe{constructor(e){super(),this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._value=null,this.addDisposables(this._onDidChange,sl(e,n=>{const r=n.target.scrollWidth>n.target.clientWidth,o=n.target.scrollHeight>n.target.clientHeight;this._value={hasScrollX:r,hasScrollY:o},this._onDidChange.fire(this._value)}))}}function sl(u,e){const n=new ResizeObserver(r=>{requestAnimationFrame(()=>{const o=r[0];e(o)})});return n.observe(u),{dispose:()=>{n.unobserve(u),n.disconnect()}}}const ma=(u,...e)=>{for(const n of e)u.classList.contains(n)&&u.classList.remove(n)},rl=(u,...e)=>{for(const n of e)u.classList.contains(n)||u.classList.add(n)},me=(u,e,n)=>{const r=u.classList.contains(e);n&&!r&&u.classList.add(e),!n&&r&&u.classList.remove(e)};function Pc(u,e){for(;u;){if(u===e)return!0;u=u.parentNode}return!1}function jg(u){return new ux(u)}class ux extends pe{constructor(e){super(),this._onDidFocus=new j,this.onDidFocus=this._onDidFocus.event,this._onDidBlur=new j,this.onDidBlur=this._onDidBlur.event,this.addDisposables(this._onDidFocus,this._onDidBlur);let n=Pc(document.activeElement,e),r=!1;const o=()=>{r=!1,n||(n=!0,this._onDidFocus.fire())},l=()=>{n&&(r=!0,window.setTimeout(()=>{r&&(r=!1,n=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{Pc(document.activeElement,e)!==n&&(n?l():o())},this.addDisposables(be(e,"focus",o,!0)),this.addDisposables(be(e,"blur",l,!0))}refreshState(){this._refreshStateHandler()}}const kg="dv-quasiPreventDefault";function cx(u){u[kg]=!0}function zm(u){return u[kg]}function hx(u,e){const n=Array.from(e);for(const r of n){if(r.href){const l=u.createElement("link");l.href=r.href,l.type=r.type,l.rel="stylesheet",u.head.appendChild(l)}let o=[];try{r.cssRules&&(o=Array.from(r.cssRules).map(l=>l.cssText))}catch{}for(const l of o){const h=u.createElement("style");h.appendChild(u.createTextNode(l)),u.head.appendChild(h)}}}function Jo(u){const{left:e,top:n,width:r,height:o}=u.getBoundingClientRect();return{left:e+window.scrollX,top:n+window.scrollY,width:r,height:o}}function dx(u){let e=u;for(;e?.parentNode;){if(e.parentNode===document)return!0;e.parentNode instanceof DocumentFragment?e=e.parentNode.host:e=e.parentNode}return!1}function fx(u,e){u.setAttribute("data-testid",e)}function px(u){const e=[];function n(r){if(r.nodeType===Node.ELEMENT_NODE){u.includes(r.tagName)&&e.push(r),r.shadowRoot&&n(r.shadowRoot);for(const o of r.children)n(o)}}return n(document.documentElement),e}function $o(u=document){const e=px(["IFRAME","WEBVIEW"]),n=new WeakMap;for(const r of e)n.set(r,r.style.pointerEvents),r.style.pointerEvents="none";return{release:()=>{var r;for(const o of e)o.style.pointerEvents=(r=n.get(o))!==null&&r!==void 0?r:"auto";e.splice(0,e.length)}}}function mx(u){function e(o){const l=[];for(let h=0;h<o.classList.length;h++)l.push(o.classList.item(h));return l}let n,r=u;for(;r!==null&&(n=e(r).find(o=>o.startsWith("dockview-theme-")),typeof n!="string");)r=r.parentElement;return n}class al{constructor(e){this.element=e,this._classNames=[]}setClassNames(e){for(const n of this._classNames)me(this.element,n,!1);this._classNames=e.split(" ").filter(n=>n.trim().length>0);for(const n of this._classNames)me(this.element,n,!0)}}const Fg=100;function gx(u,e){const n=Jo(u),r=Jo(e);return!(n.left<r.left||n.left+n.width>r.left+r.width)}function vx(u){const e=new j;let n=u.screenX,r=u.screenY,o;const l=()=>{if(u.closed)return;const h=u.screenX,d=u.screenY;(h!==n||d!==r)&&(clearTimeout(o),o=setTimeout(()=>{e.fire()},Fg),n=h,r=d),requestAnimationFrame(l)};return l(),e}function _x(u,e){let n;return new pe(be(u,"resize",()=>{clearTimeout(n),n=setTimeout(()=>{e()},Fg)}))}function yx(u,e,n={buffer:10}){const r=n.buffer,o=u.getBoundingClientRect(),l=e.getBoundingClientRect();let h=0,d=0;const p=o.left-l.left,m=o.top-l.top,v=o.bottom-l.bottom,y=o.right-l.right;p<r?h=r-p:y>r&&(h=-r-y),m<r?d=r-m:v>r&&(d=-v-r),(h!==0||d!==0)&&(u.style.transform=`translate(${h}px, ${d}px)`)}function bx(u){let e=u;for(;e&&(e.style.zIndex==="auto"||e.style.zIndex==="");)e=e.parentElement;return e}function nn(u){if(u.length===0)throw new Error("Invalid tail call");return[u.slice(0,u.length-1),u[u.length-1]]}function Yg(u,e){if(u.length!==e.length)return!1;for(let n=0;n<u.length;n++)if(u[n]!==e[n])return!1;return!0}function Nc(u,e){const n=u.indexOf(e);n>-1&&(u.splice(n,1),u.unshift(e))}function Bo(u,e){const n=u.indexOf(e);n>-1&&(u.splice(n,1),u.push(e))}function xx(u,e){for(let n=0;n<u.length;n++){const r=u[n];if(e(r))return n}return-1}function Mc(u,e){const n=u.findIndex(r=>r===e);return n>-1?(u.splice(n,1),!0):!1}const Pe=(u,e,n)=>e>n?e:Math.min(n,Math.max(u,e)),eh=()=>{let u=1;return{next:()=>(u++).toString()}},ci=(u,e)=>{const n=[];if(typeof e!="number"&&(e=u,u=0),u<=e)for(let r=u;r<e;r++)n.push(r);else for(let r=u;r>e;r--)n.push(r);return n};class wx{set size(e){this._size=e}get size(){return this._size}get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return typeof this._cachedVisibleSize>"u"}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,n,r,o){this.container=e,this.view=n,this.disposable=o,this._cachedVisibleSize=void 0,typeof r=="number"?(this._size=r,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=r.cachedVisibleSize)}setVisible(e,n){var r;e!==this.visible&&(e?(this.size=Pe((r=this._cachedVisibleSize)!==null&&r!==void 0?r:0,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof n=="number"?n:this.size,this.size=0),this.container.classList.toggle("visible",e),this.view.setVisible&&this.view.setVisible(e))}dispose(){return this.disposable.dispose(),this.view}}var ue;(function(u){u.HORIZONTAL="HORIZONTAL",u.VERTICAL="VERTICAL"})(ue||(ue={}));var ei;(function(u){u[u.MAXIMUM=0]="MAXIMUM",u[u.MINIMUM=1]="MINIMUM",u[u.DISABLED=2]="DISABLED",u[u.ENABLED=3]="ENABLED"})(ei||(ei={}));var at;(function(u){u.Low="low",u.High="high",u.Normal="normal"})(at||(at={}));var ri;(function(u){u.Distribute={type:"distribute"};function e(r){return{type:"split",index:r}}u.Split=e;function n(r){return{type:"invisible",cachedVisibleSize:r}}u.Invisible=n})(ri||(ri={}));class ga{get contentSize(){return this._contentSize}get size(){return this._size}set size(e){this._size=e}get orthogonalSize(){return this._orthogonalSize}set orthogonalSize(e){this._orthogonalSize=e}get length(){return this.viewItems.length}get proportions(){return this._proportions?[...this._proportions]:void 0}get orientation(){return this._orientation}set orientation(e){this._orientation=e;const n=this.size;this.size=this.orthogonalSize,this.orthogonalSize=n,ma(this.element,"dv-horizontal","dv-vertical"),this.element.classList.add(this.orientation==ue.HORIZONTAL?"dv-horizontal":"dv-vertical")}get minimumSize(){return this.viewItems.reduce((e,n)=>e+n.minimumSize,0)}get maximumSize(){return this.length===0?Number.POSITIVE_INFINITY:this.viewItems.reduce((e,n)=>e+n.maximumSize,0)}get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}get disabled(){return this._disabled}set disabled(e){this._disabled=e,me(this.element,"dv-splitview-disabled",e)}get margin(){return this._margin}set margin(e){this._margin=e,me(this.element,"dv-splitview-has-margin",e!==0)}constructor(e,n){var r,o;this.container=e,this.viewItems=[],this.sashes=[],this._size=0,this._orthogonalSize=0,this._contentSize=0,this._proportions=void 0,this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this._disabled=!1,this._margin=0,this._onDidSashEnd=new j,this.onDidSashEnd=this._onDidSashEnd.event,this._onDidAddView=new j,this.onDidAddView=this._onDidAddView.event,this._onDidRemoveView=new j,this.onDidRemoveView=this._onDidRemoveView.event,this.resize=(l,h,d=this.viewItems.map(D=>D.size),p,m,v=Number.NEGATIVE_INFINITY,y=Number.POSITIVE_INFINITY,b,x)=>{if(l<0||l>this.viewItems.length)return 0;const D=ci(l,-1),R=ci(l+1,this.viewItems.length);if(m)for(const P of m)Nc(D,P),Nc(R,P);if(p)for(const P of p)Bo(D,P),Bo(R,P);const B=D.map(P=>this.viewItems[P]),w=D.map(P=>d[P]),F=R.map(P=>this.viewItems[P]),O=R.map(P=>d[P]),z=D.reduce((P,A)=>P+this.viewItems[A].minimumSize-d[A],0),M=D.reduce((P,A)=>P+this.viewItems[A].maximumSize-d[A],0),V=R.length===0?Number.POSITIVE_INFINITY:R.reduce((P,A)=>P+d[A]-this.viewItems[A].minimumSize,0),T=R.length===0?Number.NEGATIVE_INFINITY:R.reduce((P,A)=>P+d[A]-this.viewItems[A].maximumSize,0),U=Math.max(z,T),K=Math.min(V,M);let Q=!1;if(b){const P=this.viewItems[b.index],A=h>=b.limitDelta;Q=A!==P.visible,P.setVisible(A,b.size)}if(!Q&&x){const P=this.viewItems[x.index],A=h<x.limitDelta;Q=A!==P.visible,P.setVisible(A,x.size)}if(Q)return this.resize(l,h,d,p,m,v,y);const ee=Pe(h,U,K);let $=0,J=ee;for(let P=0;P<B.length;P++){const A=B[P],X=Pe(w[P]+J,A.minimumSize,A.maximumSize),ne=X-w[P];$+=ne,J-=ne,A.size=X}let ae=$;for(let P=0;P<F.length;P++){const A=F[P],X=Pe(O[P]-ae,A.minimumSize,A.maximumSize),ne=X-O[P];ae+=ne,A.size=X}return h},this._orientation=(r=n.orientation)!==null&&r!==void 0?r:ue.VERTICAL,this.element=this.createContainer(),this.margin=(o=n.margin)!==null&&o!==void 0?o:0,this.proportionalLayout=n.proportionalLayout===void 0?!0:!!n.proportionalLayout,this.viewContainer=this.createViewContainer(),this.sashContainer=this.createSashContainer(),this.element.appendChild(this.sashContainer),this.element.appendChild(this.viewContainer),this.container.appendChild(this.element),this.style(n.styles),n.descriptor&&(this._size=n.descriptor.size,n.descriptor.views.forEach((l,h)=>{const d=l.visible===void 0||l.visible?l.size:{type:"invisible",cachedVisibleSize:l.size},p=l.view;this.addView(p,d,h,!0)}),this._contentSize=this.viewItems.reduce((l,h)=>l+h.size,0),this.saveProportions())}style(e){e?.separatorBorder==="transparent"?(ma(this.element,"dv-separator-border"),this.element.style.removeProperty("--dv-separator-border")):(rl(this.element,"dv-separator-border"),e?.separatorBorder&&this.element.style.setProperty("--dv-separator-border",e.separatorBorder))}isViewVisible(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].visible}setViewVisible(e,n){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");const r=this.viewItems[e];r.setVisible(n,r.size),this.distributeEmptySpace(e),this.layoutViews(),this.saveProportions()}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}resizeView(e,n){if(e<0||e>=this.viewItems.length)return;const r=ci(this.viewItems.length).filter(d=>d!==e),o=[...r.filter(d=>this.viewItems[d].priority===at.Low),e],l=r.filter(d=>this.viewItems[d].priority===at.High),h=this.viewItems[e];n=Math.round(n),n=Pe(n,h.minimumSize,Math.min(h.maximumSize,this._size)),h.size=n,this.relayout(o,l)}getViews(){return this.viewItems.map(e=>e.view)}onDidChange(e,n){const r=this.viewItems.indexOf(e);if(r<0||r>=this.viewItems.length)return;n=typeof n=="number"?n:e.size,n=Pe(n,e.minimumSize,e.maximumSize),e.size=n;const o=ci(this.viewItems.length).filter(d=>d!==r),l=[...o.filter(d=>this.viewItems[d].priority===at.Low),r],h=o.filter(d=>this.viewItems[d].priority===at.High);this.relayout([...l,r],h)}addView(e,n={type:"distribute"},r=this.viewItems.length,o){const l=document.createElement("div");l.className="dv-view",l.appendChild(e.element);let h;typeof n=="number"?h=n:n.type==="split"?h=this.getViewSize(n.index)/2:n.type==="invisible"?h={cachedVisibleSize:n.cachedVisibleSize}:h=e.minimumSize;const d=e.onDidChange(m=>this.onDidChange(p,m.size)),p=new wx(l,e,h,{dispose:()=>{d.dispose(),this.viewContainer.removeChild(l)}});if(r===this.viewItems.length?this.viewContainer.appendChild(l):this.viewContainer.insertBefore(l,this.viewContainer.children.item(r)),this.viewItems.splice(r,0,p),this.viewItems.length>1){const m=document.createElement("div");m.className="dv-sash";const v=b=>{for(const P of this.viewItems)P.enabled=!1;const x=$o(),D=this._orientation===ue.HORIZONTAL?b.clientX:b.clientY,R=xx(this.sashes,P=>P.container===m),B=this.viewItems.map(P=>P.size);let w,F;const O=ci(R,-1),z=ci(R+1,this.viewItems.length),M=O.reduce((P,A)=>P+(this.viewItems[A].minimumSize-B[A]),0),V=O.reduce((P,A)=>P+(this.viewItems[A].viewMaximumSize-B[A]),0),T=z.length===0?Number.POSITIVE_INFINITY:z.reduce((P,A)=>P+(B[A]-this.viewItems[A].minimumSize),0),U=z.length===0?Number.NEGATIVE_INFINITY:z.reduce((P,A)=>P+(B[A]-this.viewItems[A].viewMaximumSize),0),K=Math.max(M,U),Q=Math.min(T,V),ee=this.findFirstSnapIndex(O),$=this.findFirstSnapIndex(z);if(typeof ee=="number"){const P=this.viewItems[ee],A=Math.floor(P.viewMinimumSize/2);w={index:ee,limitDelta:P.visible?K-A:K+A,size:P.size}}if(typeof $=="number"){const P=this.viewItems[$],A=Math.floor(P.viewMinimumSize/2);F={index:$,limitDelta:P.visible?Q+A:Q-A,size:P.size}}const J=P=>{const X=(this._orientation===ue.HORIZONTAL?P.clientX:P.clientY)-D;this.resize(R,X,B,void 0,void 0,K,Q,w,F),this.distributeEmptySpace(),this.layoutViews()},ae=()=>{for(const P of this.viewItems)P.enabled=!0;x.release(),this.saveProportions(),document.removeEventListener("pointermove",J),document.removeEventListener("pointerup",ae),document.removeEventListener("pointercancel",ae),this._onDidSashEnd.fire(void 0)};document.addEventListener("pointermove",J),document.addEventListener("pointerup",ae),document.addEventListener("pointercancel",ae)};m.addEventListener("pointerdown",v);const y={container:m,disposable:()=>{m.removeEventListener("pointerdown",v),this.sashContainer.removeChild(m)}};this.sashContainer.appendChild(m),this.sashes.push(y)}o||this.relayout([r]),!o&&typeof n!="number"&&n.type==="distribute"&&this.distributeViewSizes(),this._onDidAddView.fire(e)}distributeViewSizes(){const e=[];let n=0;for(const d of this.viewItems)d.maximumSize-d.minimumSize>0&&(e.push(d),n+=d.size);const r=Math.floor(n/e.length);for(const d of e)d.size=Pe(r,d.minimumSize,d.maximumSize);const o=ci(this.viewItems.length),l=o.filter(d=>this.viewItems[d].priority===at.Low),h=o.filter(d=>this.viewItems[d].priority===at.High);this.relayout(l,h)}removeView(e,n,r=!1){const o=this.viewItems.splice(e,1)[0];if(o.dispose(),this.viewItems.length>=1){const l=Math.max(e-1,0);this.sashes.splice(l,1)[0].disposable()}return r||this.relayout(),n&&n.type==="distribute"&&this.distributeViewSizes(),this._onDidRemoveView.fire(o.view),o.view}getViewCachedVisibleSize(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].cachedVisibleSize}moveView(e,n){const r=this.getViewCachedVisibleSize(e),o=typeof r>"u"?this.getViewSize(e):ri.Invisible(r),l=this.removeView(e,void 0,!0);this.addView(l,o,n)}layout(e,n){const r=Math.max(this.size,this._contentSize);if(this.size=e,this.orthogonalSize=n,this.proportions){let o=0;for(let l=0;l<this.viewItems.length;l++){const h=this.viewItems[l],d=this.proportions[l];typeof d=="number"?o+=d:e-=h.size}for(let l=0;l<this.viewItems.length;l++){const h=this.viewItems[l],d=this.proportions[l];typeof d=="number"&&o>0&&(h.size=Pe(Math.round(d*e/o),h.minimumSize,h.maximumSize))}}else{const o=ci(this.viewItems.length),l=o.filter(d=>this.viewItems[d].priority===at.Low),h=o.filter(d=>this.viewItems[d].priority===at.High);this.resize(this.viewItems.length-1,e-r,void 0,l,h)}this.distributeEmptySpace(),this.layoutViews()}relayout(e,n){const r=this.viewItems.reduce((o,l)=>o+l.size,0);this.resize(this.viewItems.length-1,this._size-r,void 0,e,n),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}distributeEmptySpace(e){const n=this.viewItems.reduce((d,p)=>d+p.size,0);let r=this.size-n;const o=ci(this.viewItems.length-1,-1),l=o.filter(d=>this.viewItems[d].priority===at.Low),h=o.filter(d=>this.viewItems[d].priority===at.High);for(const d of h)Nc(o,d);for(const d of l)Bo(o,d);typeof e=="number"&&Bo(o,e);for(let d=0;r!==0&&d<o.length;d++){const p=this.viewItems[o[d]],m=Pe(p.size+r,p.minimumSize,p.maximumSize),v=m-p.size;r-=v,p.size=m}}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this._proportions=this.viewItems.map(e=>e.visible?e.size/this._contentSize:void 0))}layoutViews(){if(this._contentSize=this.viewItems.reduce((p,m)=>p+m.size,0),this.updateSashEnablement(),this.viewItems.length===0)return;const e=this.viewItems.filter(p=>p.visible),n=Math.max(0,e.length-1),r=this.margin*n/Math.max(1,e.length);let o=0;const l=[],h=4,d=this.viewItems.reduce((p,m,v)=>{const y=m.visible?1:0;return v===0?p.push(y):p.push(p[v-1]+y),p},[]);this.viewItems.forEach((p,m)=>{o+=this.viewItems[m].size,l.push(o);const v=p.visible?p.size-r:0,y=Math.max(0,d[m]-1),b=m===0||y===0?0:l[m-1]+y/n*r;if(m<this.viewItems.length-1){const x=p.visible?b+v-h/2+this.margin/2:b;this._orientation===ue.HORIZONTAL&&(this.sashes[m].container.style.left=`${x}px`,this.sashes[m].container.style.top="0px"),this._orientation===ue.VERTICAL&&(this.sashes[m].container.style.left="0px",this.sashes[m].container.style.top=`${x}px`)}this._orientation===ue.HORIZONTAL&&(p.container.style.width=`${v}px`,p.container.style.left=`${b}px`,p.container.style.top="",p.container.style.height=""),this._orientation===ue.VERTICAL&&(p.container.style.height=`${v}px`,p.container.style.top=`${b}px`,p.container.style.width="",p.container.style.left=""),p.view.layout(p.size-r,this._orthogonalSize)})}findFirstSnapIndex(e){for(const n of e){const r=this.viewItems[n];if(r.visible&&r.snap)return n}for(const n of e){const r=this.viewItems[n];if(r.visible&&r.maximumSize-r.minimumSize>0)return;if(!r.visible&&r.snap)return n}}updateSashEnablement(){let e=!1;const n=this.viewItems.map(p=>e=p.size-p.minimumSize>0||e);e=!1;const r=this.viewItems.map(p=>e=p.maximumSize-p.size>0||e),o=[...this.viewItems].reverse();e=!1;const l=o.map(p=>e=p.size-p.minimumSize>0||e).reverse();e=!1;const h=o.map(p=>e=p.maximumSize-p.size>0||e).reverse();let d=0;for(let p=0;p<this.sashes.length;p++){const m=this.sashes[p],v=this.viewItems[p];d+=v.size;const y=!(n[p]&&h[p+1]),b=!(r[p]&&l[p+1]);if(y&&b){const x=ci(p,-1),D=ci(p+1,this.viewItems.length),R=this.findFirstSnapIndex(x),B=this.findFirstSnapIndex(D),w=typeof R=="number"&&!this.viewItems[R].visible,F=typeof B=="number"&&!this.viewItems[B].visible;w&&l[p]&&(d>0||this.startSnappingEnabled)?this.updateSash(m,ei.MINIMUM):F&&n[p]&&(d<this._contentSize||this.endSnappingEnabled)?this.updateSash(m,ei.MAXIMUM):this.updateSash(m,ei.DISABLED)}else y&&!b?this.updateSash(m,ei.MINIMUM):!y&&b?this.updateSash(m,ei.MAXIMUM):this.updateSash(m,ei.ENABLED)}}updateSash(e,n){me(e.container,"dv-disabled",n===ei.DISABLED),me(e.container,"dv-enabled",n===ei.ENABLED),me(e.container,"dv-maximum",n===ei.MAXIMUM),me(e.container,"dv-minimum",n===ei.MINIMUM)}createViewContainer(){const e=document.createElement("div");return e.className="dv-view-container",e}createSashContainer(){const e=document.createElement("div");return e.className="dv-sash-container",e}createContainer(){const e=document.createElement("div"),n=this._orientation===ue.HORIZONTAL?"dv-horizontal":"dv-vertical";return e.className=`dv-split-view-container ${n}`,e}dispose(){this._onDidSashEnd.dispose(),this._onDidAddView.dispose(),this._onDidRemoveView.dispose();for(let e=0;e<this.element.children.length;e++)if(this.element.children.item(e)===this.element){this.element.removeChild(this.element);break}for(const e of this.viewItems)e.dispose();this.element.remove()}}const jc=Object.keys({orientation:void 0,descriptor:void 0,proportionalLayout:void 0,styles:void 0,margin:void 0,disableAutoResizing:void 0,className:void 0});class Im extends pe{get onDidAddView(){return this.splitview.onDidAddView}get onDidRemoveView(){return this.splitview.onDidRemoveView}get minimumSize(){return this.splitview.minimumSize}get maximumSize(){return this.splitview.maximumSize}get orientation(){return this.splitview.orientation}get size(){return this.splitview.size}get orthogonalSize(){return this.splitview.orthogonalSize}constructor(e,n){var r;super(),this.paneItems=[],this.skipAnimation=!1,this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._orientation=(r=n.orientation)!==null&&r!==void 0?r:ue.VERTICAL,this.element=document.createElement("div"),this.element.className="dv-pane-container",e.appendChild(this.element),this.splitview=new ga(this.element,{orientation:this._orientation,proportionalLayout:!1,descriptor:n.descriptor}),this.getPanes().forEach(o=>{const l=new pe(o.onDidChangeExpansionState(()=>{this.setupAnimation(),this._onDidChange.fire(void 0)})),h={pane:o,disposable:{dispose:()=>{l.dispose()}}};this.paneItems.push(h),o.orthogonalSize=this.splitview.orthogonalSize}),this.addDisposables(this._onDidChange,this.splitview.onDidSashEnd(()=>{this._onDidChange.fire(void 0)}),this.splitview.onDidAddView(()=>{this._onDidChange.fire()}),this.splitview.onDidRemoveView(()=>{this._onDidChange.fire()}))}setViewVisible(e,n){this.splitview.setViewVisible(e,n)}addPane(e,n,r=this.splitview.length,o=!1){const l=e.onDidChangeExpansionState(()=>{this.setupAnimation(),this._onDidChange.fire(void 0)}),h={pane:e,disposable:{dispose:()=>{l.dispose()}}};this.paneItems.splice(r,0,h),e.orthogonalSize=this.splitview.orthogonalSize,this.splitview.addView(e,n,r,o)}getViewSize(e){return this.splitview.getViewSize(e)}getPanes(){return this.splitview.getViews()}removePane(e,n={skipDispose:!1}){const r=this.paneItems.splice(e,1)[0];return this.splitview.removeView(e),n.skipDispose||(r.disposable.dispose(),r.pane.dispose()),r}moveView(e,n){if(e===n)return;const r=this.removePane(e,{skipDispose:!0});this.skipAnimation=!0;try{this.addPane(r.pane,r.pane.size,n,!1)}finally{this.skipAnimation=!1}}layout(e,n){this.splitview.layout(e,n)}setupAnimation(){this.skipAnimation||(this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=void 0),rl(this.element,"dv-animated"),this.animationTimer=setTimeout(()=>{this.animationTimer=void 0,ma(this.element,"dv-animated")},200))}dispose(){super.dispose(),this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=void 0),this.paneItems.forEach(e=>{e.disposable.dispose(),e.pane.dispose()}),this.paneItems=[],this.splitview.dispose(),this.element.remove()}}class yt{get minimumWidth(){return this.view.minimumWidth}get maximumWidth(){return this.view.maximumWidth}get minimumHeight(){return this.view.minimumHeight}get maximumHeight(){return this.view.maximumHeight}get priority(){return this.view.priority}get snap(){return this.view.snap}get minimumSize(){return this.orientation===ue.HORIZONTAL?this.minimumHeight:this.minimumWidth}get maximumSize(){return this.orientation===ue.HORIZONTAL?this.maximumHeight:this.maximumWidth}get minimumOrthogonalSize(){return this.orientation===ue.HORIZONTAL?this.minimumWidth:this.minimumHeight}get maximumOrthogonalSize(){return this.orientation===ue.HORIZONTAL?this.maximumWidth:this.maximumHeight}get orthogonalSize(){return this._orthogonalSize}get size(){return this._size}get element(){return this.view.element}get width(){return this.orientation===ue.HORIZONTAL?this.orthogonalSize:this.size}get height(){return this.orientation===ue.HORIZONTAL?this.size:this.orthogonalSize}constructor(e,n,r,o=0){this.view=e,this.orientation=n,this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._orthogonalSize=r,this._size=o,this._disposable=this.view.onDidChange(l=>{l?this._onDidChange.fire({size:this.orientation===ue.VERTICAL?l.width:l.height,orthogonalSize:this.orientation===ue.VERTICAL?l.height:l.width}):this._onDidChange.fire({})})}setVisible(e){this.view.setVisible&&this.view.setVisible(e)}layout(e,n){this._size=e,this._orthogonalSize=n,this.view.layout(this.width,this.height)}dispose(){this._onDidChange.dispose(),this._disposable.dispose()}}class tt extends pe{get width(){return this.orientation===ue.HORIZONTAL?this.size:this.orthogonalSize}get height(){return this.orientation===ue.HORIZONTAL?this.orthogonalSize:this.size}get minimumSize(){return this.children.length===0?0:Math.max(...this.children.map((e,n)=>this.splitview.isViewVisible(n)?e.minimumOrthogonalSize:0))}get maximumSize(){return Math.min(...this.children.map((e,n)=>this.splitview.isViewVisible(n)?e.maximumOrthogonalSize:Number.POSITIVE_INFINITY))}get minimumOrthogonalSize(){return this.splitview.minimumSize}get maximumOrthogonalSize(){return this.splitview.maximumSize}get orthogonalSize(){return this._orthogonalSize}get size(){return this._size}get minimumWidth(){return this.orientation===ue.HORIZONTAL?this.minimumOrthogonalSize:this.minimumSize}get minimumHeight(){return this.orientation===ue.HORIZONTAL?this.minimumSize:this.minimumOrthogonalSize}get maximumWidth(){return this.orientation===ue.HORIZONTAL?this.maximumOrthogonalSize:this.maximumSize}get maximumHeight(){return this.orientation===ue.HORIZONTAL?this.maximumSize:this.maximumOrthogonalSize}get priority(){if(this.children.length===0)return at.Normal;const e=this.children.map(n=>typeof n.priority>"u"?at.Normal:n.priority);return e.some(n=>n===at.High)?at.High:e.some(n=>n===at.Low)?at.Low:at.Normal}get disabled(){return this.splitview.disabled}set disabled(e){this.splitview.disabled=e}get margin(){return this.splitview.margin}set margin(e){this.splitview.margin=e,this.children.forEach(n=>{n instanceof tt&&(n.margin=e)})}constructor(e,n,r,o,l,h,d,p){if(super(),this.orientation=e,this.proportionalLayout=n,this.styles=r,this._childrenDisposable=it.NONE,this.children=[],this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._onDidVisibilityChange=new j,this.onDidVisibilityChange=this._onDidVisibilityChange.event,this._orthogonalSize=l,this._size=o,this.element=document.createElement("div"),this.element.className="dv-branch-node",!p)this.splitview=new ga(this.element,{orientation:this.orientation,proportionalLayout:n,styles:r,margin:d}),this.splitview.layout(this.size,this.orthogonalSize);else{const m={views:p.map(v=>({view:v.node,size:v.node.size,visible:v.node instanceof yt&&v.visible!==void 0?v.visible:!0})),size:this.orthogonalSize};this.children=p.map(v=>v.node),this.splitview=new ga(this.element,{orientation:this.orientation,descriptor:m,proportionalLayout:n,styles:r,margin:d})}this.disabled=h,this.addDisposables(this._onDidChange,this._onDidVisibilityChange,this.splitview.onDidSashEnd(()=>{this._onDidChange.fire({})})),this.setupChildrenEvents()}setVisible(e){}isChildVisible(e){if(e<0||e>=this.children.length)throw new Error("Invalid index");return this.splitview.isViewVisible(e)}setChildVisible(e,n){if(e<0||e>=this.children.length)throw new Error("Invalid index");if(this.splitview.isViewVisible(e)===n)return;const r=this.splitview.contentSize===0;this.splitview.setViewVisible(e,n);const o=this.splitview.contentSize===0;(n&&r||!n&&o)&&this._onDidVisibilityChange.fire({visible:n})}moveChild(e,n){if(e===n)return;if(e<0||e>=this.children.length)throw new Error("Invalid from index");e<n&&n--,this.splitview.moveView(e,n);const r=this._removeChild(e);this._addChild(r,n)}getChildSize(e){if(e<0||e>=this.children.length)throw new Error("Invalid index");return this.splitview.getViewSize(e)}resizeChild(e,n){if(e<0||e>=this.children.length)throw new Error("Invalid index");this.splitview.resizeView(e,n)}layout(e,n){this._size=n,this._orthogonalSize=e,this.splitview.layout(n,e)}addChild(e,n,r,o){if(r<0||r>this.children.length)throw new Error("Invalid index");this.splitview.addView(e,n,r,o),this._addChild(e,r)}getChildCachedVisibleSize(e){if(e<0||e>=this.children.length)throw new Error("Invalid index");return this.splitview.getViewCachedVisibleSize(e)}removeChild(e,n){if(e<0||e>=this.children.length)throw new Error("Invalid index");return this.splitview.removeView(e,n),this._removeChild(e)}_addChild(e,n){this.children.splice(n,0,e),this.setupChildrenEvents()}_removeChild(e){const[n]=this.children.splice(e,1);return this.setupChildrenEvents(),n}setupChildrenEvents(){this._childrenDisposable.dispose(),this._childrenDisposable=new pe(ns.any(...this.children.map(e=>e.onDidChange))(e=>{this._onDidChange.fire({size:e.orthogonalSize})}),...this.children.map((e,n)=>e instanceof tt?e.onDidVisibilityChange(({visible:r})=>{this.setChildVisible(n,r)}):it.NONE))}dispose(){this._childrenDisposable.dispose(),this.splitview.dispose(),this.children.forEach(e=>e.dispose()),super.dispose()}}function kc(u,e){if(u instanceof yt)return u;if(u instanceof tt)return kc(u.children[e?u.children.length-1:0],e);throw new Error("invalid node")}function Fc(u,e,n){if(u instanceof tt){const r=new tt(Ei(u.orientation),u.proportionalLayout,u.styles,e,n,u.disabled,u.margin);let o=0;for(let l=u.children.length-1;l>=0;l--){const h=u.children[l],d=h instanceof tt?h.orthogonalSize:h.size;let p=u.size===0?0:Math.round(e*d/u.size);o+=p,l===0&&(p+=e-o),r.addChild(Fc(h,n,p),p,0,!0)}return r}else return new yt(u.view,Ei(u.orientation),n)}function Ex(u){const e=u.parentElement;if(!e)throw new Error("Invalid grid element");let n=e.firstElementChild,r=0;for(;n!==u&&n!==e.lastElementChild&&n;)n=n.nextElementSibling,r++;return r}function Xe(u){const e=u.parentElement;if(!e)throw new Error("Invalid grid element");if(/\bdv-grid-view\b/.test(e.className))return[];const n=Ex(e),r=e.parentElement.parentElement.parentElement;return[...Xe(r),n]}function wi(u,e,n){const r=Sx(u,e),o=Tx(n);if(r===o){const[l,h]=nn(e);let d=h;return(n==="right"||n==="bottom")&&(d+=1),[...l,d]}else{const l=n==="right"||n==="bottom"?1:0;return[...e,l]}}function Tx(u){return u==="top"||u==="bottom"?ue.VERTICAL:ue.HORIZONTAL}function Sx(u,e){return e.length%2===0?Ei(u):u}const Ei=u=>u===ue.HORIZONTAL?ue.VERTICAL:ue.HORIZONTAL;function Dx(u){return!!u.children}const Yc=(u,e)=>{const n=e===ue.VERTICAL?u.box.width:u.box.height;return Dx(u)?{type:"branch",data:u.children.map(r=>Yc(r,Ei(e))),size:n}:typeof u.cachedVisibleSize=="number"?{type:"leaf",data:u.view.toJSON(),size:u.cachedVisibleSize,visible:!1}:{type:"leaf",data:u.view.toJSON(),size:n}};class Ax{get length(){return this._root?this._root.children.length:0}get orientation(){return this.root.orientation}set orientation(e){if(this.root.orientation===e)return;const{size:n,orthogonalSize:r}=this.root;this.root=Fc(this.root,r,n),this.root.layout(n,r)}get width(){return this.root.width}get height(){return this.root.height}get minimumWidth(){return this.root.minimumWidth}get minimumHeight(){return this.root.minimumHeight}get maximumWidth(){return this.root.maximumHeight}get maximumHeight(){return this.root.maximumHeight}get locked(){return this._locked}set locked(e){this._locked=e;const n=[this.root];for(;n.length>0;){const r=n.pop();r instanceof tt&&(r.disabled=e,n.push(...r.children))}}get margin(){return this._margin}set margin(e){this._margin=e,this.root.margin=e}maximizedView(){var e;return(e=this._maximizedNode)===null||e===void 0?void 0:e.leaf.view}hasMaximizedView(){return this._maximizedNode!==void 0}maximizeView(e){var n;const r=Xe(e.element),[o,l]=this.getNode(r);if(!(l instanceof yt)||((n=this._maximizedNode)===null||n===void 0?void 0:n.leaf)===l)return;this.hasMaximizedView()&&this.exitMaximizedView(),Yc(this.getView(),this.orientation);const h=[];function d(p,m){for(let v=0;v<p.children.length;v++){const y=p.children[v];y instanceof yt?y!==m&&(p.isChildVisible(v)?p.setChildVisible(v,!1):h.push(y)):d(y,m)}}d(this.root,l),this._maximizedNode={leaf:l,hiddenOnMaximize:h},this._onDidMaximizedNodeChange.fire({view:l.view,isMaximized:!0})}exitMaximizedView(){if(!this._maximizedNode)return;const e=this._maximizedNode.hiddenOnMaximize;function n(o){for(let l=o.children.length-1;l>=0;l--){const h=o.children[l];h instanceof yt?e.includes(h)||o.setChildVisible(l,!0):n(h)}}n(this.root);const r=this._maximizedNode.leaf;this._maximizedNode=void 0,this._onDidMaximizedNodeChange.fire({view:r.view,isMaximized:!1})}serialize(){const e=this.maximizedView();let n;e&&(n=Xe(e.element)),this.hasMaximizedView()&&this.exitMaximizedView();const o={root:Yc(this.getView(),this.orientation),width:this.width,height:this.height,orientation:this.orientation};return n&&(o.maximizedNode={location:n}),e&&this.maximizeView(e),o}dispose(){this.disposable.dispose(),this._onDidChange.dispose(),this._onDidMaximizedNodeChange.dispose(),this._onDidViewVisibilityChange.dispose(),this.root.dispose(),this._maximizedNode=void 0,this.element.remove()}clear(){const e=this.root.orientation;this.root=new tt(e,this.proportionalLayout,this.styles,this.root.size,this.root.orthogonalSize,this.locked,this.margin)}deserialize(e,n){const r=e.orientation,o=r===ue.VERTICAL?e.height:e.width;if(this._deserialize(e.root,r,n,o),this.layout(e.width,e.height),e.maximizedNode){const l=e.maximizedNode.location,[h,d]=this.getNode(l);if(!(d instanceof yt))return;this.maximizeView(d.view)}}_deserialize(e,n,r,o){this.root=this._deserializeNode(e,n,r,o)}_deserializeNode(e,n,r,o){var l;let h;if(e.type==="branch"){const p=e.data.map(m=>({node:this._deserializeNode(m,Ei(n),r,e.size),visible:m.visible}));h=new tt(n,this.proportionalLayout,this.styles,e.size,o,this.locked,this.margin,p)}else{const d=r.fromJSON(e);typeof e.visible=="boolean"&&((l=d.setVisible)===null||l===void 0||l.call(d,e.visible)),h=new yt(d,n,o,e.size)}return h}get root(){return this._root}set root(e){const n=this._root;n&&(n.dispose(),this._maximizedNode=void 0,this.element.removeChild(n.element)),this._root=e,this.element.appendChild(this._root.element),this.disposable.value=this._root.onDidChange(r=>{this._onDidChange.fire(r)})}insertOrthogonalSplitviewAtRoot(){if(!this._root)return;const e=this.root;if(e.element.remove(),this._root=new tt(Ei(e.orientation),this.proportionalLayout,this.styles,this.root.orthogonalSize,this.root.size,this.locked,this.margin),e.children.length!==0)if(e.children.length===1){const n=e.children[0];e.removeChild(0).dispose(),e.dispose(),this._root.addChild(Fc(n,n.orthogonalSize,n.size),ri.Distribute,0)}else this._root.addChild(e,ri.Distribute,0);this.element.appendChild(this._root.element),this.disposable.value=this._root.onDidChange(n=>{this._onDidChange.fire(n)})}next(e){return this.progmaticSelect(e)}previous(e){return this.progmaticSelect(e,!0)}getView(e){const n=e?this.getNode(e)[1]:this.root;return this._getViews(n,this.orientation)}_getViews(e,n,r){const o={height:e.height,width:e.width};if(e instanceof yt)return{box:o,view:e.view,cachedVisibleSize:r};const l=[];for(let h=0;h<e.children.length;h++){const d=e.children[h],p=e.getChildCachedVisibleSize(h);l.push(this._getViews(d,Ei(n),p))}return{box:o,children:l}}progmaticSelect(e,n=!1){const[r,o]=this.getNode(e);if(!(o instanceof yt))throw new Error("invalid location");for(let l=r.length-1;l>-1;l--){const h=r[l],d=e[l]||0;if(n?d-1>-1:d+1<h.children.length)return kc(h.children[n?d-1:d+1],n)}return kc(this.root,n)}constructor(e,n,r,o,l){this.proportionalLayout=e,this.styles=n,this._locked=!1,this._margin=0,this._maximizedNode=void 0,this.disposable=new wt,this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._onDidViewVisibilityChange=new j,this.onDidViewVisibilityChange=this._onDidViewVisibilityChange.event,this._onDidMaximizedNodeChange=new j,this.onDidMaximizedNodeChange=this._onDidMaximizedNodeChange.event,this.element=document.createElement("div"),this.element.className="dv-grid-view",this._locked=o??!1,this._margin=l??0,this.root=new tt(r,e,n,0,0,this.locked,this.margin)}isViewVisible(e){const[n,r]=nn(e),[,o]=this.getNode(n);if(!(o instanceof tt))throw new Error("Invalid from location");return o.isChildVisible(r)}setViewVisible(e,n){this.hasMaximizedView()&&this.exitMaximizedView();const[r,o]=nn(e),[,l]=this.getNode(r);if(!(l instanceof tt))throw new Error("Invalid from location");this._onDidViewVisibilityChange.fire(),l.setChildVisible(o,n)}moveView(e,n,r){this.hasMaximizedView()&&this.exitMaximizedView();const[,o]=this.getNode(e);if(!(o instanceof tt))throw new Error("Invalid location");o.moveChild(n,r)}addView(e,n,r){this.hasMaximizedView()&&this.exitMaximizedView();const[o,l]=nn(r),[h,d]=this.getNode(o);if(d instanceof tt){const p=new yt(e,Ei(d.orientation),d.orthogonalSize);d.addChild(p,n,l)}else{const[p,...m]=[...h].reverse(),[v,...y]=[...o].reverse();let b=0;const x=p.getChildCachedVisibleSize(v);typeof x=="number"&&(b=ri.Invisible(x)),p.removeChild(v).dispose();const R=new tt(d.orientation,this.proportionalLayout,this.styles,d.size,d.orthogonalSize,this.locked,this.margin);p.addChild(R,d.size,v);const B=new yt(d.view,p.orientation,d.size);R.addChild(B,b,0),typeof n!="number"&&n.type==="split"&&(n={type:"split",index:0});const w=new yt(e,p.orientation,d.size);R.addChild(w,n,l)}}remove(e,n){const r=Xe(e.element);return this.removeView(r,n)}removeView(e,n){this.hasMaximizedView()&&this.exitMaximizedView();const[r,o]=nn(e),[l,h]=this.getNode(r);if(!(h instanceof tt))throw new Error("Invalid location");const d=h.children[o];if(!(d instanceof yt))throw new Error("Invalid location");if(h.removeChild(o,n),d.dispose(),h.children.length!==1)return d.view;const p=h.children[0];if(l.length===0)return p instanceof yt||(h.removeChild(0,n),this.root=p),d.view;const[m,...v]=[...l].reverse(),[y,...b]=[...r].reverse(),x=h.isChildVisible(0);h.removeChild(0,n);const D=m.children.map((R,B)=>m.getChildSize(B));if(m.removeChild(y,n).dispose(),p instanceof tt){D.splice(y,1,...p.children.map(R=>R.size));for(let R=0;R<p.children.length;R++){const B=p.children[R];m.addChild(B,B.size,y+R)}for(;p.children.length>0;)p.removeChild(0)}else{const R=new yt(p.view,Ei(p.orientation),p.size),B=x?p.orthogonalSize:ri.Invisible(p.orthogonalSize);m.addChild(R,B,y)}p.dispose();for(let R=0;R<D.length;R++)m.resizeChild(R,D[R]);return d.view}layout(e,n){const[r,o]=this.root.orientation===ue.HORIZONTAL?[n,e]:[e,n];this.root.layout(r,o)}getNode(e,n=this.root,r=[]){if(e.length===0)return[r,n];if(!(n instanceof tt))throw new Error("Invalid location");const[o,...l]=e;if(o<0||o>=n.children.length)throw new Error("Invalid location");const h=n.children[o];return r.push(n),this.getNode(l,h,r)}}const Xc=Object.keys({disableAutoResizing:void 0,proportionalLayout:void 0,orientation:void 0,hideBorders:void 0,className:void 0});class th extends pe{get element(){return this._element}get disableResizing(){return this._disableResizing}set disableResizing(e){this._disableResizing=e}constructor(e,n=!1){super(),this._disableResizing=n,this._element=e,this.addDisposables(sl(this._element,r=>{if(this.isDisposed||this.disableResizing||!this._element.offsetParent||!dx(this._element))return;const{width:o,height:l}=r.contentRect;this.layout(o,l)}))}}const Cx=eh();function el(u){switch(u){case"left":return"left";case"right":return"right";case"above":return"top";case"below":return"bottom";case"within":default:return"center"}}class Xg extends th{get id(){return this._id}get size(){return this._groups.size}get groups(){return Array.from(this._groups.values()).map(e=>e.value)}get width(){return this.gridview.width}get height(){return this.gridview.height}get minimumHeight(){return this.gridview.minimumHeight}get maximumHeight(){return this.gridview.maximumHeight}get minimumWidth(){return this.gridview.minimumWidth}get maximumWidth(){return this.gridview.maximumWidth}get activeGroup(){return this._activeGroup}get locked(){return this.gridview.locked}set locked(e){this.gridview.locked=e}constructor(e,n){var r;super(document.createElement("div"),n.disableAutoResizing),this._id=Cx.next(),this._groups=new Map,this._onDidRemove=new j,this.onDidRemove=this._onDidRemove.event,this._onDidAdd=new j,this.onDidAdd=this._onDidAdd.event,this._onDidMaximizedChange=new j,this.onDidMaximizedChange=this._onDidMaximizedChange.event,this._onDidActiveChange=new j,this.onDidActiveChange=this._onDidActiveChange.event,this._bufferOnDidLayoutChange=new Mm,this.onDidLayoutChange=this._bufferOnDidLayoutChange.onEvent,this._onDidViewVisibilityChangeMicroTaskQueue=new Mm,this.onDidViewVisibilityChangeMicroTaskQueue=this._onDidViewVisibilityChangeMicroTaskQueue.onEvent,this.element.style.height="100%",this.element.style.width="100%",this._classNames=new al(this.element),this._classNames.setClassNames((r=n.className)!==null&&r!==void 0?r:""),e.appendChild(this.element),this.gridview=new Ax(!!n.proportionalLayout,n.styles,n.orientation,n.locked,n.margin),this.gridview.locked=!!n.locked,this.element.appendChild(this.gridview.element),this.layout(0,0,!0),this.addDisposables(this.gridview.onDidMaximizedNodeChange(o=>{this._onDidMaximizedChange.fire({panel:o.view,isMaximized:o.isMaximized})}),this.gridview.onDidViewVisibilityChange(()=>this._onDidViewVisibilityChangeMicroTaskQueue.fire()),this.onDidViewVisibilityChangeMicroTaskQueue(()=>{this.layout(this.width,this.height,!0)}),it.from(()=>{var o;(o=this.element.parentElement)===null||o===void 0||o.removeChild(this.element)}),this.gridview.onDidChange(()=>{this._bufferOnDidLayoutChange.fire()}),ns.any(this.onDidAdd,this.onDidRemove,this.onDidActiveChange)(()=>{this._bufferOnDidLayoutChange.fire()}),this._onDidMaximizedChange,this._onDidViewVisibilityChangeMicroTaskQueue,this._bufferOnDidLayoutChange)}setVisible(e,n){this.gridview.setViewVisible(Xe(e.element),n),this._bufferOnDidLayoutChange.fire()}isVisible(e){return this.gridview.isViewVisible(Xe(e.element))}updateOptions(e){var n,r,o,l;e.proportionalLayout,e.orientation&&(this.gridview.orientation=e.orientation),"disableResizing"in e&&(this.disableResizing=(n=e.disableAutoResizing)!==null&&n!==void 0?n:!1),"locked"in e&&(this.locked=(r=e.locked)!==null&&r!==void 0?r:!1),"margin"in e&&(this.gridview.margin=(o=e.margin)!==null&&o!==void 0?o:0),"className"in e&&this._classNames.setClassNames((l=e.className)!==null&&l!==void 0?l:"")}maximizeGroup(e){this.gridview.maximizeView(e),this.doSetGroupActive(e)}isMaximizedGroup(e){return this.gridview.maximizedView()===e}exitMaximizedGroup(){this.gridview.exitMaximizedView()}hasMaximizedGroup(){return this.gridview.hasMaximizedView()}doAddGroup(e,n=[0],r){this.gridview.addView(e,r??ri.Distribute,n),this._onDidAdd.fire(e)}doRemoveGroup(e,n){if(!this._groups.has(e.id))throw new Error("invalid operation");const r=this._groups.get(e.id),o=this.gridview.remove(e,ri.Distribute);if(r&&!n?.skipDispose&&(r.disposable.dispose(),r.value.dispose(),this._groups.delete(e.id),this._onDidRemove.fire(e)),!n?.skipActive&&this._activeGroup===e){const l=Array.from(this._groups.values());this.doSetGroupActive(l.length>0?l[0].value:void 0)}return o}getPanel(e){var n;return(n=this._groups.get(e))===null||n===void 0?void 0:n.value}doSetGroupActive(e){this._activeGroup!==e&&(this._activeGroup&&this._activeGroup.setActive(!1),e&&e.setActive(!0),this._activeGroup=e,this._onDidActiveChange.fire(e))}removeGroup(e){this.doRemoveGroup(e)}moveToNext(e){var n;if(e||(e={}),!e.group){if(!this.activeGroup)return;e.group=this.activeGroup}const r=Xe(e.group.element),o=(n=this.gridview.next(r))===null||n===void 0?void 0:n.view;this.doSetGroupActive(o)}moveToPrevious(e){var n;if(e||(e={}),!e.group){if(!this.activeGroup)return;e.group=this.activeGroup}const r=Xe(e.group.element),o=(n=this.gridview.previous(r))===null||n===void 0?void 0:n.view;this.doSetGroupActive(o)}layout(e,n,r){(r||e!==this.width||n!==this.height)&&(this.gridview.element.style.height=`${n}px`,this.gridview.element.style.width=`${e}px`,this.gridview.layout(e,n))}dispose(){this._onDidActiveChange.dispose(),this._onDidAdd.dispose(),this._onDidRemove.dispose();for(const e of this.groups)e.dispose();this.gridview.dispose(),super.dispose()}}class qg{get minimumSize(){return this.component.minimumSize}get maximumSize(){return this.component.maximumSize}get width(){return this.component.width}get height(){return this.component.height}get length(){return this.component.length}get orientation(){return this.component.orientation}get panels(){return this.component.panels}get onDidLayoutFromJSON(){return this.component.onDidLayoutFromJSON}get onDidLayoutChange(){return this.component.onDidLayoutChange}get onDidAddView(){return this.component.onDidAddView}get onDidRemoveView(){return this.component.onDidRemoveView}constructor(e){this.component=e}removePanel(e,n){this.component.removePanel(e,n)}focus(){this.component.focus()}getPanel(e){return this.component.getPanel(e)}layout(e,n){return this.component.layout(e,n)}addPanel(e){return this.component.addPanel(e)}movePanel(e,n){this.component.movePanel(e,n)}fromJSON(e){this.component.fromJSON(e)}toJSON(){return this.component.toJSON()}clear(){this.component.clear()}updateOptions(e){this.component.updateOptions(e)}dispose(){this.component.dispose()}}class va{get minimumSize(){return this.component.minimumSize}get maximumSize(){return this.component.maximumSize}get width(){return this.component.width}get height(){return this.component.height}get panels(){return this.component.panels}get onDidLayoutChange(){return this.component.onDidLayoutChange}get onDidLayoutFromJSON(){return this.component.onDidLayoutFromJSON}get onDidAddView(){return this.component.onDidAddView}get onDidRemoveView(){return this.component.onDidRemoveView}get onDidDrop(){return this.component.onDidDrop}get onUnhandledDragOverEvent(){return this.component.onUnhandledDragOverEvent}constructor(e){this.component=e}removePanel(e){this.component.removePanel(e)}getPanel(e){return this.component.getPanel(e)}movePanel(e,n){this.component.movePanel(e,n)}focus(){this.component.focus()}layout(e,n){this.component.layout(e,n)}addPanel(e){return this.component.addPanel(e)}fromJSON(e){this.component.fromJSON(e)}toJSON(){return this.component.toJSON()}clear(){this.component.clear()}updateOptions(e){this.component.updateOptions(e)}dispose(){this.component.dispose()}}class Wg{get width(){return this.component.width}get height(){return this.component.height}get minimumHeight(){return this.component.minimumHeight}get maximumHeight(){return this.component.maximumHeight}get minimumWidth(){return this.component.minimumWidth}get maximumWidth(){return this.component.maximumWidth}get onDidLayoutChange(){return this.component.onDidLayoutChange}get onDidAddPanel(){return this.component.onDidAddGroup}get onDidRemovePanel(){return this.component.onDidRemoveGroup}get onDidActivePanelChange(){return this.component.onDidActiveGroupChange}get onDidLayoutFromJSON(){return this.component.onDidLayoutFromJSON}get panels(){return this.component.groups}get orientation(){return this.component.orientation}set orientation(e){this.component.updateOptions({orientation:e})}constructor(e){this.component=e}focus(){this.component.focus()}layout(e,n,r=!1){this.component.layout(e,n,r)}addPanel(e){return this.component.addPanel(e)}removePanel(e,n){this.component.removePanel(e,n)}movePanel(e,n){this.component.movePanel(e,n)}getPanel(e){return this.component.getPanel(e)}fromJSON(e){return this.component.fromJSON(e)}toJSON(){return this.component.toJSON()}clear(){this.component.clear()}updateOptions(e){this.component.updateOptions(e)}dispose(){this.component.dispose()}}class tl{get id(){return this.component.id}get width(){return this.component.width}get height(){return this.component.height}get minimumHeight(){return this.component.minimumHeight}get maximumHeight(){return this.component.maximumHeight}get minimumWidth(){return this.component.minimumWidth}get maximumWidth(){return this.component.maximumWidth}get size(){return this.component.size}get totalPanels(){return this.component.totalPanels}get onDidActiveGroupChange(){return this.component.onDidActiveGroupChange}get onDidAddGroup(){return this.component.onDidAddGroup}get onDidRemoveGroup(){return this.component.onDidRemoveGroup}get onDidActivePanelChange(){return this.component.onDidActivePanelChange}get onDidAddPanel(){return this.component.onDidAddPanel}get onDidRemovePanel(){return this.component.onDidRemovePanel}get onDidMovePanel(){return this.component.onDidMovePanel}get onDidLayoutFromJSON(){return this.component.onDidLayoutFromJSON}get onDidLayoutChange(){return this.component.onDidLayoutChange}get onDidDrop(){return this.component.onDidDrop}get onWillDrop(){return this.component.onWillDrop}get onWillShowOverlay(){return this.component.onWillShowOverlay}get onWillDragGroup(){return this.component.onWillDragGroup}get onWillDragPanel(){return this.component.onWillDragPanel}get onUnhandledDragOverEvent(){return this.component.onUnhandledDragOverEvent}get onDidPopoutGroupSizeChange(){return this.component.onDidPopoutGroupSizeChange}get onDidPopoutGroupPositionChange(){return this.component.onDidPopoutGroupPositionChange}get onDidOpenPopoutWindowFail(){return this.component.onDidOpenPopoutWindowFail}get panels(){return this.component.panels}get groups(){return this.component.groups}get activePanel(){return this.component.activePanel}get activeGroup(){return this.component.activeGroup}constructor(e){this.component=e}focus(){this.component.focus()}getPanel(e){return this.component.getGroupPanel(e)}layout(e,n,r=!1){this.component.layout(e,n,r)}addPanel(e){return this.component.addPanel(e)}removePanel(e){this.component.removePanel(e)}addGroup(e){return this.component.addGroup(e)}closeAllGroups(){return this.component.closeAllGroups()}removeGroup(e){this.component.removeGroup(e)}getGroup(e){return this.component.getPanel(e)}addFloatingGroup(e,n){return this.component.addFloatingGroup(e,n)}fromJSON(e){this.component.fromJSON(e)}toJSON(){return this.component.toJSON()}clear(){this.component.clear()}moveToNext(e){this.component.moveToNext(e)}moveToPrevious(e){this.component.moveToPrevious(e)}maximizeGroup(e){this.component.maximizeGroup(e.group)}hasMaximizedGroup(){return this.component.hasMaximizedGroup()}exitMaximizedGroup(){this.component.exitMaximizedGroup()}get onDidMaximizedGroupChange(){return this.component.onDidMaximizedGroupChange}addPopoutGroup(e,n){return this.component.addPopoutGroup(e,n)}updateOptions(e){this.component.updateOptions(e)}dispose(){this.component.dispose()}}class ih extends pe{constructor(e){super(),this.el=e,this.dataDisposable=new wt,this.pointerEventsDisposable=new wt,this._onDragStart=new j,this.onDragStart=this._onDragStart.event,this.addDisposables(this._onDragStart,this.dataDisposable,this.pointerEventsDisposable),this.configure()}isCancelled(e){return!1}configure(){this.addDisposables(this._onDragStart,be(this.el,"dragstart",e=>{if(e.defaultPrevented||this.isCancelled(e)){e.preventDefault();return}const n=$o();this.pointerEventsDisposable.value={dispose:()=>{n.release()}},this.el.classList.add("dv-dragged"),setTimeout(()=>this.el.classList.remove("dv-dragged"),0),this.dataDisposable.value=this.getData(e),this._onDragStart.fire(e),e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.items.length>0||e.dataTransfer.setData("text/plain",""))}),be(this.el,"dragend",()=>{this.pointerEventsDisposable.dispose(),setTimeout(()=>{this.dataDisposable.dispose()},0)}))}}class Zg extends pe{constructor(e,n){super(),this.element=e,this.callbacks=n,this.target=null,this.registerListeners()}onDragEnter(e){this.target=e.target,this.callbacks.onDragEnter(e)}onDragOver(e){e.preventDefault(),this.callbacks.onDragOver&&this.callbacks.onDragOver(e)}onDragLeave(e){this.target===e.target&&(this.target=null,this.callbacks.onDragLeave(e))}onDragEnd(e){this.target=null,this.callbacks.onDragEnd(e)}onDrop(e){this.callbacks.onDrop(e)}registerListeners(){this.addDisposables(be(this.element,"dragenter",e=>{this.onDragEnter(e)},!0)),this.addDisposables(be(this.element,"dragover",e=>{this.onDragOver(e)},!0)),this.addDisposables(be(this.element,"dragleave",e=>{this.onDragLeave(e)})),this.addDisposables(be(this.element,"dragend",e=>{this.onDragEnd(e)})),this.addDisposables(be(this.element,"drop",e=>{this.onDrop(e)}))}}class Rx extends $c{get nativeEvent(){return this.options.nativeEvent}get position(){return this.options.position}constructor(e){super(),this.options=e}}function Gm(u){switch(u){case"above":return"top";case"below":return"bottom";case"left":return"left";case"right":return"right";case"within":return"center";default:throw new Error(`invalid direction '${u}'`)}}function Ox(u){switch(u){case"top":return"above";case"bottom":return"below";case"left":return"left";case"right":return"right";case"center":return"within";default:throw new Error(`invalid position '${u}'`)}}const Nx={value:20,type:"percentage"},Mx={value:50,type:"percentage"},zx=100,Ix=100;class fi extends pe{get disabled(){return this._disabled}set disabled(e){this._disabled=e}get state(){return this._state}constructor(e,n){super(),this.element=e,this.options=n,this._onDrop=new j,this.onDrop=this._onDrop.event,this._onWillShowOverlay=new j,this.onWillShowOverlay=this._onWillShowOverlay.event,this._disabled=!1,this._acceptedTargetZonesSet=new Set(this.options.acceptedTargetZones),this.dnd=new Zg(this.element,{onDragEnter:()=>{var r,o,l;(l=(o=(r=this.options).getOverrideTarget)===null||o===void 0?void 0:o.call(r))===null||l===void 0||l.getElements()},onDragOver:r=>{var o,l,h,d,p,m,v;fi.ACTUAL_TARGET=this;const y=(l=(o=this.options).getOverrideTarget)===null||l===void 0?void 0:l.call(o);if(this._acceptedTargetZonesSet.size===0){if(y)return;this.removeDropTarget();return}const b=(p=(d=(h=this.options).getOverlayOutline)===null||d===void 0?void 0:d.call(h))!==null&&p!==void 0?p:this.element,x=b.offsetWidth,D=b.offsetHeight;if(x===0||D===0)return;const R=r.currentTarget.getBoundingClientRect(),B=((m=r.clientX)!==null&&m!==void 0?m:0)-R.left,w=((v=r.clientY)!==null&&v!==void 0?v:0)-R.top,F=this.calculateQuadrant(this._acceptedTargetZonesSet,B,w,x,D);if(this.isAlreadyUsed(r)||F===null){this.removeDropTarget();return}if(!this.options.canDisplayOverlay(r,F)){if(y)return;this.removeDropTarget();return}const O=new Rx({nativeEvent:r,position:F});if(this._onWillShowOverlay.fire(O),O.defaultPrevented){this.removeDropTarget();return}this.markAsUsed(r),y||this.targetElement||(this.targetElement=document.createElement("div"),this.targetElement.className="dv-drop-target-dropzone",this.overlayElement=document.createElement("div"),this.overlayElement.className="dv-drop-target-selection",this._state="center",this.targetElement.appendChild(this.overlayElement),b.classList.add("dv-drop-target"),b.append(this.targetElement)),this.toggleClasses(F,x,D),this._state=F},onDragLeave:()=>{var r,o;!((o=(r=this.options).getOverrideTarget)===null||o===void 0)&&o.call(r)||this.removeDropTarget()},onDragEnd:r=>{var o,l;const h=(l=(o=this.options).getOverrideTarget)===null||l===void 0?void 0:l.call(o);h&&fi.ACTUAL_TARGET===this&&this._state&&(r.stopPropagation(),this._onDrop.fire({position:this._state,nativeEvent:r})),this.removeDropTarget(),h?.clear()},onDrop:r=>{var o,l,h;r.preventDefault();const d=this._state;this.removeDropTarget(),(h=(l=(o=this.options).getOverrideTarget)===null||l===void 0?void 0:l.call(o))===null||h===void 0||h.clear(),d&&(r.stopPropagation(),this._onDrop.fire({position:d,nativeEvent:r}))}}),this.addDisposables(this._onDrop,this._onWillShowOverlay,this.dnd)}setTargetZones(e){this._acceptedTargetZonesSet=new Set(e)}setOverlayModel(e){this.options.overlayModel=e}dispose(){this.removeDropTarget(),super.dispose()}markAsUsed(e){e[fi.USED_EVENT_ID]=!0}isAlreadyUsed(e){const n=e[fi.USED_EVENT_ID];return typeof n=="boolean"&&n}toggleClasses(e,n,r){var o,l,h,d,p,m,v;const y=(l=(o=this.options).getOverrideTarget)===null||l===void 0?void 0:l.call(o);if(!y&&!this.overlayElement)return;const b=n<zx,x=r<Ix,D=e==="left",R=e==="right",B=e==="top",w=e==="bottom",F=!b&&R,O=!b&&D,z=!x&&B,M=!x&&w;let V=1;const T=(d=(h=this.options.overlayModel)===null||h===void 0?void 0:h.size)!==null&&d!==void 0?d:Mx;if(T.type==="percentage"?V=Pe(T.value,0,100)/100:((F||O)&&(V=Pe(0,T.value,n)/n),(z||M)&&(V=Pe(0,T.value,r)/r)),y){const K=(v=(m=(p=this.options).getOverlayOutline)===null||m===void 0?void 0:m.call(p))!==null&&v!==void 0?v:this.element,Q=K.getBoundingClientRect(),ee=y.getElements(void 0,K),$=ee.root,J=ee.overlay,ae=$.getBoundingClientRect(),P=Q.top-ae.top,A=Q.left-ae.left,X={top:P,left:A,width:n,height:r};F?(X.left=A+n*(1-V),X.width=n*V):O?X.width=n*V:z?X.height=r*V:M&&(X.top=P+r*(1-V),X.height=r*V),b&&D&&(X.width=4),b&&R&&(X.left=A+n-4,X.width=4);const ne=`${Math.round(X.top)}px`,ve=`${Math.round(X.left)}px`,S=`${Math.round(X.width)}px`,Z=`${Math.round(X.height)}px`;if(J.style.top===ne&&J.style.left===ve&&J.style.width===S&&J.style.height===Z)return;J.style.top=ne,J.style.left=ve,J.style.width=S,J.style.height=Z,J.style.visibility="visible",J.className=`dv-drop-target-anchor${this.options.className?` ${this.options.className}`:""}`,me(J,"dv-drop-target-left",D),me(J,"dv-drop-target-right",R),me(J,"dv-drop-target-top",B),me(J,"dv-drop-target-bottom",w),me(J,"dv-drop-target-center",e==="center"),ee.changed&&(me(J,"dv-drop-target-anchor-container-changed",!0),setTimeout(()=>{me(J,"dv-drop-target-anchor-container-changed",!1)},10));return}if(!this.overlayElement)return;const U={top:"0px",left:"0px",width:"100%",height:"100%"};F?(U.left=`${100*(1-V)}%`,U.width=`${100*V}%`):O?U.width=`${100*V}%`:z?U.height=`${100*V}%`:M&&(U.top=`${100*(1-V)}%`,U.height=`${100*V}%`),this.overlayElement.style.top=U.top,this.overlayElement.style.left=U.left,this.overlayElement.style.width=U.width,this.overlayElement.style.height=U.height,me(this.overlayElement,"dv-drop-target-small-vertical",x),me(this.overlayElement,"dv-drop-target-small-horizontal",b),me(this.overlayElement,"dv-drop-target-left",D),me(this.overlayElement,"dv-drop-target-right",R),me(this.overlayElement,"dv-drop-target-top",B),me(this.overlayElement,"dv-drop-target-bottom",w),me(this.overlayElement,"dv-drop-target-center",e==="center")}calculateQuadrant(e,n,r,o,l){var h,d;const p=(d=(h=this.options.overlayModel)===null||h===void 0?void 0:h.activationSize)!==null&&d!==void 0?d:Nx;return p.type==="percentage"?Gx(e,n,r,o,l,p.value):Lx(e,n,r,o,l,p.value)}removeDropTarget(){var e;this.targetElement&&(this._state=void 0,(e=this.targetElement.parentElement)===null||e===void 0||e.classList.remove("dv-drop-target"),this.targetElement.remove(),this.targetElement=void 0,this.overlayElement=void 0)}}fi.USED_EVENT_ID="__dockview_droptarget_event_is_used__";function Gx(u,e,n,r,o,l){const h=100*e/r,d=100*n/o;return u.has("left")&&h<l?"left":u.has("right")&&h>100-l?"right":u.has("top")&&d<l?"top":u.has("bottom")&&d>100-l?"bottom":u.has("center")?"center":null}function Lx(u,e,n,r,o,l){return u.has("left")&&e<l?"left":u.has("right")&&e>r-l?"right":u.has("top")&&n<l?"top":u.has("bottom")&&n>o-l?"bottom":u.has("center")?"center":null}const qc=Object.keys({disableAutoResizing:void 0,disableDnd:void 0,className:void 0});class Ux extends Pg{constructor(e,n,r,o){super(),this.nativeEvent=e,this.position=n,this.getData=r,this.panel=o}}class Kg extends $c{constructor(){super()}}class Qg extends pe{get isFocused(){return this._isFocused}get isActive(){return this._isActive}get isVisible(){return this._isVisible}get width(){return this._width}get height(){return this._height}constructor(e,n){super(),this.id=e,this.component=n,this._isFocused=!1,this._isActive=!1,this._isVisible=!0,this._width=0,this._height=0,this._parameters={},this.panelUpdatesDisposable=new wt,this._onDidDimensionChange=new j,this.onDidDimensionsChange=this._onDidDimensionChange.event,this._onDidChangeFocus=new j,this.onDidFocusChange=this._onDidChangeFocus.event,this._onWillFocus=new j,this.onWillFocus=this._onWillFocus.event,this._onDidVisibilityChange=new j,this.onDidVisibilityChange=this._onDidVisibilityChange.event,this._onWillVisibilityChange=new j,this.onWillVisibilityChange=this._onWillVisibilityChange.event,this._onDidActiveChange=new j,this.onDidActiveChange=this._onDidActiveChange.event,this._onActiveChange=new j,this.onActiveChange=this._onActiveChange.event,this._onDidParametersChange=new j,this.onDidParametersChange=this._onDidParametersChange.event,this.addDisposables(this.onDidFocusChange(r=>{this._isFocused=r.isFocused}),this.onDidActiveChange(r=>{this._isActive=r.isActive}),this.onDidVisibilityChange(r=>{this._isVisible=r.isVisible}),this.onDidDimensionsChange(r=>{this._width=r.width,this._height=r.height}),this.panelUpdatesDisposable,this._onDidDimensionChange,this._onDidChangeFocus,this._onDidVisibilityChange,this._onDidActiveChange,this._onWillFocus,this._onActiveChange,this._onWillFocus,this._onWillVisibilityChange,this._onDidParametersChange)}getParameters(){return this._parameters}initialize(e){this.panelUpdatesDisposable.value=this._onDidParametersChange.event(n=>{this._parameters=n,e.update({params:n})})}setVisible(e){this._onWillVisibilityChange.fire({isVisible:e})}setActive(){this._onActiveChange.fire()}updateParameters(e){this._onDidParametersChange.fire(e)}}class Jg extends Qg{constructor(e,n){super(e,n),this._onDidConstraintsChangeInternal=new j,this.onDidConstraintsChangeInternal=this._onDidConstraintsChangeInternal.event,this._onDidConstraintsChange=new j({replay:!0}),this.onDidConstraintsChange=this._onDidConstraintsChange.event,this._onDidSizeChange=new j,this.onDidSizeChange=this._onDidSizeChange.event,this.addDisposables(this._onDidConstraintsChangeInternal,this._onDidConstraintsChange,this._onDidSizeChange)}setConstraints(e){this._onDidConstraintsChangeInternal.fire(e)}setSize(e){this._onDidSizeChange.fire(e)}}class Vx extends Jg{set pane(e){this._pane=e}constructor(e,n){super(e,n),this._onDidExpansionChange=new j({replay:!0}),this.onDidExpansionChange=this._onDidExpansionChange.event,this._onMouseEnter=new j({}),this.onMouseEnter=this._onMouseEnter.event,this._onMouseLeave=new j({}),this.onMouseLeave=this._onMouseLeave.event,this.addDisposables(this._onDidExpansionChange,this._onMouseEnter,this._onMouseLeave)}setExpanded(e){var n;(n=this._pane)===null||n===void 0||n.setExpanded(e)}get isExpanded(){var e;return!!(!((e=this._pane)===null||e===void 0)&&e.isExpanded())}}class nh extends pe{get element(){return this._element}get width(){return this._width}get height(){return this._height}get params(){var e;return(e=this._params)===null||e===void 0?void 0:e.params}constructor(e,n,r){super(),this.id=e,this.component=n,this.api=r,this._height=0,this._width=0,this._element=document.createElement("div"),this._element.tabIndex=-1,this._element.style.outline="none",this._element.style.height="100%",this._element.style.width="100%",this._element.style.overflow="hidden";const o=jg(this._element);this.addDisposables(this.api,o.onDidFocus(()=>{this.api._onDidChangeFocus.fire({isFocused:!0})}),o.onDidBlur(()=>{this.api._onDidChangeFocus.fire({isFocused:!1})}),o)}focus(){const e=new Kg;this.api._onWillFocus.fire(e),!e.defaultPrevented&&this._element.focus()}layout(e,n){this._width=e,this._height=n,this.api._onDidDimensionChange.fire({width:e,height:n}),this.part&&this._params&&this.part.update(this._params.params)}init(e){this._params=e,this.part=this.getComponent()}update(e){var n,r;this._params=Object.assign(Object.assign({},this._params),{params:Object.assign(Object.assign({},(n=this._params)===null||n===void 0?void 0:n.params),e.params)});for(const o of Object.keys(e.params))e.params[o]===void 0&&delete this._params.params[o];(r=this.part)===null||r===void 0||r.update({params:this._params.params})}toJSON(){var e,n;const r=(n=(e=this._params)===null||e===void 0?void 0:e.params)!==null&&n!==void 0?n:{};return{id:this.id,component:this.component,params:Object.keys(r).length>0?r:void 0}}dispose(){var e;this.api.dispose(),(e=this.part)===null||e===void 0||e.dispose(),super.dispose()}}class Bx extends nh{set orientation(e){this._orientation=e}get orientation(){return this._orientation}get minimumSize(){const e=this.headerSize,r=this.isExpanded()?this._minimumBodySize:0;return e+r}get maximumSize(){const e=this.headerSize,r=this.isExpanded()?this._maximumBodySize:0;return e+r}get size(){return this._size}get orthogonalSize(){return this._orthogonalSize}set orthogonalSize(e){this._orthogonalSize=e}get minimumBodySize(){return this._minimumBodySize}set minimumBodySize(e){this._minimumBodySize=typeof e=="number"?e:0}get maximumBodySize(){return this._maximumBodySize}set maximumBodySize(e){this._maximumBodySize=typeof e=="number"?e:Number.POSITIVE_INFINITY}get headerVisible(){return this._headerVisible}set headerVisible(e){this._headerVisible=e,this.header.style.display=e?"":"none"}constructor(e){super(e.id,e.component,new Vx(e.id,e.component)),this._onDidChangeExpansionState=new j({replay:!0}),this.onDidChangeExpansionState=this._onDidChangeExpansionState.event,this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._orthogonalSize=0,this._size=0,this._isExpanded=!1,this.api.pane=this,this.api.initialize(this),this.headerSize=e.headerSize,this.headerComponent=e.headerComponent,this._minimumBodySize=e.minimumBodySize,this._maximumBodySize=e.maximumBodySize,this._isExpanded=e.isExpanded,this._headerVisible=e.isHeaderVisible,this._onDidChangeExpansionState.fire(this.isExpanded()),this._orientation=e.orientation,this.element.classList.add("dv-pane"),this.addDisposables(this.api.onWillVisibilityChange(n=>{const{isVisible:r}=n,{accessor:o}=this._params;o.setVisible(this,r)}),this.api.onDidSizeChange(n=>{this._onDidChange.fire({size:n.size})}),be(this.element,"mouseenter",n=>{this.api._onMouseEnter.fire(n)}),be(this.element,"mouseleave",n=>{this.api._onMouseLeave.fire(n)})),this.addDisposables(this._onDidChangeExpansionState,this.onDidChangeExpansionState(n=>{this.api._onDidExpansionChange.fire({isExpanded:n})}),this.api.onDidFocusChange(n=>{this.header&&(n.isFocused?rl(this.header,"focused"):ma(this.header,"focused"))})),this.renderOnce()}setVisible(e){this.api._onDidVisibilityChange.fire({isVisible:e})}setActive(e){this.api._onDidActiveChange.fire({isActive:e})}isExpanded(){return this._isExpanded}setExpanded(e){this._isExpanded!==e&&(this._isExpanded=e,e?(this.animationTimer&&clearTimeout(this.animationTimer),this.body&&this.element.appendChild(this.body)):this.animationTimer=setTimeout(()=>{var n;(n=this.body)===null||n===void 0||n.remove()},200),this._onDidChange.fire(e?{size:this.width}:{}),this._onDidChangeExpansionState.fire(e))}layout(e,n){this._size=e,this._orthogonalSize=n;const[r,o]=this.orientation===ue.HORIZONTAL?[e,n]:[n,e];super.layout(r,o)}init(e){var n,r;super.init(e),typeof e.minimumBodySize=="number"&&(this.minimumBodySize=e.minimumBodySize),typeof e.maximumBodySize=="number"&&(this.maximumBodySize=e.maximumBodySize),this.bodyPart=this.getBodyComponent(),this.headerPart=this.getHeaderComponent(),this.bodyPart.init(Object.assign(Object.assign({},e),{api:this.api})),this.headerPart.init(Object.assign(Object.assign({},e),{api:this.api})),(n=this.body)===null||n===void 0||n.append(this.bodyPart.element),(r=this.header)===null||r===void 0||r.append(this.headerPart.element),typeof e.isExpanded=="boolean"&&this.setExpanded(e.isExpanded)}toJSON(){const e=this._params;return Object.assign(Object.assign({},super.toJSON()),{headerComponent:this.headerComponent,title:e.title})}renderOnce(){this.header=document.createElement("div"),this.header.tabIndex=0,this.header.className="dv-pane-header",this.header.style.height=`${this.headerSize}px`,this.header.style.lineHeight=`${this.headerSize}px`,this.header.style.minHeight=`${this.headerSize}px`,this.header.style.maxHeight=`${this.headerSize}px`,this.element.appendChild(this.header),this.body=document.createElement("div"),this.body.className="dv-pane-body",this.element.appendChild(this.body)}getComponent(){return{update:e=>{var n,r;(n=this.bodyPart)===null||n===void 0||n.update({params:e}),(r=this.headerPart)===null||r===void 0||r.update({params:e})},dispose:()=>{var e,n;(e=this.bodyPart)===null||e===void 0||e.dispose(),(n=this.headerPart)===null||n===void 0||n.dispose()}}}}class Hx extends Bx{constructor(e){super({id:e.id,component:e.component,headerComponent:e.headerComponent,orientation:e.orientation,isExpanded:e.isExpanded,isHeaderVisible:!0,headerSize:e.headerSize,minimumBodySize:e.minimumBodySize,maximumBodySize:e.maximumBodySize}),this._onDidDrop=new j,this.onDidDrop=this._onDidDrop.event,this._onUnhandledDragOverEvent=new j,this.onUnhandledDragOverEvent=this._onUnhandledDragOverEvent.event,this.accessor=e.accessor,this.addDisposables(this._onDidDrop,this._onUnhandledDragOverEvent),e.disableDnd||this.initDragFeatures()}initDragFeatures(){if(!this.header)return;const e=this.id,n=this.accessor.id;this.header.draggable=!0,this.handler=new class extends ih{getData(){return Di.getInstance().setData([new ca(n,e)],ca.prototype),{dispose:()=>{Di.getInstance().clearData(ca.prototype)}}}}(this.header),this.target=new fi(this.element,{acceptedTargetZones:["top","bottom"],overlayModel:{activationSize:{type:"percentage",value:50}},canDisplayOverlay:(r,o)=>{const l=na();if(l&&l.paneId!==this.id&&l.viewId===this.accessor.id)return!0;const h=new Ux(r,o,na,this);return this._onUnhandledDragOverEvent.fire(h),h.isAccepted}}),this.addDisposables(this._onDidDrop,this.handler,this.target,this.target.onDrop(r=>{this.onDrop(r)}))}onDrop(e){const n=na();if(!n||n.viewId!==this.accessor.id){this._onDidDrop.fire(Object.assign(Object.assign({},e),{panel:this,api:new va(this.accessor),getData:na}));return}const r=this._params.containerApi,o=n.paneId,l=r.getPanel(o);if(!l){this._onDidDrop.fire(Object.assign(Object.assign({},e),{panel:this,getData:na,api:new va(this.accessor)}));return}const h=r.panels,d=h.indexOf(l);let p=r.panels.indexOf(this);(e.position==="left"||e.position==="top")&&(p=Math.max(0,p-1)),(e.position==="right"||e.position==="bottom")&&(d>p&&p++,p=Math.min(h.length-1,p)),r.movePanel(d,p)}}class Px extends pe{get element(){return this._element}constructor(e,n){super(),this.accessor=e,this.group=n,this.disposable=new wt,this._onDidFocus=new j,this.onDidFocus=this._onDidFocus.event,this._onDidBlur=new j,this.onDidBlur=this._onDidBlur.event,this._element=document.createElement("div"),this._element.className="dv-content-container",this._element.tabIndex=-1,this.addDisposables(this._onDidFocus,this._onDidBlur);const r=n.dropTargetContainer;this.dropTarget=new fi(this.element,{getOverlayOutline:()=>{var o;return((o=e.options.theme)===null||o===void 0?void 0:o.dndPanelOverlay)==="group"?this.element.parentElement:null},className:"dv-drop-target-content",acceptedTargetZones:["top","bottom","left","right","center"],canDisplayOverlay:(o,l)=>{if(this.group.locked==="no-drop-target"||this.group.locked&&l==="center")return!1;const h=xt();return!h&&o.shiftKey&&this.group.location.type!=="floating"?!1:h&&h.viewId===this.accessor.id?!0:this.group.canDisplayOverlay(o,l,"content")},getOverrideTarget:r?()=>r.model:void 0}),this.addDisposables(this.dropTarget)}show(){this.element.style.display=""}hide(){this.element.style.display="none"}renderPanel(e,n={asActive:!0}){const r=n.asActive||this.panel&&this.group.isPanelActive(this.panel);this.panel&&this.panel.view.content.element.parentElement===this._element&&this._element.removeChild(this.panel.view.content.element),this.panel=e;let o;switch(e.api.renderer){case"onlyWhenVisible":this.group.renderContainer.detatch(e),this.panel&&r&&this._element.appendChild(this.panel.view.content.element),o=this._element;break;case"always":e.view.content.element.parentElement===this._element&&this._element.removeChild(e.view.content.element),o=this.group.renderContainer.attach({panel:e,referenceContainer:this});break;default:throw new Error(`dockview: invalid renderer type '${e.api.renderer}'`)}if(r){const l=jg(o),h=new pe;h.addDisposables(l,l.onDidFocus(()=>this._onDidFocus.fire()),l.onDidBlur(()=>this._onDidBlur.fire())),this.disposable.value=h}}openPanel(e){this.panel!==e&&this.renderPanel(e)}layout(e,n){}closePanel(){var e;this.panel&&this.panel.api.renderer==="onlyWhenVisible"&&((e=this.panel.view.content.element.parentElement)===null||e===void 0||e.removeChild(this.panel.view.content.element)),this.panel=void 0}dispose(){this.disposable.dispose(),super.dispose()}}function $g(u,e,n){var r,o;rl(e,"dv-dragged"),e.style.top="-9999px",document.body.appendChild(e),u.setDragImage(e,(r=n?.x)!==null&&r!==void 0?r:0,(o=n?.y)!==null&&o!==void 0?o:0),setTimeout(()=>{ma(e,"dv-dragged"),e.remove()},0)}class jx extends ih{constructor(e,n,r,o){super(e),this.accessor=n,this.group=r,this.panel=o,this.panelTransfer=Di.getInstance()}getData(e){return this.panelTransfer.setData([new Gn(this.accessor.id,this.group.id,this.panel.id)],Gn.prototype),{dispose:()=>{this.panelTransfer.clearData(Gn.prototype)}}}}class kx extends pe{get element(){return this._element}constructor(e,n,r){super(),this.panel=e,this.accessor=n,this.group=r,this.content=void 0,this._onPointDown=new j,this.onPointerDown=this._onPointDown.event,this._onDropped=new j,this.onDrop=this._onDropped.event,this._onDragStart=new j,this.onDragStart=this._onDragStart.event,this._element=document.createElement("div"),this._element.className="dv-tab",this._element.tabIndex=0,this._element.draggable=!this.accessor.options.disableDnd,me(this.element,"dv-inactive-tab",!0);const o=new jx(this._element,this.accessor,this.group,this.panel);this.dropTarget=new fi(this._element,{acceptedTargetZones:["left","right"],overlayModel:{activationSize:{value:50,type:"percentage"}},canDisplayOverlay:(l,h)=>{if(this.group.locked)return!1;const d=xt();return d&&this.accessor.id===d.viewId?!0:this.group.model.canDisplayOverlay(l,h,"tab")},getOverrideTarget:()=>{var l;return(l=r.model.dropTargetContainer)===null||l===void 0?void 0:l.model}}),this.onWillShowOverlay=this.dropTarget.onWillShowOverlay,this.addDisposables(this._onPointDown,this._onDropped,this._onDragStart,o.onDragStart(l=>{if(l.dataTransfer){const h=getComputedStyle(this.element),d=this.element.cloneNode(!0);Array.from(h).forEach(p=>d.style.setProperty(p,h.getPropertyValue(p),h.getPropertyPriority(p))),d.style.position="absolute",$g(l.dataTransfer,d,{y:-10,x:30})}this._onDragStart.fire(l)}),o,be(this._element,"pointerdown",l=>{this._onPointDown.fire(l)}),this.dropTarget.onDrop(l=>{this._onDropped.fire(l)}),this.dropTarget)}setActive(e){me(this.element,"dv-active-tab",e),me(this.element,"dv-inactive-tab",!e)}setContent(e){this.content&&this._element.removeChild(this.content.element),this.content=e,this._element.appendChild(this.content.element)}updateDragAndDropState(){this._element.draggable=!this.accessor.options.disableDnd}dispose(){super.dispose()}}class Fx extends ih{constructor(e,n,r){super(e),this.accessor=n,this.group=r,this.panelTransfer=Di.getInstance(),this.addDisposables(be(e,"pointerdown",o=>{o.shiftKey&&cx(o)},!0))}isCancelled(e){return this.group.api.location.type==="floating"&&!e.shiftKey}getData(e){const n=e.dataTransfer;this.panelTransfer.setData([new Gn(this.accessor.id,this.group.id,null)],Gn.prototype);const r=window.getComputedStyle(this.el),o=r.getPropertyValue("--dv-activegroup-visiblepanel-tab-background-color"),l=r.getPropertyValue("--dv-activegroup-visiblepanel-tab-color");if(n){const h=document.createElement("div");h.style.backgroundColor=o,h.style.color=l,h.style.padding="2px 8px",h.style.height="24px",h.style.fontSize="11px",h.style.lineHeight="20px",h.style.borderRadius="12px",h.style.position="absolute",h.style.pointerEvents="none",h.style.top="-9999px",h.textContent=`Multiple Panels (${this.group.size})`,$g(n,h,{y:-10,x:30})}return{dispose:()=>{this.panelTransfer.clearData(Gn.prototype)}}}}class Yx extends pe{get element(){return this._element}constructor(e,n){super(),this.accessor=e,this.group=n,this._onDrop=new j,this.onDrop=this._onDrop.event,this._onDragStart=new j,this.onDragStart=this._onDragStart.event,this._element=document.createElement("div"),this._element.className="dv-void-container",this._element.draggable=!this.accessor.options.disableDnd,this.addDisposables(this._onDrop,this._onDragStart,be(this._element,"pointerdown",()=>{this.accessor.doSetGroupActive(this.group)}));const r=new Fx(this._element,e,n);this.dropTarget=new fi(this._element,{acceptedTargetZones:["center"],canDisplayOverlay:(o,l)=>{const h=xt();return h&&this.accessor.id===h.viewId?!0:n.model.canDisplayOverlay(o,l,"header_space")},getOverrideTarget:()=>{var o;return(o=n.model.dropTargetContainer)===null||o===void 0?void 0:o.model}}),this.onWillShowOverlay=this.dropTarget.onWillShowOverlay,this.addDisposables(r,r.onDragStart(o=>{this._onDragStart.fire(o)}),this.dropTarget.onDrop(o=>{this._onDrop.fire(o)}),this.dropTarget)}updateDragAndDropState(){this._element.draggable=!this.accessor.options.disableDnd}}class ol extends pe{get element(){return this._element}constructor(e){super(),this.scrollableElement=e,this._scrollLeft=0,this._element=document.createElement("div"),this._element.className="dv-scrollable",this._horizontalScrollbar=document.createElement("div"),this._horizontalScrollbar.className="dv-scrollbar-horizontal",this.element.appendChild(e),this.element.appendChild(this._horizontalScrollbar),this.addDisposables(be(this.element,"wheel",n=>{this._scrollLeft+=n.deltaY*ol.MouseWheelSpeed,this.calculateScrollbarStyles()}),be(this._horizontalScrollbar,"pointerdown",n=>{n.preventDefault(),me(this.element,"dv-scrollable-scrolling",!0);const r=n.clientX,o=this._scrollLeft,l=d=>{const p=d.clientX-r,{clientWidth:m}=this.element,{scrollWidth:v}=this.scrollableElement,y=m/v;this._scrollLeft=o+p/y,this.calculateScrollbarStyles()},h=()=>{me(this.element,"dv-scrollable-scrolling",!1),document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",h),document.removeEventListener("pointercancel",h)};document.addEventListener("pointermove",l),document.addEventListener("pointerup",h),document.addEventListener("pointercancel",h)}),be(this.element,"scroll",()=>{this.calculateScrollbarStyles()}),be(this.scrollableElement,"scroll",()=>{this._scrollLeft=this.scrollableElement.scrollLeft,this.calculateScrollbarStyles()}),sl(this.element,()=>{me(this.element,"dv-scrollable-resizing",!0),this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(()=>{clearTimeout(this._animationTimer),me(this.element,"dv-scrollable-resizing",!1)},500),this.calculateScrollbarStyles()}))}calculateScrollbarStyles(){const{clientWidth:e}=this.element,{scrollWidth:n}=this.scrollableElement;if(n>e){const o=e*(e/n);this._horizontalScrollbar.style.width=`${o}px`,this._scrollLeft=Pe(this._scrollLeft,0,this.scrollableElement.scrollWidth-e),this.scrollableElement.scrollLeft=this._scrollLeft;const l=this._scrollLeft/(n-e);this._horizontalScrollbar.style.left=`${(e-o)*l}px`}else this._horizontalScrollbar.style.width="0px",this._horizontalScrollbar.style.left="0px",this._scrollLeft=0}}ol.MouseWheelSpeed=1;class Xx extends pe{get showTabsOverflowControl(){return this._showTabsOverflowControl}set showTabsOverflowControl(e){if(this._showTabsOverflowControl!=e&&(this._showTabsOverflowControl=e,e)){const n=new lx(this._tabsList);this._observerDisposable.value=new pe(n,n.onDidChange(r=>{const o=r.hasScrollX||r.hasScrollY;this.toggleDropdown({reset:!o})}),be(this._tabsList,"scroll",()=>{this.toggleDropdown({reset:!1})}))}}get element(){return this._element}get panels(){return this._tabs.map(e=>e.value.panel.id)}get size(){return this._tabs.length}get tabs(){return this._tabs.map(e=>e.value)}constructor(e,n,r){if(super(),this.group=e,this.accessor=n,this._observerDisposable=new wt,this._tabs=[],this.selectedIndex=-1,this._showTabsOverflowControl=!1,this._onTabDragStart=new j,this.onTabDragStart=this._onTabDragStart.event,this._onDrop=new j,this.onDrop=this._onDrop.event,this._onWillShowOverlay=new j,this.onWillShowOverlay=this._onWillShowOverlay.event,this._onOverflowTabsChange=new j,this.onOverflowTabsChange=this._onOverflowTabsChange.event,this._tabsList=document.createElement("div"),this._tabsList.className="dv-tabs-container dv-horizontal",this.showTabsOverflowControl=r.showTabsOverflowControl,n.options.scrollbars==="native")this._element=this._tabsList;else{const o=new ol(this._tabsList);this._element=o.element,this.addDisposables(o)}this.addDisposables(this._onOverflowTabsChange,this._observerDisposable,this._onWillShowOverlay,this._onDrop,this._onTabDragStart,be(this.element,"pointerdown",o=>{if(o.defaultPrevented)return;o.button===0&&this.accessor.doSetGroupActive(this.group)}),it.from(()=>{for(const{value:o,disposable:l}of this._tabs)l.dispose(),o.dispose();this._tabs=[]}))}indexOf(e){return this._tabs.findIndex(n=>n.value.panel.id===e)}isActive(e){return this.selectedIndex>-1&&this._tabs[this.selectedIndex].value===e}setActivePanel(e){let n=0;for(const r of this._tabs){const o=e.id===r.value.panel.id;if(r.value.setActive(o),o){const l=r.value.element,h=l.parentElement;(n<h.scrollLeft||n+l.clientWidth>h.scrollLeft+h.clientWidth)&&(h.scrollLeft=n)}n+=r.value.element.clientWidth}}openPanel(e,n=this._tabs.length){if(this._tabs.find(h=>h.value.panel.id===e.id))return;const r=new kx(e,this.accessor,this.group);r.setContent(e.view.tab);const o=new pe(r.onDragStart(h=>{this._onTabDragStart.fire({nativeEvent:h,panel:e})}),r.onPointerDown(h=>{if(h.defaultPrevented)return;const d=!this.accessor.options.disableFloatingGroups,p=this.group.api.location.type==="floating"&&this.size===1;if(d&&!p&&h.shiftKey){h.preventDefault();const m=this.accessor.getGroupPanel(r.panel.id),{top:v,left:y}=r.element.getBoundingClientRect(),{top:b,left:x}=this.accessor.element.getBoundingClientRect();this.accessor.addFloatingGroup(m,{x:y-x,y:v-b,inDragMode:!0});return}switch(h.button){case 0:this.group.activePanel!==e&&this.group.model.openPanel(e);break}}),r.onDrop(h=>{this._onDrop.fire({event:h.nativeEvent,index:this._tabs.findIndex(d=>d.value===r)})}),r.onWillShowOverlay(h=>{this._onWillShowOverlay.fire(new ll(h,{kind:"tab",panel:this.group.activePanel,api:this.accessor.api,group:this.group,getData:xt}))})),l={value:r,disposable:o};this.addTab(l,n)}delete(e){const n=this.indexOf(e),r=this._tabs.splice(n,1)[0],{value:o,disposable:l}=r;l.dispose(),o.dispose(),o.element.remove()}addTab(e,n=this._tabs.length){if(n<0||n>this._tabs.length)throw new Error("invalid location");this._tabsList.insertBefore(e.value.element,this._tabsList.children[n]),this._tabs=[...this._tabs.slice(0,n),e,...this._tabs.slice(n)],this.selectedIndex<0&&(this.selectedIndex=n)}toggleDropdown(e){const n=e.reset?[]:this._tabs.filter(r=>!gx(r.value.element,this._tabsList)).map(r=>r.value.panel.id);this._onOverflowTabsChange.fire({tabs:n,reset:e.reset})}updateDragAndDropState(){for(const e of this._tabs)e.value.updateDragAndDropState()}}const sh=u=>{const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttributeNS(null,"height",u.height),e.setAttributeNS(null,"width",u.width),e.setAttributeNS(null,"viewBox",u.viewbox),e.setAttributeNS(null,"aria-hidden","false"),e.setAttributeNS(null,"focusable","false"),e.classList.add("dv-svg");const n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttributeNS(null,"d",u.path),e.appendChild(n),e},qx=()=>sh({width:"11",height:"11",viewbox:"0 0 28 28",path:"M2.1 27.3L0 25.2L11.55 13.65L0 2.1L2.1 0L13.65 11.55L25.2 0L27.3 2.1L15.75 13.65L27.3 25.2L25.2 27.3L13.65 15.75L2.1 27.3Z"}),Wx=()=>sh({width:"11",height:"11",viewbox:"0 0 24 15",path:"M12 14.15L0 2.15L2.15 0L12 9.9L21.85 0.0499992L24 2.2L12 14.15Z"}),ev=()=>sh({width:"11",height:"11",viewbox:"0 0 15 25",path:"M2.15 24.1L0 21.95L9.9 12.05L0 2.15L2.15 0L14.2 12.05L2.15 24.1Z"});function Zx(){const u=document.createElement("div");u.className="dv-tabs-overflow-dropdown-default";const e=document.createElement("span");e.textContent="";const n=ev();return u.appendChild(n),u.appendChild(e),{element:u,update:r=>{e.textContent=`${r.tabs}`}}}class Kx extends pe{get onTabDragStart(){return this.tabs.onTabDragStart}get panels(){return this.tabs.panels}get size(){return this.tabs.size}get hidden(){return this._hidden}set hidden(e){this._hidden=e,this.element.style.display=e?"none":""}get element(){return this._element}constructor(e,n){super(),this.accessor=e,this.group=n,this._hidden=!1,this.dropdownPart=null,this._overflowTabs=[],this._dropdownDisposable=new wt,this._onDrop=new j,this.onDrop=this._onDrop.event,this._onGroupDragStart=new j,this.onGroupDragStart=this._onGroupDragStart.event,this._onWillShowOverlay=new j,this.onWillShowOverlay=this._onWillShowOverlay.event,this._element=document.createElement("div"),this._element.className="dv-tabs-and-actions-container",me(this._element,"dv-full-width-single-tab",this.accessor.options.singleTabMode==="fullwidth"),this.rightActionsContainer=document.createElement("div"),this.rightActionsContainer.className="dv-right-actions-container",this.leftActionsContainer=document.createElement("div"),this.leftActionsContainer.className="dv-left-actions-container",this.preActionsContainer=document.createElement("div"),this.preActionsContainer.className="dv-pre-actions-container",this.tabs=new Xx(n,e,{showTabsOverflowControl:!e.options.disableTabsOverflowList}),this.voidContainer=new Yx(this.accessor,this.group),this._element.appendChild(this.preActionsContainer),this._element.appendChild(this.tabs.element),this._element.appendChild(this.leftActionsContainer),this._element.appendChild(this.voidContainer.element),this._element.appendChild(this.rightActionsContainer),this.addDisposables(this.tabs.onDrop(r=>this._onDrop.fire(r)),this.tabs.onWillShowOverlay(r=>this._onWillShowOverlay.fire(r)),e.onDidOptionsChange(()=>{this.tabs.showTabsOverflowControl=!e.options.disableTabsOverflowList}),this.tabs.onOverflowTabsChange(r=>{this.toggleDropdown(r)}),this.tabs,this._onWillShowOverlay,this._onDrop,this._onGroupDragStart,this.voidContainer,this.voidContainer.onDragStart(r=>{this._onGroupDragStart.fire({nativeEvent:r,group:this.group})}),this.voidContainer.onDrop(r=>{this._onDrop.fire({event:r.nativeEvent,index:this.tabs.size})}),this.voidContainer.onWillShowOverlay(r=>{this._onWillShowOverlay.fire(new ll(r,{kind:"header_space",panel:this.group.activePanel,api:this.accessor.api,group:this.group,getData:xt}))}),be(this.voidContainer.element,"pointerdown",r=>{if(r.defaultPrevented)return;if(!this.accessor.options.disableFloatingGroups&&r.shiftKey&&this.group.api.location.type!=="floating"){r.preventDefault();const{top:l,left:h}=this.element.getBoundingClientRect(),{top:d,left:p}=this.accessor.element.getBoundingClientRect();this.accessor.addFloatingGroup(this.group,{x:h-p+20,y:l-d+20,inDragMode:!0})}}))}show(){this.hidden||(this.element.style.display="")}hide(){this._element.style.display="none"}setRightActionsElement(e){this.rightActions!==e&&(this.rightActions&&(this.rightActions.remove(),this.rightActions=void 0),e&&(this.rightActionsContainer.appendChild(e),this.rightActions=e))}setLeftActionsElement(e){this.leftActions!==e&&(this.leftActions&&(this.leftActions.remove(),this.leftActions=void 0),e&&(this.leftActionsContainer.appendChild(e),this.leftActions=e))}setPrefixActionsElement(e){this.preActions!==e&&(this.preActions&&(this.preActions.remove(),this.preActions=void 0),e&&(this.preActionsContainer.appendChild(e),this.preActions=e))}isActive(e){return this.tabs.isActive(e)}indexOf(e){return this.tabs.indexOf(e)}setActive(e){}delete(e){this.tabs.delete(e),this.updateClassnames()}setActivePanel(e){this.tabs.setActivePanel(e)}openPanel(e,n=this.tabs.size){this.tabs.openPanel(e,n),this.updateClassnames()}closePanel(e){this.delete(e.id)}updateClassnames(){me(this._element,"dv-single-tab",this.size===1)}toggleDropdown(e){const n=e.reset?[]:e.tabs;if(this._overflowTabs=n,this._overflowTabs.length>0&&this.dropdownPart){this.dropdownPart.update({tabs:n.length});return}if(this._overflowTabs.length===0){this._dropdownDisposable.dispose();return}const r=document.createElement("div");r.className="dv-tabs-overflow-dropdown-root";const o=Zx();o.update({tabs:n.length}),this.dropdownPart=o,r.appendChild(o.element),this.rightActionsContainer.prepend(r),this._dropdownDisposable.value=new pe(it.from(()=>{var l,h;r.remove(),(h=(l=this.dropdownPart)===null||l===void 0?void 0:l.dispose)===null||h===void 0||h.call(l),this.dropdownPart=null}),be(r,"pointerdown",l=>{l.preventDefault()},{capture:!0}),be(r,"click",l=>{const h=document.createElement("div");h.style.overflow="auto",h.className="dv-tabs-overflow-container";for(const p of this.tabs.tabs.filter(m=>this._overflowTabs.includes(m.panel.id))){const m=this.group.panels.find(x=>x===p.panel),y=m.view.createTabRenderer("headerOverflow").element,b=document.createElement("div");me(b,"dv-tab",!0),me(b,"dv-active-tab",m.api.isActive),me(b,"dv-inactive-tab",!m.api.isActive),b.addEventListener("pointerdown",()=>{this.accessor.popupService.close(),p.element.scrollIntoView(),p.panel.api.setActive()}),b.appendChild(y),h.appendChild(b)}const d=bx(r);this.accessor.popupService.openPopover(h,{x:l.clientX,y:l.clientY,zIndex:d?.style.zIndex?`calc(${d.style.zIndex} * 2)`:void 0})}))}updateDragAndDropState(){this.tabs.updateDragAndDropState(),this.voidContainer.updateDragAndDropState()}}class tv extends Pg{constructor(e,n,r,o,l){super(),this.nativeEvent=e,this.target=n,this.position=r,this.getData=o,this.group=l}}const Wc=Object.keys({disableAutoResizing:void 0,hideBorders:void 0,singleTabMode:void 0,disableFloatingGroups:void 0,floatingGroupBounds:void 0,popoutUrl:void 0,defaultRenderer:void 0,debug:void 0,rootOverlayModel:void 0,locked:void 0,disableDnd:void 0,className:void 0,noPanelsOverlay:void 0,dndEdges:void 0,theme:void 0,disableTabsOverflowList:void 0,scrollbars:void 0});function Qx(u){return!!u.referencePanel}function Jx(u){return!!u.referenceGroup}function $x(u){return!!u.referencePanel}function ew(u){return!!u.referenceGroup}class rh extends $c{get nativeEvent(){return this.options.nativeEvent}get position(){return this.options.position}get panel(){return this.options.panel}get group(){return this.options.group}get api(){return this.options.api}constructor(e){super(),this.options=e}getData(){return this.options.getData()}}class iv extends rh{get kind(){return this._kind}constructor(e){super(e),this._kind=e.kind}}class ll{get kind(){return this.options.kind}get nativeEvent(){return this.event.nativeEvent}get position(){return this.event.position}get defaultPrevented(){return this.event.defaultPrevented}get panel(){return this.options.panel}get api(){return this.options.api}get group(){return this.options.group}preventDefault(){this.event.preventDefault()}getData(){return this.options.getData()}constructor(e,n){this.event=e,this.options=n}}class tw extends pe{get element(){throw new Error("dockview: not supported")}get activePanel(){return this._activePanel}get locked(){return this._locked}set locked(e){this._locked=e,me(this.container,"dv-locked-groupview",e==="no-drop-target"||e)}get isActive(){return this._isGroupActive}get panels(){return this._panels}get size(){return this._panels.length}get isEmpty(){return this._panels.length===0}get hasWatermark(){return!!(this.watermark&&this.container.contains(this.watermark.element))}get header(){return this.tabsContainer}get isContentFocused(){return document.activeElement?Pc(document.activeElement,this.contentContainer.element):!1}get location(){return this._location}set location(e){switch(this._location=e,me(this.container,"dv-groupview-floating",!1),me(this.container,"dv-groupview-popout",!1),e.type){case"grid":this.contentContainer.dropTarget.setTargetZones(["top","bottom","left","right","center"]);break;case"floating":this.contentContainer.dropTarget.setTargetZones(["center"]),this.contentContainer.dropTarget.setTargetZones(e?["center"]:["top","bottom","left","right","center"]),me(this.container,"dv-groupview-floating",!0);break;case"popout":this.contentContainer.dropTarget.setTargetZones(["center"]),me(this.container,"dv-groupview-popout",!0);break}this.groupPanel.api._onDidLocationChange.fire({location:this.location})}constructor(e,n,r,o,l){var h;super(),this.container=e,this.accessor=n,this.id=r,this.options=o,this.groupPanel=l,this._isGroupActive=!1,this._locked=!1,this._location={type:"grid"},this.mostRecentlyUsed=[],this._overwriteRenderContainer=null,this._overwriteDropTargetContainer=null,this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._width=0,this._height=0,this._panels=[],this._panelDisposables=new Map,this._onMove=new j,this.onMove=this._onMove.event,this._onDidDrop=new j,this.onDidDrop=this._onDidDrop.event,this._onWillDrop=new j,this.onWillDrop=this._onWillDrop.event,this._onWillShowOverlay=new j,this.onWillShowOverlay=this._onWillShowOverlay.event,this._onTabDragStart=new j,this.onTabDragStart=this._onTabDragStart.event,this._onGroupDragStart=new j,this.onGroupDragStart=this._onGroupDragStart.event,this._onDidAddPanel=new j,this.onDidAddPanel=this._onDidAddPanel.event,this._onDidPanelTitleChange=new j,this.onDidPanelTitleChange=this._onDidPanelTitleChange.event,this._onDidPanelParametersChange=new j,this.onDidPanelParametersChange=this._onDidPanelParametersChange.event,this._onDidRemovePanel=new j,this.onDidRemovePanel=this._onDidRemovePanel.event,this._onDidActivePanelChange=new j,this.onDidActivePanelChange=this._onDidActivePanelChange.event,this._onUnhandledDragOverEvent=new j,this.onUnhandledDragOverEvent=this._onUnhandledDragOverEvent.event,me(this.container,"dv-groupview",!0),this._api=new tl(this.accessor),this.tabsContainer=new Kx(this.accessor,this.groupPanel),this.contentContainer=new Px(this.accessor,this),e.append(this.tabsContainer.element,this.contentContainer.element),this.header.hidden=!!o.hideHeader,this.locked=(h=o.locked)!==null&&h!==void 0?h:!1,this.addDisposables(this._onTabDragStart,this._onGroupDragStart,this._onWillShowOverlay,this.tabsContainer.onTabDragStart(d=>{this._onTabDragStart.fire(d)}),this.tabsContainer.onGroupDragStart(d=>{this._onGroupDragStart.fire(d)}),this.tabsContainer.onDrop(d=>{this.handleDropEvent("header",d.event,"center",d.index)}),this.contentContainer.onDidFocus(()=>{this.accessor.doSetGroupActive(this.groupPanel)}),this.contentContainer.onDidBlur(()=>{}),this.contentContainer.dropTarget.onDrop(d=>{this.handleDropEvent("content",d.nativeEvent,d.position)}),this.tabsContainer.onWillShowOverlay(d=>{this._onWillShowOverlay.fire(d)}),this.contentContainer.dropTarget.onWillShowOverlay(d=>{this._onWillShowOverlay.fire(new ll(d,{kind:"content",panel:this.activePanel,api:this._api,group:this.groupPanel,getData:xt}))}),this._onMove,this._onDidChange,this._onDidDrop,this._onWillDrop,this._onDidAddPanel,this._onDidRemovePanel,this._onDidActivePanelChange,this._onUnhandledDragOverEvent,this._onDidPanelTitleChange,this._onDidPanelParametersChange)}focusContent(){this.contentContainer.element.focus()}set renderContainer(e){this.panels.forEach(n=>{this.renderContainer.detatch(n)}),this._overwriteRenderContainer=e,this.panels.forEach(n=>{this.rerender(n)})}get renderContainer(){var e;return(e=this._overwriteRenderContainer)!==null&&e!==void 0?e:this.accessor.overlayRenderContainer}set dropTargetContainer(e){this._overwriteDropTargetContainer=e}get dropTargetContainer(){var e;return(e=this._overwriteDropTargetContainer)!==null&&e!==void 0?e:this.accessor.rootDropTargetContainer}initialize(){this.options.panels&&this.options.panels.forEach(e=>{this.doAddPanel(e)}),this.options.activePanel&&this.openPanel(this.options.activePanel),this.setActive(this.isActive,!0),this.updateContainer(),this.accessor.options.createRightHeaderActionComponent&&(this._rightHeaderActions=this.accessor.options.createRightHeaderActionComponent(this.groupPanel),this.addDisposables(this._rightHeaderActions),this._rightHeaderActions.init({containerApi:this._api,api:this.groupPanel.api,group:this.groupPanel}),this.tabsContainer.setRightActionsElement(this._rightHeaderActions.element)),this.accessor.options.createLeftHeaderActionComponent&&(this._leftHeaderActions=this.accessor.options.createLeftHeaderActionComponent(this.groupPanel),this.addDisposables(this._leftHeaderActions),this._leftHeaderActions.init({containerApi:this._api,api:this.groupPanel.api,group:this.groupPanel}),this.tabsContainer.setLeftActionsElement(this._leftHeaderActions.element)),this.accessor.options.createPrefixHeaderActionComponent&&(this._prefixHeaderActions=this.accessor.options.createPrefixHeaderActionComponent(this.groupPanel),this.addDisposables(this._prefixHeaderActions),this._prefixHeaderActions.init({containerApi:this._api,api:this.groupPanel.api,group:this.groupPanel}),this.tabsContainer.setPrefixActionsElement(this._prefixHeaderActions.element))}rerender(e){this.contentContainer.renderPanel(e,{asActive:!1})}indexOf(e){return this.tabsContainer.indexOf(e.id)}toJSON(){var e;const n={views:this.tabsContainer.panels,activeView:(e=this._activePanel)===null||e===void 0?void 0:e.id,id:this.id};return this.locked!==!1&&(n.locked=this.locked),this.header.hidden&&(n.hideHeader=!0),n}moveToNext(e){e||(e={}),e.panel||(e.panel=this.activePanel);const n=e.panel?this.panels.indexOf(e.panel):-1;let r;if(n<this.panels.length-1)r=n+1;else if(!e.suppressRoll)r=0;else return;this.openPanel(this.panels[r])}moveToPrevious(e){if(e||(e={}),e.panel||(e.panel=this.activePanel),!e.panel)return;const n=this.panels.indexOf(e.panel);let r;if(n>0)r=n-1;else if(!e.suppressRoll)r=this.panels.length-1;else return;this.openPanel(this.panels[r])}containsPanel(e){return this.panels.includes(e)}init(e){}update(e){}focus(){var e;(e=this._activePanel)===null||e===void 0||e.focus()}openPanel(e,n={}){(typeof n.index!="number"||n.index>this.panels.length)&&(n.index=this.panels.length);const r=!!n.skipSetActive;if(e.updateParentGroup(this.groupPanel,{skipSetActive:n.skipSetActive}),this.doAddPanel(e,n.index,{skipSetActive:r}),this._activePanel===e){this.contentContainer.renderPanel(e,{asActive:!0});return}r||this.doSetActivePanel(e),n.skipSetGroupActive||this.accessor.doSetGroupActive(this.groupPanel),n.skipSetActive||this.updateContainer()}removePanel(e,n={skipSetActive:!1}){const r=typeof e=="string"?e:e.id,o=this._panels.find(l=>l.id===r);if(!o)throw new Error("invalid operation");return this._removePanel(o,n)}closeAllPanels(){if(this.panels.length>0){const e=[...this.panels];for(const n of e)this.doClose(n)}else this.accessor.removeGroup(this.groupPanel)}closePanel(e){this.doClose(e)}doClose(e){const n=this.panels.length===1&&this.accessor.groups.length===1;this.accessor.removePanel(e,n&&this.accessor.options.noPanelsOverlay==="emptyGroup"?{removeEmptyGroup:!1}:void 0)}isPanelActive(e){return this._activePanel===e}updateActions(e){this.tabsContainer.setRightActionsElement(e)}setActive(e,n=!1){!n&&this.isActive===e||(this._isGroupActive=e,me(this.container,"dv-active-group",e),me(this.container,"dv-inactive-group",!e),this.tabsContainer.setActive(this.isActive),!this._activePanel&&this.panels.length>0&&this.doSetActivePanel(this.panels[0]),this.updateContainer())}layout(e,n){var r;this._width=e,this._height=n,this.contentContainer.layout(this._width,this._height),!((r=this._activePanel)===null||r===void 0)&&r.layout&&this._activePanel.layout(this._width,this._height)}_removePanel(e,n){const r=this._activePanel===e;if(this.doRemovePanel(e),r&&this.panels.length>0){const o=this.mostRecentlyUsed[0];this.openPanel(o,{skipSetActive:n.skipSetActive,skipSetGroupActive:n.skipSetActiveGroup})}return this._activePanel&&this.panels.length===0&&this.doSetActivePanel(void 0),n.skipSetActive||this.updateContainer(),e}doRemovePanel(e){const n=this.panels.indexOf(e);if(this._activePanel===e&&this.contentContainer.closePanel(),this.tabsContainer.delete(e.id),this._panels.splice(n,1),this.mostRecentlyUsed.includes(e)){const o=this.mostRecentlyUsed.indexOf(e);this.mostRecentlyUsed.splice(o,1)}const r=this._panelDisposables.get(e.id);r&&(r.dispose(),this._panelDisposables.delete(e.id)),this._onDidRemovePanel.fire({panel:e})}doAddPanel(e,n=this.panels.length,r={skipSetActive:!1}){const l=this._panels.indexOf(e)>-1;this.tabsContainer.show(),this.contentContainer.show(),this.tabsContainer.openPanel(e,n),r.skipSetActive||this.contentContainer.openPanel(e),!l&&(this.updateMru(e),this.panels.splice(n,0,e),this._panelDisposables.set(e.id,new pe(e.api.onDidTitleChange(h=>this._onDidPanelTitleChange.fire(h)),e.api.onDidParametersChange(h=>this._onDidPanelParametersChange.fire(h)))),this._onDidAddPanel.fire({panel:e}))}doSetActivePanel(e){this._activePanel!==e&&(this._activePanel=e,e&&(this.tabsContainer.setActivePanel(e),e.layout(this._width,this._height),this.updateMru(e),this._onDidActivePanelChange.fire({panel:e})))}updateMru(e){this.mostRecentlyUsed.includes(e)&&this.mostRecentlyUsed.splice(this.mostRecentlyUsed.indexOf(e),1),this.mostRecentlyUsed=[e,...this.mostRecentlyUsed]}updateContainer(){var e,n;if(this.panels.forEach(r=>r.runEvents()),this.isEmpty&&!this.watermark){const r=this.accessor.createWatermarkComponent();r.init({containerApi:this._api,group:this.groupPanel}),this.watermark=r,be(this.watermark.element,"pointerdown",()=>{this.isActive||this.accessor.doSetGroupActive(this.groupPanel)}),this.contentContainer.element.appendChild(this.watermark.element)}!this.isEmpty&&this.watermark&&(this.watermark.element.remove(),(n=(e=this.watermark).dispose)===null||n===void 0||n.call(e),this.watermark=void 0)}canDisplayOverlay(e,n,r){const o=new tv(e,r,n,xt,this.accessor.getPanel(this.id));return this._onUnhandledDragOverEvent.fire(o),o.isAccepted}handleDropEvent(e,n,r,o){if(this.locked==="no-drop-target")return;function l(){switch(e){case"header":return typeof o=="number"?"tab":"header_space";case"content":return"content"}}const h=typeof o=="number"?this.panels[o]:void 0,d=new iv({nativeEvent:n,position:r,panel:h,getData:()=>xt(),kind:l(),group:this.groupPanel,api:this._api});if(this._onWillDrop.fire(d),d.defaultPrevented)return;const p=xt();if(p&&p.viewId===this.accessor.id){if(e==="content"&&p.groupId===this.id&&(r==="center"||p.panelId===null)||e==="header"&&p.groupId===this.id&&p.panelId===null)return;if(p.panelId===null){const{groupId:x}=p;this._onMove.fire({target:r,groupId:x,index:o});return}if(this.tabsContainer.indexOf(p.panelId)!==-1&&this.tabsContainer.size===1)return;const{groupId:v,panelId:y}=p;if(this.id===v&&!r&&this.tabsContainer.indexOf(y)===o)return;this._onMove.fire({target:r,groupId:p.groupId,itemId:p.panelId,index:o})}else this._onDidDrop.fire(new rh({nativeEvent:n,position:r,panel:h,getData:()=>xt(),group:this.groupPanel,api:this._api}))}updateDragAndDropState(){this.tabsContainer.updateDragAndDropState()}dispose(){var e,n,r;super.dispose(),(e=this.watermark)===null||e===void 0||e.element.remove(),(r=(n=this.watermark)===null||n===void 0?void 0:n.dispose)===null||r===void 0||r.call(n),this.watermark=void 0;for(const o of this.panels)o.dispose();this.tabsContainer.dispose(),this.contentContainer.dispose()}}class ah extends Qg{constructor(e,n,r){super(e,n),this._onDidConstraintsChangeInternal=new j,this.onDidConstraintsChangeInternal=this._onDidConstraintsChangeInternal.event,this._onDidConstraintsChange=new j,this.onDidConstraintsChange=this._onDidConstraintsChange.event,this._onDidSizeChange=new j,this.onDidSizeChange=this._onDidSizeChange.event,this.addDisposables(this._onDidConstraintsChangeInternal,this._onDidConstraintsChange,this._onDidSizeChange),r&&this.initialize(r)}setConstraints(e){this._onDidConstraintsChangeInternal.fire(e)}setSize(e){this._onDidSizeChange.fire(e)}}class nv extends nh{get priority(){return this._priority}get snap(){return this._snap}get minimumWidth(){return this.__minimumWidth()}get minimumHeight(){return this.__minimumHeight()}get maximumHeight(){return this.__maximumHeight()}get maximumWidth(){return this.__maximumWidth()}__minimumWidth(){const e=typeof this._minimumWidth=="function"?this._minimumWidth():this._minimumWidth;return e!==this._evaluatedMinimumWidth&&(this._evaluatedMinimumWidth=e,this.updateConstraints()),e}__maximumWidth(){const e=typeof this._maximumWidth=="function"?this._maximumWidth():this._maximumWidth;return e!==this._evaluatedMaximumWidth&&(this._evaluatedMaximumWidth=e,this.updateConstraints()),e}__minimumHeight(){const e=typeof this._minimumHeight=="function"?this._minimumHeight():this._minimumHeight;return e!==this._evaluatedMinimumHeight&&(this._evaluatedMinimumHeight=e,this.updateConstraints()),e}__maximumHeight(){const e=typeof this._maximumHeight=="function"?this._maximumHeight():this._maximumHeight;return e!==this._evaluatedMaximumHeight&&(this._evaluatedMaximumHeight=e,this.updateConstraints()),e}get isActive(){return this.api.isActive}get isVisible(){return this.api.isVisible}constructor(e,n,r,o){super(e,n,o??new ah(e,n)),this._evaluatedMinimumWidth=0,this._evaluatedMaximumWidth=Number.MAX_SAFE_INTEGER,this._evaluatedMinimumHeight=0,this._evaluatedMaximumHeight=Number.MAX_SAFE_INTEGER,this._minimumWidth=0,this._minimumHeight=0,this._maximumWidth=Number.MAX_SAFE_INTEGER,this._maximumHeight=Number.MAX_SAFE_INTEGER,this._snap=!1,this._onDidChange=new j,this.onDidChange=this._onDidChange.event,typeof r?.minimumWidth=="number"&&(this._minimumWidth=r.minimumWidth),typeof r?.maximumWidth=="number"&&(this._maximumWidth=r.maximumWidth),typeof r?.minimumHeight=="number"&&(this._minimumHeight=r.minimumHeight),typeof r?.maximumHeight=="number"&&(this._maximumHeight=r.maximumHeight),this.api.initialize(this),this.addDisposables(this.api.onWillVisibilityChange(l=>{const{isVisible:h}=l,{accessor:d}=this._params;d.setVisible(this,h)}),this.api.onActiveChange(()=>{const{accessor:l}=this._params;l.doSetGroupActive(this)}),this.api.onDidConstraintsChangeInternal(l=>{(typeof l.minimumWidth=="number"||typeof l.minimumWidth=="function")&&(this._minimumWidth=l.minimumWidth),(typeof l.minimumHeight=="number"||typeof l.minimumHeight=="function")&&(this._minimumHeight=l.minimumHeight),(typeof l.maximumWidth=="number"||typeof l.maximumWidth=="function")&&(this._maximumWidth=l.maximumWidth),(typeof l.maximumHeight=="number"||typeof l.maximumHeight=="function")&&(this._maximumHeight=l.maximumHeight)}),this.api.onDidSizeChange(l=>{this._onDidChange.fire({height:l.height,width:l.width})}),this._onDidChange)}setVisible(e){this.api._onDidVisibilityChange.fire({isVisible:e})}setActive(e){this.api._onDidActiveChange.fire({isActive:e})}init(e){e.maximumHeight&&(this._maximumHeight=e.maximumHeight),e.minimumHeight&&(this._minimumHeight=e.minimumHeight),e.maximumWidth&&(this._maximumWidth=e.maximumWidth),e.minimumWidth&&(this._minimumWidth=e.minimumWidth),this._priority=e.priority,this._snap=!!e.snap,super.init(e),typeof e.isVisible=="boolean"&&this.setVisible(e.isVisible)}updateConstraints(){this.api._onDidConstraintsChange.fire({minimumWidth:this._evaluatedMinimumWidth,maximumWidth:this._evaluatedMaximumWidth,minimumHeight:this._evaluatedMinimumHeight,maximumHeight:this._evaluatedMaximumHeight})}toJSON(){const e=super.toJSON(),n=o=>o===Number.MAX_SAFE_INTEGER?void 0:o,r=o=>o<=0?void 0:o;return Object.assign(Object.assign({},e),{minimumHeight:r(this.minimumHeight),maximumHeight:n(this.maximumHeight),minimumWidth:r(this.minimumWidth),maximumWidth:n(this.maximumWidth),snap:this.snap,priority:this.priority})}}const sa="dockview: DockviewGroupPanelApiImpl not initialized";class iw extends ah{get location(){if(!this._group)throw new Error(sa);return this._group.model.location}constructor(e,n){super(e,"__dockviewgroup__"),this.accessor=n,this._onDidLocationChange=new j,this.onDidLocationChange=this._onDidLocationChange.event,this._onDidActivePanelChange=new j,this.onDidActivePanelChange=this._onDidActivePanelChange.event,this.addDisposables(this._onDidLocationChange,this._onDidActivePanelChange)}close(){if(this._group)return this.accessor.removeGroup(this._group)}getWindow(){return this.location.type==="popout"?this.location.getWindow():window}moveTo(e){var n,r,o,l;if(!this._group)throw new Error(sa);const h=(n=e.group)!==null&&n!==void 0?n:this.accessor.addGroup({direction:Ox((r=e.position)!==null&&r!==void 0?r:"right"),skipSetActive:(o=e.skipSetActive)!==null&&o!==void 0?o:!1});this.accessor.moveGroupOrPanel({from:{groupId:this._group.id},to:{group:h,position:e.group&&(l=e.position)!==null&&l!==void 0?l:"center",index:e.index},skipSetActive:e.skipSetActive})}maximize(){if(!this._group)throw new Error(sa);this.location.type==="grid"&&this.accessor.maximizeGroup(this._group)}isMaximized(){if(!this._group)throw new Error(sa);return this.accessor.isMaximizedGroup(this._group)}exitMaximized(){if(!this._group)throw new Error(sa);this.isMaximized()&&this.accessor.exitMaximizedGroup()}initialize(e){this._group=e}}const nw=100,sw=100;class Lm extends nv{get minimumWidth(){var e;const n=(e=this.activePanel)===null||e===void 0?void 0:e.minimumWidth;return typeof n=="number"?n:super.__minimumWidth()}get minimumHeight(){var e;const n=(e=this.activePanel)===null||e===void 0?void 0:e.minimumHeight;return typeof n=="number"?n:super.__minimumHeight()}get maximumWidth(){var e;const n=(e=this.activePanel)===null||e===void 0?void 0:e.maximumWidth;return typeof n=="number"?n:super.__maximumWidth()}get maximumHeight(){var e;const n=(e=this.activePanel)===null||e===void 0?void 0:e.maximumHeight;return typeof n=="number"?n:super.__maximumHeight()}get panels(){return this._model.panels}get activePanel(){return this._model.activePanel}get size(){return this._model.size}get model(){return this._model}get locked(){return this._model.locked}set locked(e){this._model.locked=e}get header(){return this._model.header}constructor(e,n,r){var o,l,h,d,p,m;super(n,"groupview_default",{minimumHeight:(l=(o=r.constraints)===null||o===void 0?void 0:o.minimumHeight)!==null&&l!==void 0?l:sw,minimumWidth:(d=(h=r.constraints)===null||h===void 0?void 0:h.maximumHeight)!==null&&d!==void 0?d:nw,maximumHeight:(p=r.constraints)===null||p===void 0?void 0:p.maximumHeight,maximumWidth:(m=r.constraints)===null||m===void 0?void 0:m.maximumWidth},new iw(n,e)),this.api.initialize(this),this._model=new tw(this.element,e,n,r,this),this.addDisposables(this.model.onDidActivePanelChange(v=>{this.api._onDidActivePanelChange.fire(v)}))}focus(){this.api.isActive||this.api.setActive(),super.focus()}initialize(){this._model.initialize()}setActive(e){super.setActive(e),this.model.setActive(e)}layout(e,n){super.layout(e,n),this.model.layout(e,n)}getComponent(){return this._model}toJSON(){return this.model.toJSON()}}const rw={className:"dockview-theme-abyss"};class aw extends ah{get location(){return this.group.api.location}get title(){return this.panel.title}get isGroupActive(){return this.group.isActive}get renderer(){return this.panel.renderer}set group(e){const n=this._group;this._group!==e&&(this._group=e,this._onDidGroupChange.fire({}),this.setupGroupEventListeners(n),this._onDidLocationChange.fire({location:this.group.api.location}))}get group(){return this._group}get tabComponent(){return this._tabComponent}constructor(e,n,r,o,l){super(e.id,o),this.panel=e,this.accessor=r,this._onDidTitleChange=new j,this.onDidTitleChange=this._onDidTitleChange.event,this._onDidActiveGroupChange=new j,this.onDidActiveGroupChange=this._onDidActiveGroupChange.event,this._onDidGroupChange=new j,this.onDidGroupChange=this._onDidGroupChange.event,this._onDidRendererChange=new j,this.onDidRendererChange=this._onDidRendererChange.event,this._onDidLocationChange=new j,this.onDidLocationChange=this._onDidLocationChange.event,this.groupEventsDisposable=new wt,this._tabComponent=l,this.initialize(e),this._group=n,this.setupGroupEventListeners(),this.addDisposables(this.groupEventsDisposable,this._onDidRendererChange,this._onDidTitleChange,this._onDidGroupChange,this._onDidActiveGroupChange,this._onDidLocationChange)}getWindow(){return this.group.api.getWindow()}moveTo(e){var n,r;this.accessor.moveGroupOrPanel({from:{groupId:this._group.id,panelId:this.panel.id},to:{group:(n=e.group)!==null&&n!==void 0?n:this._group,position:e.group&&(r=e.position)!==null&&r!==void 0?r:"center",index:e.index},skipSetActive:e.skipSetActive})}setTitle(e){this.panel.setTitle(e)}setRenderer(e){this.panel.setRenderer(e)}close(){this.group.model.closePanel(this.panel)}maximize(){this.group.api.maximize()}isMaximized(){return this.group.api.isMaximized()}exitMaximized(){this.group.api.exitMaximized()}setupGroupEventListeners(e){var n;let r=(n=e?.isActive)!==null&&n!==void 0?n:!1;this.groupEventsDisposable.value=new pe(this.group.api.onDidVisibilityChange(o=>{const l=!o.isVisible&&this.isVisible,h=o.isVisible&&!this.isVisible,d=this.group.model.isPanelActive(this.panel);(l||h&&d)&&this._onDidVisibilityChange.fire(o)}),this.group.api.onDidLocationChange(o=>{this.group===this.panel.group&&this._onDidLocationChange.fire(o)}),this.group.api.onDidActiveChange(()=>{this.group===this.panel.group&&r!==this.isGroupActive&&(r=this.isGroupActive,this._onDidActiveGroupChange.fire({isActive:this.isGroupActive}))}))}}class Ws extends pe{get params(){return this._params}get title(){return this._title}get group(){return this._group}get renderer(){var e;return(e=this._renderer)!==null&&e!==void 0?e:this.accessor.renderer}get minimumWidth(){return this._minimumWidth}get minimumHeight(){return this._minimumHeight}get maximumWidth(){return this._maximumWidth}get maximumHeight(){return this._maximumHeight}constructor(e,n,r,o,l,h,d,p){super(),this.id=e,this.accessor=o,this.containerApi=l,this.view=d,this._renderer=p.renderer,this._group=h,this._minimumWidth=p.minimumWidth,this._minimumHeight=p.minimumHeight,this._maximumWidth=p.maximumWidth,this._maximumHeight=p.maximumHeight,this.api=new aw(this,this._group,o,n,r),this.addDisposables(this.api.onActiveChange(()=>{o.setActivePanel(this)}),this.api.onDidSizeChange(m=>{this.group.api.setSize(m)}),this.api.onDidRendererChange(()=>{this.group.model.rerender(this)}))}init(e){this._params=e.params,this.view.init(Object.assign(Object.assign({},e),{api:this.api,containerApi:this.containerApi})),this.setTitle(e.title)}focus(){const e=new Kg;this.api._onWillFocus.fire(e),!e.defaultPrevented&&(this.api.isActive||this.api.setActive())}toJSON(){return{id:this.id,contentComponent:this.view.contentComponent,tabComponent:this.view.tabComponent,params:Object.keys(this._params||{}).length>0?this._params:void 0,title:this.title,renderer:this._renderer,minimumHeight:this._minimumHeight,maximumHeight:this._maximumHeight,minimumWidth:this._minimumWidth,maximumWidth:this._maximumWidth}}setTitle(e){e!==this.title&&(this._title=e,this.api._onDidTitleChange.fire({title:e}))}setRenderer(e){e!==this.renderer&&(this._renderer=e,this.api._onDidRendererChange.fire({renderer:e}))}update(e){var n;this._params=Object.assign(Object.assign({},(n=this._params)!==null&&n!==void 0?n:{}),e.params);for(const r of Object.keys(e.params))e.params[r]===void 0&&delete this._params[r];this.view.update({params:this._params})}updateParentGroup(e,n){this._group=e,this.api.group=this._group;const r=this._group.model.isPanelActive(this),o=this.group.api.isActive&&r;n?.skipSetActive||this.api.isActive!==o&&this.api._onDidActiveChange.fire({isActive:this.group.api.isActive&&r}),this.api.isVisible!==r&&this.api._onDidVisibilityChange.fire({isVisible:r})}runEvents(){const e=this._group.model.isPanelActive(this),n=this.group.api.isActive&&e;this.api.isActive!==n&&this.api._onDidActiveChange.fire({isActive:this.group.api.isActive&&e}),this.api.isVisible!==e&&this.api._onDidVisibilityChange.fire({isVisible:e})}layout(e,n){this.api._onDidDimensionChange.fire({width:e,height:n}),this.view.layout(e,n)}dispose(){this.api.dispose(),this.view.dispose()}}class Um extends pe{get element(){return this._element}constructor(){super(),this._element=document.createElement("div"),this._element.className="dv-default-tab",this._content=document.createElement("div"),this._content.className="dv-default-tab-content",this.action=document.createElement("div"),this.action.className="dv-default-tab-action",this.action.appendChild(qx()),this._element.appendChild(this._content),this._element.appendChild(this.action),this.render()}init(e){this._title=e.title,this.addDisposables(e.api.onDidTitleChange(n=>{this._title=n.title,this.render()}),be(this.action,"pointerdown",n=>{n.preventDefault()}),be(this.action,"click",n=>{n.defaultPrevented||(n.preventDefault(),e.api.close())})),this.render()}render(){var e;this._content.textContent!==this._title&&(this._content.textContent=(e=this._title)!==null&&e!==void 0?e:"")}}class sv{get content(){return this._content}get tab(){return this._tab}constructor(e,n,r,o){this.accessor=e,this.id=n,this.contentComponent=r,this.tabComponent=o,this._content=this.createContentComponent(this.id,r),this._tab=this.createTabComponent(this.id,o)}createTabRenderer(e){var n;const r=this.createTabComponent(this.id,this.tabComponent);return this._params&&r.init(Object.assign(Object.assign({},this._params),{tabLocation:e})),this._updateEvent&&((n=r.update)===null||n===void 0||n.call(r,this._updateEvent)),r}init(e){this._params=e,this.content.init(e),this.tab.init(Object.assign(Object.assign({},e),{tabLocation:"header"}))}layout(e,n){var r,o;(o=(r=this.content).layout)===null||o===void 0||o.call(r,e,n)}update(e){var n,r,o,l;this._updateEvent=e,(r=(n=this.content).update)===null||r===void 0||r.call(n,e),(l=(o=this.tab).update)===null||l===void 0||l.call(o,e)}dispose(){var e,n,r,o;(n=(e=this.content).dispose)===null||n===void 0||n.call(e),(o=(r=this.tab).dispose)===null||o===void 0||o.call(r)}createContentComponent(e,n){return this.accessor.options.createComponent({id:e,name:n})}createTabComponent(e,n){const r=n??this.accessor.options.defaultTabComponent;if(r){if(this.accessor.options.createTabComponent){const o=this.accessor.options.createTabComponent({id:e,name:r});return o||new Um}console.warn(`dockview: tabComponent '${n}' was not found. falling back to the default tab.`)}return new Um}}class ow{constructor(e){this.accessor=e}fromJSON(e,n){var r,o;const l=e.id,h=e.params,d=e.title,p=e.view,m=p?p.content.id:(r=e.contentComponent)!==null&&r!==void 0?r:"unknown",v=p?(o=p.tab)===null||o===void 0?void 0:o.id:e.tabComponent,y=new sv(this.accessor,l,m,v),b=new Ws(l,m,v,this.accessor,new tl(this.accessor),n,y,{renderer:e.renderer,minimumWidth:e.minimumWidth,minimumHeight:e.minimumHeight,maximumWidth:e.maximumWidth,maximumHeight:e.maximumHeight});return b.init({title:d??l,params:h??{}}),b}}class lw extends pe{get element(){return this._element}constructor(){super(),this._element=document.createElement("div"),this._element.className="dv-watermark"}init(e){}}class uw{constructor(){this._orderedList=[]}push(e){this._orderedList=[...this._orderedList.filter(n=>n!==e),e],this.update()}destroy(e){this._orderedList=this._orderedList.filter(n=>n!==e),this.update()}update(){for(let e=0;e<this._orderedList.length;e++)this._orderedList[e].setAttribute("aria-level",`${e}`),this._orderedList[e].style.zIndex=`calc(var(--dv-overlay-z-index, 999) + ${e*2})`}}const Ho=new uw;class In extends pe{set minimumInViewportWidth(e){this.options.minimumInViewportWidth=e}set minimumInViewportHeight(e){this.options.minimumInViewportHeight=e}get element(){return this._element}get isVisible(){return this._isVisible}constructor(e){super(),this.options=e,this._element=document.createElement("div"),this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._onDidChangeEnd=new j,this.onDidChangeEnd=this._onDidChangeEnd.event,this.addDisposables(this._onDidChange,this._onDidChangeEnd),this._element.className="dv-resize-container",this._isVisible=!0,this.setupResize("top"),this.setupResize("bottom"),this.setupResize("left"),this.setupResize("right"),this.setupResize("topleft"),this.setupResize("topright"),this.setupResize("bottomleft"),this.setupResize("bottomright"),this._element.appendChild(this.options.content),this.options.container.appendChild(this._element),this.setBounds(Object.assign(Object.assign(Object.assign(Object.assign({height:this.options.height,width:this.options.width},"top"in this.options&&{top:this.options.top}),"bottom"in this.options&&{bottom:this.options.bottom}),"left"in this.options&&{left:this.options.left}),"right"in this.options&&{right:this.options.right})),Ho.push(this._element)}setVisible(e){e!==this.isVisible&&(this._isVisible=e,me(this.element,"dv-hidden",!this.isVisible))}bringToFront(){Ho.push(this._element)}setBounds(e={}){typeof e.height=="number"&&(this._element.style.height=`${e.height}px`),typeof e.width=="number"&&(this._element.style.width=`${e.width}px`),"top"in e&&typeof e.top=="number"&&(this._element.style.top=`${e.top}px`,this._element.style.bottom="auto",this.verticalAlignment="top"),"bottom"in e&&typeof e.bottom=="number"&&(this._element.style.bottom=`${e.bottom}px`,this._element.style.top="auto",this.verticalAlignment="bottom"),"left"in e&&typeof e.left=="number"&&(this._element.style.left=`${e.left}px`,this._element.style.right="auto",this.horiziontalAlignment="left"),"right"in e&&typeof e.right=="number"&&(this._element.style.right=`${e.right}px`,this._element.style.left="auto",this.horiziontalAlignment="right");const n=this.options.container.getBoundingClientRect(),r=this._element.getBoundingClientRect(),o=Math.max(0,this.getMinimumWidth(r.width)),l=Math.max(0,this.getMinimumHeight(r.height));if(this.verticalAlignment==="top"){const h=Pe(r.top-n.top,-l,Math.max(0,n.height-r.height+l));this._element.style.top=`${h}px`,this._element.style.bottom="auto"}if(this.verticalAlignment==="bottom"){const h=Pe(n.bottom-r.bottom,-l,Math.max(0,n.height-r.height+l));this._element.style.bottom=`${h}px`,this._element.style.top="auto"}if(this.horiziontalAlignment==="left"){const h=Pe(r.left-n.left,-o,Math.max(0,n.width-r.width+o));this._element.style.left=`${h}px`,this._element.style.right="auto"}if(this.horiziontalAlignment==="right"){const h=Pe(n.right-r.right,-o,Math.max(0,n.width-r.width+o));this._element.style.right=`${h}px`,this._element.style.left="auto"}this._onDidChange.fire()}toJSON(){const e=this.options.container.getBoundingClientRect(),n=this._element.getBoundingClientRect(),r={};return this.verticalAlignment==="top"?r.top=parseFloat(this._element.style.top):this.verticalAlignment==="bottom"?r.bottom=parseFloat(this._element.style.bottom):r.top=n.top-e.top,this.horiziontalAlignment==="left"?r.left=parseFloat(this._element.style.left):this.horiziontalAlignment==="right"?r.right=parseFloat(this._element.style.right):r.left=n.left-e.left,r.width=n.width,r.height=n.height,r}setupDrag(e,n={inDragMode:!1}){const r=new wt,o=()=>{let l=null;const h=$o();r.value=new pe({dispose:()=>{h.release()}},be(window,"pointermove",d=>{const p=this.options.container.getBoundingClientRect(),m=d.clientX-p.left,v=d.clientY-p.top;me(this._element,"dv-resize-container-dragging",!0);const y=this._element.getBoundingClientRect();l===null&&(l={x:d.clientX-y.left,y:d.clientY-y.top});const b=Math.max(0,this.getMinimumWidth(y.width)),x=Math.max(0,this.getMinimumHeight(y.height)),D=Pe(v-l.y,-x,Math.max(0,p.height-y.height+x)),R=Pe(l.y-v+p.height-y.height,-x,Math.max(0,p.height-y.height+x)),B=Pe(m-l.x,-b,Math.max(0,p.width-y.width+b)),w=Pe(l.x-m+p.width-y.width,-b,Math.max(0,p.width-y.width+b)),F={};D<=R?F.top=D:F.bottom=R,B<=w?F.left=B:F.right=w,this.setBounds(F)}),be(window,"pointerup",()=>{me(this._element,"dv-resize-container-dragging",!1),r.dispose(),this._onDidChangeEnd.fire()}))};this.addDisposables(r,be(e,"pointerdown",l=>{if(l.defaultPrevented){l.preventDefault();return}zm(l)||o()}),be(this.options.content,"pointerdown",l=>{l.defaultPrevented||zm(l)||l.shiftKey&&o()}),be(this.options.content,"pointerdown",()=>{Ho.push(this._element)},!0)),n.inDragMode&&o()}setupResize(e){const n=document.createElement("div");n.className=`dv-resize-handle-${e}`,this._element.appendChild(n);const r=new wt;this.addDisposables(r,be(n,"pointerdown",o=>{o.preventDefault();let l=null;const h=$o();r.value=new pe(be(window,"pointermove",d=>{const p=this.options.container.getBoundingClientRect(),m=this._element.getBoundingClientRect(),v=d.clientY-p.top,y=d.clientX-p.left;l===null&&(l={originalY:v,originalHeight:m.height,originalX:y,originalWidth:m.width});let b,x,D,R,B,w;const F=()=>{b=Pe(v,-Number.MAX_VALUE,l.originalY+l.originalHeight>p.height?this.getMinimumHeight(p.height):Math.max(0,l.originalY+l.originalHeight-In.MINIMUM_HEIGHT)),D=l.originalY+l.originalHeight-b,x=p.height-b-D},O=()=>{b=l.originalY-l.originalHeight,D=Pe(v-b,b<0&&typeof this.options.minimumInViewportHeight=="number"?-b+this.options.minimumInViewportHeight:In.MINIMUM_HEIGHT,Number.MAX_VALUE),x=p.height-b-D},z=()=>{R=Pe(y,-Number.MAX_VALUE,l.originalX+l.originalWidth>p.width?this.getMinimumWidth(p.width):Math.max(0,l.originalX+l.originalWidth-In.MINIMUM_WIDTH)),w=l.originalX+l.originalWidth-R,B=p.width-R-w},M=()=>{R=l.originalX-l.originalWidth,w=Pe(y-R,R<0&&typeof this.options.minimumInViewportWidth=="number"?-R+this.options.minimumInViewportWidth:In.MINIMUM_WIDTH,Number.MAX_VALUE),B=p.width-R-w};switch(e){case"top":F();break;case"bottom":O();break;case"left":z();break;case"right":M();break;case"topleft":F(),z();break;case"topright":F(),M();break;case"bottomleft":O(),z();break;case"bottomright":O(),M();break}const V={};b<=x?V.top=b:V.bottom=x,R<=B?V.left=R:V.right=B,V.height=D,V.width=w,this.setBounds(V)}),{dispose:()=>{h.release()}},be(window,"pointerup",()=>{r.dispose(),this._onDidChangeEnd.fire()}))}))}getMinimumWidth(e){return typeof this.options.minimumInViewportWidth=="number"?e-this.options.minimumInViewportWidth:0}getMinimumHeight(e){return typeof this.options.minimumInViewportHeight=="number"?e-this.options.minimumInViewportHeight:0}dispose(){Ho.destroy(this._element),this._element.remove(),super.dispose()}}In.MINIMUM_HEIGHT=20;In.MINIMUM_WIDTH=20;class cw extends pe{constructor(e,n){super(),this.group=e,this.overlay=n,this.addDisposables(n)}position(e){this.overlay.setBounds(e)}}const Po=100,Nn={left:100,top:100,width:300,height:300};function hw(){const u=document.createElement("div");return u.tabIndex=-1,u}class Vm extends pe{constructor(e,n){super(),this.element=e,this.accessor=n,this.map={},this._disposed=!1,this.addDisposables(it.from(()=>{for(const r of Object.values(this.map))r.disposable.dispose(),r.destroy.dispose();this._disposed=!0}))}detatch(e){if(this.map[e.api.id]){const{disposable:n,destroy:r}=this.map[e.api.id];return n.dispose(),r.dispose(),delete this.map[e.api.id],!0}return!1}attach(e){const{panel:n,referenceContainer:r}=e;if(!this.map[n.api.id]){const v=hw();v.className="dv-render-overlay",this.map[n.api.id]={panel:n,disposable:it.NONE,destroy:it.NONE,element:v}}const o=this.map[n.api.id].element;n.view.content.element.parentElement!==o&&o.appendChild(n.view.content.element),o.parentElement!==this.element&&this.element.appendChild(o);const l=()=>{const v=Jo(r.element),y=Jo(this.element);o.style.left=`${v.left-y.left}px`,o.style.top=`${v.top-y.top}px`,o.style.width=`${v.width}px`,o.style.height=`${v.height}px`,me(o,"dv-render-overlay-float",n.group.api.location.type==="floating")},h=()=>{n.api.isVisible&&l(),o.style.display=n.api.isVisible?"":"none"},d=new wt,p=()=>{n.api.location.type==="floating"?queueMicrotask(()=>{const v=this.accessor.floatingGroups.find(D=>D.group===n.api.group);if(!v)return;const y=v.overlay.element,b=()=>{const D=Number(y.getAttribute("aria-level"));o.style.zIndex=`calc(var(--dv-overlay-z-index, 999) + ${D*2+1})`},x=new MutationObserver(()=>{b()});d.value=it.from(()=>x.disconnect()),x.observe(y,{attributeFilter:["aria-level"],attributes:!0}),b()}):o.style.zIndex=""},m=new pe(d,new Zg(o,{onDragEnd:v=>{r.dropTarget.dnd.onDragEnd(v)},onDragEnter:v=>{r.dropTarget.dnd.onDragEnter(v)},onDragLeave:v=>{r.dropTarget.dnd.onDragLeave(v)},onDrop:v=>{r.dropTarget.dnd.onDrop(v)},onDragOver:v=>{r.dropTarget.dnd.onDragOver(v)}}),n.api.onDidVisibilityChange(()=>{h()}),n.api.onDidDimensionsChange(()=>{n.api.isVisible&&l()}),n.api.onDidLocationChange(()=>{p()}));return this.map[n.api.id].destroy=it.from(()=>{var v;n.view.content.element.parentElement===o&&o.removeChild(n.view.content.element),(v=o.parentElement)===null||v===void 0||v.removeChild(o)}),p(),queueMicrotask(()=>{this.isDisposed||h()}),this.map[n.api.id].disposable.dispose(),this.map[n.api.id].disposable=m,o}}var dw=function(u,e,n,r){function o(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function d(v){try{m(r.next(v))}catch(y){h(y)}}function p(v){try{m(r.throw(v))}catch(y){h(y)}}function m(v){v.done?l(v.value):o(v.value).then(d,p)}m((r=r.apply(u,e||[])).next())})};class fw extends pe{get window(){var e,n;return(n=(e=this._window)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:null}constructor(e,n,r){super(),this.target=e,this.className=n,this.options=r,this._onWillClose=new j,this.onWillClose=this._onWillClose.event,this._onDidClose=new j,this.onDidClose=this._onDidClose.event,this._window=null,this.addDisposables(this._onWillClose,this._onDidClose,{dispose:()=>{this.close()}})}dimensions(){if(!this._window)return null;const e=this._window.value.screenX,n=this._window.value.screenY,r=this._window.value.innerWidth,o=this._window.value.innerHeight;return{top:n,left:e,width:r,height:o}}close(){var e,n;this._window&&(this._onWillClose.fire(),(n=(e=this.options).onWillClose)===null||n===void 0||n.call(e,{id:this.target,window:this._window.value}),this._window.disposable.dispose(),this._window=null,this._onDidClose.fire())}open(){var e,n;return dw(this,void 0,void 0,function*(){if(this._window)throw new Error("instance of popout window is already open");const r=`${this.options.url}`,o=Object.entries({top:this.options.top,left:this.options.left,width:this.options.width,height:this.options.height}).map(([p,m])=>`${p}=${m}`).join(","),l=window.open(r,this.target,o);if(!l)return null;const h=new pe;this._window={value:l,disposable:h},h.addDisposables(it.from(()=>{l.close()}),be(window,"beforeunload",()=>{this.close()}));const d=this.createPopoutWindowContainer();return this.className&&d.classList.add(this.className),(n=(e=this.options).onDidOpen)===null||n===void 0||n.call(e,{id:this.target,window:l}),new Promise((p,m)=>{l.addEventListener("unload",v=>{}),l.addEventListener("load",()=>{try{const v=l.document;v.title=document.title,v.body.appendChild(d),hx(v,window.document.styleSheets),be(l,"beforeunload",()=>{this.close()}),p(d)}catch(v){m(v)}})})})}createPopoutWindowContainer(){const e=document.createElement("div");return e.classList.add("dv-popout-window"),e.id="dv-popout-window",e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.top="0px",e.style.left="0px",e}}class pw extends pe{constructor(e){super(),this.accessor=e,this.init()}init(){const e=new Set,n=new Set;this.addDisposables(this.accessor.onDidAddPanel(r=>{if(e.has(r.api.id))throw new Error(`dockview: Invalid event sequence. [onDidAddPanel] called for panel ${r.api.id} but panel already exists`);e.add(r.api.id)}),this.accessor.onDidRemovePanel(r=>{if(e.has(r.api.id))e.delete(r.api.id);else throw new Error(`dockview: Invalid event sequence. [onDidRemovePanel] called for panel ${r.api.id} but panel does not exists`)}),this.accessor.onDidAddGroup(r=>{if(n.has(r.api.id))throw new Error(`dockview: Invalid event sequence. [onDidAddGroup] called for group ${r.api.id} but group already exists`);n.add(r.api.id)}),this.accessor.onDidRemoveGroup(r=>{if(n.has(r.api.id))n.delete(r.api.id);else throw new Error(`dockview: Invalid event sequence. [onDidRemoveGroup] called for group ${r.api.id} but group does not exists`)}))}}class mw extends pe{constructor(e){super(),this.root=e,this._active=null,this._activeDisposable=new wt,this._element=document.createElement("div"),this._element.className="dv-popover-anchor",this._element.style.position="relative",this.root.prepend(this._element),this.addDisposables(it.from(()=>{this.close()}),this._activeDisposable)}openPopover(e,n){var r;this.close();const o=document.createElement("div");o.style.position="absolute",o.style.zIndex=(r=n.zIndex)!==null&&r!==void 0?r:"var(--dv-overlay-z-index)",o.appendChild(e);const l=this._element.getBoundingClientRect(),h=l.left,d=l.top;o.style.top=`${n.y-d}px`,o.style.left=`${n.x-h}px`,this._element.appendChild(o),this._active=o,this._activeDisposable.value=new pe(be(window,"pointerdown",p=>{var m;const v=p.target;if(!(v instanceof HTMLElement))return;let y=v;for(;y&&y!==o;)y=(m=y?.parentElement)!==null&&m!==void 0?m:null;y||this.close()})),requestAnimationFrame(()=>{yx(o,this.root)})}close(){this._active&&(this._active.remove(),this._activeDisposable.dispose(),this._active=null)}}class Bm extends pe{get disabled(){return this._disabled}set disabled(e){var n;this.disabled!==e&&(this._disabled=e,e&&((n=this.model)===null||n===void 0||n.clear()))}get model(){if(!this.disabled)return{clear:()=>{var e;this._model&&((e=this._model.root.parentElement)===null||e===void 0||e.removeChild(this._model.root)),this._model=void 0},exists:()=>!!this._model,getElements:(e,n)=>{const r=this._outline!==n;if(this._outline=n,this._model)return this._model.changed=r,this._model;const o=this.createContainer(),l=this.createAnchor();if(this._model={root:o,overlay:l,changed:r},o.appendChild(l),this.element.appendChild(o),e?.target instanceof HTMLElement){const h=e.target.getBoundingClientRect(),d=this.element.getBoundingClientRect();l.style.left=`${h.left-d.left}px`,l.style.top=`${h.top-d.top}px`}return this._model}}}constructor(e,n){super(),this.element=e,this._disabled=!1,this._disabled=n.disabled,this.addDisposables(it.from(()=>{var r;(r=this.model)===null||r===void 0||r.clear()}))}createContainer(){const e=document.createElement("div");return e.className="dv-drop-target-container",e}createAnchor(){const e=document.createElement("div");return e.className="dv-drop-target-anchor",e.style.visibility="hidden",e}}const Hm={activationSize:{type:"pixels",value:10},size:{type:"pixels",value:20}};function jo(u){const e=u.from.activePanel;[...u.from.panels].map(r=>{const o=u.from.model.removePanel(r);return u.from.model.renderContainer.detatch(r),o}).forEach(r=>{u.to.model.openPanel(r,{skipSetActive:e!==r,skipSetGroupActive:!0})})}class gw extends Xg{get orientation(){return this.gridview.orientation}get totalPanels(){return this.panels.length}get panels(){return this.groups.flatMap(e=>e.panels)}get options(){return this._options}get activePanel(){const e=this.activeGroup;if(e)return e.activePanel}get renderer(){var e;return(e=this.options.defaultRenderer)!==null&&e!==void 0?e:"onlyWhenVisible"}get api(){return this._api}get floatingGroups(){return this._floatingGroups}constructor(e,n){var r,o,l;super(e,{proportionalLayout:!0,orientation:ue.HORIZONTAL,styles:n.hideBorders?{separatorBorder:"transparent"}:void 0,disableAutoResizing:n.disableAutoResizing,locked:n.locked,margin:(o=(r=n.theme)===null||r===void 0?void 0:r.gap)!==null&&o!==void 0?o:0,className:n.className}),this.nextGroupId=eh(),this._deserializer=new ow(this),this._watermark=null,this._onWillDragPanel=new j,this.onWillDragPanel=this._onWillDragPanel.event,this._onWillDragGroup=new j,this.onWillDragGroup=this._onWillDragGroup.event,this._onDidDrop=new j,this.onDidDrop=this._onDidDrop.event,this._onWillDrop=new j,this.onWillDrop=this._onWillDrop.event,this._onWillShowOverlay=new j,this.onWillShowOverlay=this._onWillShowOverlay.event,this._onUnhandledDragOverEvent=new j,this.onUnhandledDragOverEvent=this._onUnhandledDragOverEvent.event,this._onDidRemovePanel=new j,this.onDidRemovePanel=this._onDidRemovePanel.event,this._onDidAddPanel=new j,this.onDidAddPanel=this._onDidAddPanel.event,this._onDidPopoutGroupSizeChange=new j,this.onDidPopoutGroupSizeChange=this._onDidPopoutGroupSizeChange.event,this._onDidPopoutGroupPositionChange=new j,this.onDidPopoutGroupPositionChange=this._onDidPopoutGroupPositionChange.event,this._onDidOpenPopoutWindowFail=new j,this.onDidOpenPopoutWindowFail=this._onDidOpenPopoutWindowFail.event,this._onDidLayoutFromJSON=new j,this.onDidLayoutFromJSON=this._onDidLayoutFromJSON.event,this._onDidActivePanelChange=new j({replay:!0}),this.onDidActivePanelChange=this._onDidActivePanelChange.event,this._onDidMovePanel=new j,this.onDidMovePanel=this._onDidMovePanel.event,this._onDidMaximizedGroupChange=new j,this.onDidMaximizedGroupChange=this._onDidMaximizedGroupChange.event,this._floatingGroups=[],this._popoutGroups=[],this._onDidRemoveGroup=new j,this.onDidRemoveGroup=this._onDidRemoveGroup.event,this._onDidAddGroup=new j,this.onDidAddGroup=this._onDidAddGroup.event,this._onDidOptionsChange=new j,this.onDidOptionsChange=this._onDidOptionsChange.event,this._onDidActiveGroupChange=new j,this.onDidActiveGroupChange=this._onDidActiveGroupChange.event,this._moving=!1,this._options=n,this.popupService=new mw(this.element),this._themeClassnames=new al(this.element),this._api=new tl(this),this.rootDropTargetContainer=new Bm(this.element,{disabled:!0}),this.overlayRenderContainer=new Vm(this.gridview.element,this),this._rootDropTarget=new fi(this.element,{className:"dv-drop-target-edge",canDisplayOverlay:(h,d)=>{const p=xt();if(p)return p.viewId!==this.id?!1:d==="center"?this.gridview.length===0:!0;if(d==="center"&&this.gridview.length!==0)return!1;const m=new tv(h,"edge",d,xt);return this._onUnhandledDragOverEvent.fire(m),m.isAccepted},acceptedTargetZones:["top","bottom","left","right","center"],overlayModel:(l=n.rootOverlayModel)!==null&&l!==void 0?l:Hm,getOverrideTarget:()=>{var h;return(h=this.rootDropTargetContainer)===null||h===void 0?void 0:h.model}}),this.updateDropTargetModel(n),me(this.gridview.element,"dv-dockview",!0),me(this.element,"dv-debug",!!n.debug),this.updateTheme(),this.updateWatermark(),n.debug&&this.addDisposables(new pw(this)),this.addDisposables(this.rootDropTargetContainer,this.overlayRenderContainer,this._onWillDragPanel,this._onWillDragGroup,this._onWillShowOverlay,this._onDidActivePanelChange,this._onDidAddPanel,this._onDidRemovePanel,this._onDidLayoutFromJSON,this._onDidDrop,this._onWillDrop,this._onDidMovePanel,this._onDidAddGroup,this._onDidRemoveGroup,this._onDidActiveGroupChange,this._onUnhandledDragOverEvent,this._onDidMaximizedGroupChange,this._onDidOptionsChange,this._onDidPopoutGroupSizeChange,this._onDidPopoutGroupPositionChange,this._onDidOpenPopoutWindowFail,this.onDidViewVisibilityChangeMicroTaskQueue(()=>{this.updateWatermark()}),this.onDidAdd(h=>{this._moving||this._onDidAddGroup.fire(h)}),this.onDidRemove(h=>{this._moving||this._onDidRemoveGroup.fire(h)}),this.onDidActiveChange(h=>{this._moving||this._onDidActiveGroupChange.fire(h)}),this.onDidMaximizedChange(h=>{this._onDidMaximizedGroupChange.fire({group:h.panel,isMaximized:h.isMaximized})}),ns.any(this.onDidAdd,this.onDidRemove)(()=>{this.updateWatermark()}),ns.any(this.onDidAddPanel,this.onDidRemovePanel,this.onDidAddGroup,this.onDidRemove,this.onDidMovePanel,this.onDidActivePanelChange,this.onDidPopoutGroupPositionChange,this.onDidPopoutGroupSizeChange)(()=>{this._bufferOnDidLayoutChange.fire()}),it.from(()=>{for(const h of[...this._floatingGroups])h.dispose();for(const h of[...this._popoutGroups])h.disposable.dispose()}),this._rootDropTarget,this._rootDropTarget.onWillShowOverlay(h=>{this.gridview.length>0&&h.position==="center"||this._onWillShowOverlay.fire(new ll(h,{kind:"edge",panel:void 0,api:this._api,group:void 0,getData:xt}))}),this._rootDropTarget.onDrop(h=>{var d;const p=new iv({nativeEvent:h.nativeEvent,position:h.position,panel:void 0,api:this._api,group:void 0,getData:xt,kind:"edge"});if(this._onWillDrop.fire(p),p.defaultPrevented)return;const m=xt();m?this.moveGroupOrPanel({from:{groupId:m.groupId,panelId:(d=m.panelId)!==null&&d!==void 0?d:void 0},to:{group:this.orthogonalize(h.position),position:"center"}}):this._onDidDrop.fire(new rh({nativeEvent:h.nativeEvent,position:h.position,panel:void 0,api:this._api,group:void 0,getData:xt}))}),this._rootDropTarget)}setVisible(e,n){switch(e.api.location.type){case"grid":super.setVisible(e,n);break;case"floating":{const r=this.floatingGroups.find(o=>o.group===e);r&&(r.overlay.setVisible(n),e.api._onDidVisibilityChange.fire({isVisible:n}));break}case"popout":console.warn("dockview: You cannot hide a group that is in a popout window");break}}addPopoutGroup(e,n){var r,o,l,h,d;if(e instanceof Ws&&e.group.size===1)return this.addPopoutGroup(e.group,n);const p=mx(this.gridview.element),m=this.element;function v(){return n?.position?n.position:e instanceof Lm?e.element.getBoundingClientRect():e.group?e.group.element.getBoundingClientRect():m.getBoundingClientRect()}const y=v(),b=(o=(r=n?.overridePopoutGroup)===null||r===void 0?void 0:r.id)!==null&&o!==void 0?o:this.getNextGroupId(),x=new fw(`${this.id}-${b}`,p??"",{url:(d=(l=n?.popoutUrl)!==null&&l!==void 0?l:(h=this.options)===null||h===void 0?void 0:h.popoutUrl)!==null&&d!==void 0?d:"/popout.html",left:window.screenX+y.left,top:window.screenY+y.top,width:y.width,height:y.height,onDidOpen:n?.onDidOpen,onWillClose:n?.onWillClose}),D=new pe(x,x.onDidClose(()=>{D.dispose()}));return x.open().then(R=>{var B;if(x.isDisposed)return!1;const w=n?.referenceGroup?n.referenceGroup:e instanceof Ws?e.group:e,F=e.api.location.type,O=w.element.parentElement!==null;let z;if(O?n?.overridePopoutGroup?z=n.overridePopoutGroup:(z=this.createGroup({id:b}),R&&this._onDidAddGroup.fire(z)):z=w,R===null)return console.error("dockview: failed to create popout. perhaps you need to allow pop-ups for this website"),D.dispose(),this._onDidOpenPopoutWindowFail.fire(),this.movingLock(()=>jo({from:z,to:w})),w.api.isVisible||w.api.setVisible(!0),!1;const M=document.createElement("div");M.className="dv-overlay-render-container";const V=new Vm(M,this);z.model.renderContainer=V,z.layout(x.window.innerWidth,x.window.innerHeight);let T;if(!n?.overridePopoutGroup&&O)if(e instanceof Ws)this.movingLock(()=>{const ae=w.model.removePanel(e);z.model.openPanel(ae)});else switch(this.movingLock(()=>jo({from:w,to:z})),F){case"grid":w.api.setVisible(!1);break;case"floating":case"popout":T=(B=this._floatingGroups.find(ae=>ae.group.api.id===e.api.id))===null||B===void 0?void 0:B.overlay.toJSON(),this.removeGroup(w);break}R.classList.add("dv-dockview"),R.style.overflow="hidden",R.appendChild(M),R.appendChild(z.element);const U=document.createElement("div"),K=new Bm(U,{disabled:this.rootDropTargetContainer.disabled});R.appendChild(U),z.model.dropTargetContainer=K,z.model.location={type:"popout",getWindow:()=>x.window,popoutUrl:n?.popoutUrl},O&&e.api.location.type==="grid"&&e.api.setVisible(!1),this.doSetGroupAndPanelActive(z),D.addDisposables(z.api.onDidActiveChange(ae=>{var P;ae.isActive&&((P=x.window)===null||P===void 0||P.focus())}),z.api.onWillFocus(()=>{var ae;(ae=x.window)===null||ae===void 0||ae.focus()}));let Q;const ee=O&&w&&this.getPanel(w.id),$={window:x,popoutGroup:z,referenceGroup:ee?w.id:void 0,disposable:{dispose:()=>(D.dispose(),Q)}},J=vx(x.window);return D.addDisposables(J,_x(x.window,()=>{this._onDidPopoutGroupSizeChange.fire({width:x.window.innerWidth,height:x.window.innerHeight,group:z})}),J.event(()=>{this._onDidPopoutGroupPositionChange.fire({screenX:x.window.screenX,screenY:x.window.screenX,group:z})}),be(x.window,"resize",()=>{z.layout(x.window.innerWidth,x.window.innerHeight)}),V,it.from(()=>{if(!this.isDisposed){if(O&&this.getPanel(w.id))this.movingLock(()=>jo({from:z,to:w})),w.api.isVisible||w.api.setVisible(!0),this.getPanel(z.id)&&this.doRemoveGroup(z,{skipPopoutAssociated:!0});else if(this.getPanel(z.id)){if(z.model.renderContainer=this.overlayRenderContainer,z.model.dropTargetContainer=this.rootDropTargetContainer,Q=z,!this._popoutGroups.find(P=>P.popoutGroup===z))return;T?this.addFloatingGroup(z,{height:T.height,width:T.width,position:T}):(this.doRemoveGroup(z,{skipDispose:!0,skipActive:!0,skipPopoutReturn:!0}),z.model.location={type:"grid"},this.movingLock(()=>{this.doAddGroup(z,[0])})),this.doSetGroupAndPanelActive(z)}}})),this._popoutGroups.push($),this.updateWatermark(),!0}).catch(R=>(console.error("dockview: failed to create popout.",R),!1))}addFloatingGroup(e,n){var r,o,l,h,d;let p;if(e instanceof Ws)p=this.createGroup(),this._onDidAddGroup.fire(p),this.movingLock(()=>this.removePanel(e,{removeEmptyGroup:!0,skipDispose:!0,skipSetActiveGroup:!0})),this.movingLock(()=>p.model.openPanel(e,{skipSetGroupActive:!0}));else{p=e;const R=(r=this._popoutGroups.find(F=>F.popoutGroup===p))===null||r===void 0?void 0:r.referenceGroup,B=R?this.getPanel(R):void 0;typeof n?.skipRemoveGroup=="boolean"&&n.skipRemoveGroup||(B?(this.movingLock(()=>jo({from:e,to:B})),this.doRemoveGroup(e,{skipPopoutReturn:!0,skipPopoutAssociated:!0}),this.doRemoveGroup(B,{skipDispose:!0}),p=B):this.doRemoveGroup(e,{skipDispose:!0,skipPopoutReturn:!0,skipPopoutAssociated:!1}))}function m(){if(n?.position){const R={};return"left"in n.position?R.left=Math.max(n.position.left,0):"right"in n.position?R.right=Math.max(n.position.right,0):R.left=Nn.left,"top"in n.position?R.top=Math.max(n.position.top,0):"bottom"in n.position?R.bottom=Math.max(n.position.bottom,0):R.top=Nn.top,typeof n.width=="number"?R.width=Math.max(n.width,0):R.width=Nn.width,typeof n.height=="number"?R.height=Math.max(n.height,0):R.height=Nn.height,R}return{left:typeof n?.x=="number"?Math.max(n.x,0):Nn.left,top:typeof n?.y=="number"?Math.max(n.y,0):Nn.top,width:typeof n?.width=="number"?Math.max(n.width,0):Nn.width,height:typeof n?.height=="number"?Math.max(n.height,0):Nn.height}}const v=m(),y=new In(Object.assign(Object.assign({container:this.gridview.element,content:p.element},v),{minimumInViewportWidth:this.options.floatingGroupBounds==="boundedWithinViewport"?void 0:(l=(o=this.options.floatingGroupBounds)===null||o===void 0?void 0:o.minimumWidthWithinViewport)!==null&&l!==void 0?l:Po,minimumInViewportHeight:this.options.floatingGroupBounds==="boundedWithinViewport"?void 0:(d=(h=this.options.floatingGroupBounds)===null||h===void 0?void 0:h.minimumHeightWithinViewport)!==null&&d!==void 0?d:Po})),b=p.element.querySelector(".dv-void-container");if(!b)throw new Error("failed to find drag handle");y.setupDrag(b,{inDragMode:typeof n?.inDragMode=="boolean"?n.inDragMode:!1});const x=new cw(p,y),D=new pe(p.api.onDidActiveChange(R=>{R.isActive&&y.bringToFront()}),sl(p.element,R=>{const{width:B,height:w}=R.contentRect;p.layout(B,w)}));x.addDisposables(y.onDidChange(()=>{p.layout(p.width,p.height)}),y.onDidChangeEnd(()=>{this._bufferOnDidLayoutChange.fire()}),p.onDidChange(R=>{y.setBounds({height:R?.height,width:R?.width})}),{dispose:()=>{D.dispose(),Mc(this._floatingGroups,x),p.model.location={type:"grid"},this.updateWatermark()}}),this._floatingGroups.push(x),p.model.location={type:"floating"},n?.skipActiveGroup||this.doSetGroupAndPanelActive(p),this.updateWatermark()}orthogonalize(e,n){switch(e){case"top":case"bottom":this.gridview.orientation===ue.HORIZONTAL&&this.gridview.insertOrthogonalSplitviewAtRoot();break;case"left":case"right":this.gridview.orientation===ue.VERTICAL&&this.gridview.insertOrthogonalSplitviewAtRoot();break}switch(e){case"top":case"left":case"center":return this.createGroupAtLocation([0],void 0,n);case"bottom":case"right":return this.createGroupAtLocation([this.gridview.length],void 0,n);default:throw new Error(`unsupported position ${e}`)}}updateOptions(e){var n,r;if(super.updateOptions(e),"floatingGroupBounds"in e)for(const h of this._floatingGroups){switch(e.floatingGroupBounds){case"boundedWithinViewport":h.overlay.minimumInViewportHeight=void 0,h.overlay.minimumInViewportWidth=void 0;break;case void 0:h.overlay.minimumInViewportHeight=Po,h.overlay.minimumInViewportWidth=Po;break;default:h.overlay.minimumInViewportHeight=(n=e.floatingGroupBounds)===null||n===void 0?void 0:n.minimumHeightWithinViewport,h.overlay.minimumInViewportWidth=(r=e.floatingGroupBounds)===null||r===void 0?void 0:r.minimumWidthWithinViewport}h.overlay.setBounds()}this.updateDropTargetModel(e);const o=this.options.disableDnd;this._options=Object.assign(Object.assign({},this.options),e);const l=this.options.disableDnd;o!==l&&this.updateDragAndDropState(),"theme"in e&&this.updateTheme(),this.layout(this.gridview.width,this.gridview.height,!0)}layout(e,n,r){if(super.layout(e,n,r),this._floatingGroups)for(const o of this._floatingGroups)o.overlay.setBounds()}updateDragAndDropState(){for(const e of this.groups)e.model.updateDragAndDropState()}focus(){var e;(e=this.activeGroup)===null||e===void 0||e.focus()}getGroupPanel(e){return this.panels.find(n=>n.id===e)}setActivePanel(e){e.group.model.openPanel(e),this.doSetGroupAndPanelActive(e.group)}moveToNext(e={}){var n;if(!e.group){if(!this.activeGroup)return;e.group=this.activeGroup}if(e.includePanel&&e.group&&e.group.activePanel!==e.group.panels[e.group.panels.length-1]){e.group.model.moveToNext({suppressRoll:!0});return}const r=Xe(e.group.element),o=(n=this.gridview.next(r))===null||n===void 0?void 0:n.view;this.doSetGroupAndPanelActive(o)}moveToPrevious(e={}){var n;if(!e.group){if(!this.activeGroup)return;e.group=this.activeGroup}if(e.includePanel&&e.group&&e.group.activePanel!==e.group.panels[0]){e.group.model.moveToPrevious({suppressRoll:!0});return}const r=Xe(e.group.element),o=(n=this.gridview.previous(r))===null||n===void 0?void 0:n.view;o&&this.doSetGroupAndPanelActive(o)}toJSON(){var e;const n=this.gridview.serialize(),r=this.panels.reduce((d,p)=>(d[p.id]=p.toJSON(),d),{}),o=this._floatingGroups.map(d=>({data:d.group.toJSON(),position:d.overlay.toJSON()})),l=this._popoutGroups.map(d=>({data:d.popoutGroup.toJSON(),gridReferenceGroup:d.referenceGroup,position:d.window.dimensions(),url:d.popoutGroup.api.location.type==="popout"?d.popoutGroup.api.location.popoutUrl:void 0})),h={grid:n,panels:r,activeGroup:(e=this.activeGroup)===null||e===void 0?void 0:e.id};return o.length>0&&(h.floatingGroups=o),l.length>0&&(h.popoutGroups=l),h}fromJSON(e){var n,r;if(this.clear(),typeof e!="object"||e===null)throw new Error("serialized layout must be a non-null object");const{grid:o,panels:l,activeGroup:h}=e;if(o.root.type!=="branch"||!Array.isArray(o.root.data))throw new Error("root must be of type branch");try{const d=this.width,p=this.height,m=b=>{const{id:x,locked:D,hideHeader:R,views:B,activeView:w}=b;if(typeof x!="string")throw new Error("group id must be of type string");const F=this.createGroup({id:x,locked:!!D,hideHeader:!!R});this._onDidAddGroup.fire(F);const O=[];for(const z of B){const M=this._deserializer.fromJSON(l[z],F);O.push(M)}for(let z=0;z<B.length;z++){const M=O[z],V=typeof w=="string"&&w===M.id;F.model.openPanel(M,{skipSetActive:!V,skipSetGroupActive:!0})}return!F.activePanel&&F.panels.length>0&&F.model.openPanel(F.panels[F.panels.length-1],{skipSetGroupActive:!0}),F};this.gridview.deserialize(o,{fromJSON:b=>m(b.data)}),this.layout(d,p,!0);const v=(n=e.floatingGroups)!==null&&n!==void 0?n:[];for(const b of v){const{data:x,position:D}=b,R=m(x);this.addFloatingGroup(R,{position:D,width:D.width,height:D.height,skipRemoveGroup:!0,inDragMode:!1})}const y=(r=e.popoutGroups)!==null&&r!==void 0?r:[];for(const b of y){const{data:x,position:D,gridReferenceGroup:R,url:B}=b,w=m(x);this.addPopoutGroup(w,{position:D??void 0,overridePopoutGroup:R?w:void 0,referenceGroup:R?this.getPanel(R):void 0,popoutUrl:B})}for(const b of this._floatingGroups)b.overlay.setBounds();if(typeof h=="string"){const b=this.getPanel(h);b&&this.doSetGroupAndPanelActive(b)}}catch(d){console.error("dockview: failed to deserialize layout. Reverting changes",d);for(const p of this.groups)for(const m of p.panels)this.removePanel(m,{removeEmptyGroup:!1,skipDispose:!1});for(const p of this.groups)p.dispose(),this._groups.delete(p.id),this._onDidRemoveGroup.fire(p);for(const p of[...this._floatingGroups])p.dispose();throw this.clear(),d}this.updateWatermark(),this._onDidLayoutFromJSON.fire()}clear(){const e=Array.from(this._groups.values()).map(r=>r.value),n=!!this.activeGroup;for(const r of e)this.removeGroup(r,{skipActive:!0});n&&this.doSetGroupAndPanelActive(void 0),this.gridview.clear()}closeAllGroups(){for(const e of this._groups.entries()){const[n,r]=e;r.value.model.closeAllPanels()}}addPanel(e){var n,r;if(this.panels.find(p=>p.id===e.id))throw new Error(`panel with id ${e.id} already exists`);let o;if(e.position&&e.floating)throw new Error("you can only provide one of: position, floating as arguments to .addPanel(...)");const l={width:e.initialWidth,height:e.initialHeight};let h;if(e.position)if(Qx(e.position)){const p=typeof e.position.referencePanel=="string"?this.getGroupPanel(e.position.referencePanel):e.position.referencePanel;if(h=e.position.index,!p)throw new Error(`referencePanel '${e.position.referencePanel}' does not exist`);o=this.findGroup(p)}else if(Jx(e.position)){if(o=typeof e.position.referenceGroup=="string"?(n=this._groups.get(e.position.referenceGroup))===null||n===void 0?void 0:n.value:e.position.referenceGroup,h=e.position.index,!o)throw new Error(`referenceGroup '${e.position.referenceGroup}' does not exist`)}else{const p=this.orthogonalize(Gm(e.position.direction)),m=this.createPanel(e,p);return p.model.openPanel(m,{skipSetActive:e.inactive,skipSetGroupActive:e.inactive,index:h}),e.inactive||this.doSetGroupAndPanelActive(p),p.api.setSize({height:l?.height,width:l?.width}),m}else o=this.activeGroup;let d;if(o){const p=el(((r=e.position)===null||r===void 0?void 0:r.direction)||"within");if(e.floating){const m=this.createGroup();this._onDidAddGroup.fire(m);const v=typeof e.floating=="object"&&e.floating!==null?e.floating:{};this.addFloatingGroup(m,Object.assign(Object.assign({},v),{inDragMode:!1,skipRemoveGroup:!0,skipActiveGroup:!0})),d=this.createPanel(e,m),m.model.openPanel(d,{skipSetActive:e.inactive,skipSetGroupActive:e.inactive,index:h})}else if(o.api.location.type==="floating"||p==="center")d=this.createPanel(e,o),o.model.openPanel(d,{skipSetActive:e.inactive,skipSetGroupActive:e.inactive,index:h}),o.api.setSize({width:l?.width,height:l?.height}),e.inactive||this.doSetGroupAndPanelActive(o);else{const m=Xe(o.element),v=wi(this.gridview.orientation,m,p),y=this.createGroupAtLocation(v,this.orientationAtLocation(v)===ue.VERTICAL?l?.height:l?.width);d=this.createPanel(e,y),y.model.openPanel(d,{skipSetActive:e.inactive,skipSetGroupActive:e.inactive,index:h}),e.inactive||this.doSetGroupAndPanelActive(y)}}else if(e.floating){const p=this.createGroup();this._onDidAddGroup.fire(p);const m=typeof e.floating=="object"&&e.floating!==null?e.floating:{};this.addFloatingGroup(p,Object.assign(Object.assign({},m),{inDragMode:!1,skipRemoveGroup:!0,skipActiveGroup:!0})),d=this.createPanel(e,p),p.model.openPanel(d,{skipSetActive:e.inactive,skipSetGroupActive:e.inactive,index:h})}else{const p=this.createGroupAtLocation([0],this.gridview.orientation===ue.VERTICAL?l?.height:l?.width);d=this.createPanel(e,p),p.model.openPanel(d,{skipSetActive:e.inactive,skipSetGroupActive:e.inactive,index:h}),e.inactive||this.doSetGroupAndPanelActive(p)}return d}removePanel(e,n={removeEmptyGroup:!0}){const r=e.group;if(!r)throw new Error(`cannot remove panel ${e.id}. it's missing a group.`);r.model.removePanel(e,{skipSetActiveGroup:n.skipSetActiveGroup}),n.skipDispose||(e.group.model.renderContainer.detatch(e),e.dispose()),r.size===0&&n.removeEmptyGroup&&this.removeGroup(r,{skipActive:n.skipSetActiveGroup})}createWatermarkComponent(){return this.options.createWatermarkComponent?this.options.createWatermarkComponent():new lw}updateWatermark(){var e,n;if(this.groups.filter(r=>r.api.location.type==="grid"&&r.api.isVisible).length===0){if(!this._watermark){this._watermark=this.createWatermarkComponent(),this._watermark.init({containerApi:new tl(this)});const r=document.createElement("div");r.className="dv-watermark-container",fx(r,"watermark-component"),r.appendChild(this._watermark.element),this.gridview.element.appendChild(r)}}else this._watermark&&(this._watermark.element.parentElement.remove(),(n=(e=this._watermark).dispose)===null||n===void 0||n.call(e),this._watermark=null)}addGroup(e){var n;if(e){let r;if($x(e)){const m=typeof e.referencePanel=="string"?this.panels.find(v=>v.id===e.referencePanel):e.referencePanel;if(!m)throw new Error(`reference panel ${e.referencePanel} does not exist`);if(r=this.findGroup(m),!r)throw new Error(`reference group for reference panel ${e.referencePanel} does not exist`)}else if(ew(e)){if(r=typeof e.referenceGroup=="string"?(n=this._groups.get(e.referenceGroup))===null||n===void 0?void 0:n.value:e.referenceGroup,!r)throw new Error(`reference group ${e.referenceGroup} does not exist`)}else{const m=this.orthogonalize(Gm(e.direction),e);return e.skipSetActive||this.doSetGroupAndPanelActive(m),m}const o=el(e.direction||"within"),l=Xe(r.element),h=wi(this.gridview.orientation,l,o),d=this.createGroup(e),p=this.getLocationOrientation(h)===ue.VERTICAL?e.initialHeight:e.initialWidth;return this.doAddGroup(d,h,p),e.skipSetActive||this.doSetGroupAndPanelActive(d),d}else{const r=this.createGroup(e);return this.doAddGroup(r),this.doSetGroupAndPanelActive(r),r}}getLocationOrientation(e){return e.length%2==0&&this.gridview.orientation===ue.HORIZONTAL?ue.HORIZONTAL:ue.VERTICAL}removeGroup(e,n){this.doRemoveGroup(e,n)}doRemoveGroup(e,n){var r;const o=[...e.panels];if(!n?.skipDispose)for(const d of o)this.removePanel(d,{removeEmptyGroup:!1,skipDispose:(r=n?.skipDispose)!==null&&r!==void 0?r:!1});const l=this.activePanel;if(e.api.location.type==="floating"){const d=this._floatingGroups.find(p=>p.group===e);if(d){if(n?.skipDispose||(d.group.dispose(),this._groups.delete(e.id),this._onDidRemoveGroup.fire(e)),Mc(this._floatingGroups,d),d.dispose(),!n?.skipActive&&this._activeGroup===e){const p=Array.from(this._groups.values());this.doSetGroupAndPanelActive(p.length>0?p[0].value:void 0)}return d.group}throw new Error("failed to find floating group")}if(e.api.location.type==="popout"){const d=this._popoutGroups.find(p=>p.popoutGroup===e);if(d){if(!n?.skipDispose){if(!n?.skipPopoutAssociated){const m=d.referenceGroup?this.getPanel(d.referenceGroup):void 0;m&&m.panels.length===0&&this.removeGroup(m)}d.popoutGroup.dispose(),this._groups.delete(e.id),this._onDidRemoveGroup.fire(e)}Mc(this._popoutGroups,d);const p=d.disposable.dispose();if(!n?.skipPopoutReturn&&p&&(this.doAddGroup(p,[0]),this.doSetGroupAndPanelActive(p)),!n?.skipActive&&this._activeGroup===e){const m=Array.from(this._groups.values());this.doSetGroupAndPanelActive(m.length>0?m[0].value:void 0)}return this.updateWatermark(),d.popoutGroup}throw new Error("failed to find popout group")}const h=super.doRemoveGroup(e,n);return n?.skipActive||this.activePanel!==l&&this._onDidActivePanelChange.fire(this.activePanel),h}movingLock(e){const n=this._moving;try{return this._moving=!0,e()}finally{this._moving=n}}moveGroupOrPanel(e){var n;const r=e.to.group,o=e.from.groupId,l=e.from.panelId,h=e.to.position,d=e.to.index,p=o?(n=this._groups.get(o))===null||n===void 0?void 0:n.value:void 0;if(!p)throw new Error(`Failed to find group id ${o}`);if(l===void 0){this.moveGroup({from:{group:p},to:{group:r,position:h},skipSetActive:e.skipSetActive});return}if(!h||h==="center"){const m=this.movingLock(()=>p.model.removePanel(l,{skipSetActive:!1,skipSetActiveGroup:!0}));if(!m)throw new Error(`No panel with id ${l}`);p.model.size===0&&this.doRemoveGroup(p,{skipActive:!0}),this.movingLock(()=>{var v;return r.model.openPanel(m,{index:d,skipSetActive:(v=e.skipSetActive)!==null&&v!==void 0?v:!1,skipSetGroupActive:!0})}),e.skipSetActive||this.doSetGroupAndPanelActive(r),this._onDidMovePanel.fire({panel:m,from:p})}else{const m=Xe(r.element),v=wi(this.gridview.orientation,m,h);if(p.size<2){const[y,b]=nn(v);if(p.api.location.type==="grid"){const B=Xe(p.element),[w,F]=nn(B);if(Yg(w,y)){this.gridview.moveView(w,F,b),this._onDidMovePanel.fire({panel:this.getGroupPanel(l),from:p});return}}if(p.api.location.type==="popout"){const B=this._popoutGroups.find(O=>O.popoutGroup===p),w=this.movingLock(()=>B.popoutGroup.model.removePanel(B.popoutGroup.panels[0],{skipSetActive:!0,skipSetActiveGroup:!0}));this.doRemoveGroup(p,{skipActive:!0});const F=this.createGroupAtLocation(v);this.movingLock(()=>F.model.openPanel(w)),this.doSetGroupAndPanelActive(F),this._onDidMovePanel.fire({panel:this.getGroupPanel(l),from:p});return}const x=this.movingLock(()=>this.doRemoveGroup(p,{skipActive:!0,skipDispose:!0})),D=Xe(r.element),R=wi(this.gridview.orientation,D,h);this.movingLock(()=>this.doAddGroup(x,R)),this.doSetGroupAndPanelActive(x),this._onDidMovePanel.fire({panel:this.getGroupPanel(l),from:p})}else{const y=this.movingLock(()=>p.model.removePanel(l,{skipSetActive:!1,skipSetActiveGroup:!0}));if(!y)throw new Error(`No panel with id ${l}`);const b=wi(this.gridview.orientation,m,h),x=this.createGroupAtLocation(b);this.movingLock(()=>x.model.openPanel(y,{skipSetGroupActive:!0})),this.doSetGroupAndPanelActive(x),this._onDidMovePanel.fire({panel:y,from:p})}}}moveGroup(e){const n=e.from.group,r=e.to.group,o=e.to.position;if(o==="center"){const l=n.activePanel,h=r.activePanel,d=this.movingLock(()=>[...n.panels].map(p=>n.model.removePanel(p.id,{skipSetActive:!0})));n?.model.size===0&&this.doRemoveGroup(n,{skipActive:!0}),this.movingLock(()=>{for(const p of d)r.model.openPanel(p,{skipSetActive:!0,skipSetGroupActive:!0})}),e.skipSetActive?h&&r.model.openPanel(h,{skipSetGroupActive:!0}):l&&this.doSetGroupAndPanelActive(r)}else{switch(n.api.location.type){case"grid":this.gridview.removeView(Xe(n.element));break;case"floating":{const l=this._floatingGroups.find(h=>h.group===n);if(!l)throw new Error("failed to find floating group");l.dispose();break}case"popout":{const l=this._popoutGroups.find(d=>d.popoutGroup===n);if(!l)throw new Error("failed to find popout group");const h=this._popoutGroups.indexOf(l);if(h>=0&&this._popoutGroups.splice(h,1),l.referenceGroup){const d=this.getPanel(l.referenceGroup);d&&!d.api.isVisible&&this.doRemoveGroup(d,{skipActive:!0})}l.window.dispose(),r.api.location.type==="grid"?(n.model.renderContainer=this.overlayRenderContainer,n.model.dropTargetContainer=this.rootDropTargetContainer,n.model.location={type:"grid"}):r.api.location.type==="floating"&&(n.model.renderContainer=this.overlayRenderContainer,n.model.dropTargetContainer=this.rootDropTargetContainer,n.model.location={type:"floating"});break}}if(r.api.location.type==="grid"){const l=Xe(r.element),h=wi(this.gridview.orientation,l,o);let d;switch(this.gridview.orientation){case ue.VERTICAL:d=l.length%2==0?n.api.width:n.api.height;break;case ue.HORIZONTAL:d=l.length%2==0?n.api.height:n.api.width;break}this.gridview.addView(n,d,h)}else if(r.api.location.type==="floating"){const l=this._floatingGroups.find(h=>h.group===r);if(l){const h=l.overlay.toJSON();let d,p;"left"in h?d=h.left+50:"right"in h?d=Math.max(0,h.right-h.width-50):d=50,"top"in h?p=h.top+50:"bottom"in h?p=Math.max(0,h.bottom-h.height-50):p=50,this.addFloatingGroup(n,{height:h.height,width:h.width,position:{left:d,top:p}})}}}n.panels.forEach(l=>{this._onDidMovePanel.fire({panel:l,from:n})}),e.skipSetActive||this.doSetGroupAndPanelActive(n)}doSetGroupActive(e){super.doSetGroupActive(e);const n=this.activePanel;!this._moving&&n!==this._onDidActivePanelChange.value&&this._onDidActivePanelChange.fire(n)}doSetGroupAndPanelActive(e){super.doSetGroupActive(e);const n=this.activePanel;e&&this.hasMaximizedGroup()&&!this.isMaximizedGroup(e)&&this.exitMaximizedGroup(),!this._moving&&n!==this._onDidActivePanelChange.value&&this._onDidActivePanelChange.fire(n)}getNextGroupId(){let e=this.nextGroupId.next();for(;this._groups.has(e);)e=this.nextGroupId.next();return e}createGroup(e){e||(e={});let n=e?.id;if(n&&this._groups.has(e.id)&&(console.warn(`dockview: Duplicate group id ${e?.id}. reassigning group id to avoid errors`),n=void 0),!n)for(n=this.nextGroupId.next();this._groups.has(n);)n=this.nextGroupId.next();const r=new Lm(this,n,e);if(r.init({params:{},accessor:this}),!this._groups.has(r.id)){const o=new pe(r.model.onTabDragStart(l=>{this._onWillDragPanel.fire(l)}),r.model.onGroupDragStart(l=>{this._onWillDragGroup.fire(l)}),r.model.onMove(l=>{const{groupId:h,itemId:d,target:p,index:m}=l;this.moveGroupOrPanel({from:{groupId:h,panelId:d},to:{group:r,position:p,index:m}})}),r.model.onDidDrop(l=>{this._onDidDrop.fire(l)}),r.model.onWillDrop(l=>{this._onWillDrop.fire(l)}),r.model.onWillShowOverlay(l=>{if(this.options.disableDnd){l.preventDefault();return}this._onWillShowOverlay.fire(l)}),r.model.onUnhandledDragOverEvent(l=>{this._onUnhandledDragOverEvent.fire(l)}),r.model.onDidAddPanel(l=>{this._moving||this._onDidAddPanel.fire(l.panel)}),r.model.onDidRemovePanel(l=>{this._moving||this._onDidRemovePanel.fire(l.panel)}),r.model.onDidActivePanelChange(l=>{this._moving||l.panel===this.activePanel&&this._onDidActivePanelChange.value!==l.panel&&this._onDidActivePanelChange.fire(l.panel)}),ns.any(r.model.onDidPanelTitleChange,r.model.onDidPanelParametersChange)(()=>{this._bufferOnDidLayoutChange.fire()}));this._groups.set(r.id,{value:r,disposable:o})}return r.initialize(),r}createPanel(e,n){var r,o,l;const h=e.component,d=(r=e.tabComponent)!==null&&r!==void 0?r:this.options.defaultTabComponent,p=new sv(this,e.id,h,d),m=new Ws(e.id,h,d,this,this._api,n,p,{renderer:e.renderer,minimumWidth:e.minimumWidth,minimumHeight:e.minimumHeight,maximumWidth:e.maximumWidth,maximumHeight:e.maximumHeight});return m.init({title:(o=e.title)!==null&&o!==void 0?o:e.id,params:(l=e?.params)!==null&&l!==void 0?l:{}}),m}createGroupAtLocation(e,n,r){const o=this.createGroup(r);return this.doAddGroup(o,e,n),o}findGroup(e){var n;return(n=Array.from(this._groups.values()).find(r=>r.value.model.containsPanel(e)))===null||n===void 0?void 0:n.value}orientationAtLocation(e){const n=this.gridview.orientation;return e.length%2==1?n:Ei(n)}updateDropTargetModel(e){"dndEdges"in e&&(this._rootDropTarget.disabled=typeof e.dndEdges=="boolean"&&e.dndEdges===!1,typeof e.dndEdges=="object"&&e.dndEdges!==null?this._rootDropTarget.setOverlayModel(e.dndEdges):this._rootDropTarget.setOverlayModel(Hm)),"rootOverlayModel"in e&&this.updateDropTargetModel({dndEdges:e.dndEdges})}updateTheme(){var e,n;const r=(e=this._options.theme)!==null&&e!==void 0?e:rw;switch(this._themeClassnames.setClassNames(r.className),this.gridview.margin=(n=r.gap)!==null&&n!==void 0?n:0,r.dndOverlayMounting){case"absolute":this.rootDropTargetContainer.disabled=!1;break;case"relative":default:this.rootDropTargetContainer.disabled=!0;break}}}class vw extends Xg{get orientation(){return this.gridview.orientation}set orientation(e){this.gridview.orientation=e}get options(){return this._options}get deserializer(){return this._deserializer}set deserializer(e){this._deserializer=e}constructor(e,n){var r;super(e,{proportionalLayout:(r=n.proportionalLayout)!==null&&r!==void 0?r:!0,orientation:n.orientation,styles:n.hideBorders?{separatorBorder:"transparent"}:void 0,disableAutoResizing:n.disableAutoResizing,className:n.className}),this._onDidLayoutfromJSON=new j,this.onDidLayoutFromJSON=this._onDidLayoutfromJSON.event,this._onDidRemoveGroup=new j,this.onDidRemoveGroup=this._onDidRemoveGroup.event,this._onDidAddGroup=new j,this.onDidAddGroup=this._onDidAddGroup.event,this._onDidActiveGroupChange=new j,this.onDidActiveGroupChange=this._onDidActiveGroupChange.event,this._options=n,this.addDisposables(this._onDidAddGroup,this._onDidRemoveGroup,this._onDidActiveGroupChange,this.onDidAdd(o=>{this._onDidAddGroup.fire(o)}),this.onDidRemove(o=>{this._onDidRemoveGroup.fire(o)}),this.onDidActiveChange(o=>{this._onDidActiveGroupChange.fire(o)}))}updateOptions(e){super.updateOptions(e);const n=typeof e.orientation=="string"&&this.gridview.orientation!==e.orientation;this._options=Object.assign(Object.assign({},this.options),e),n&&(this.gridview.orientation=e.orientation),this.layout(this.gridview.width,this.gridview.height,!0)}removePanel(e){this.removeGroup(e)}toJSON(){var e;return{grid:this.gridview.serialize(),activePanel:(e=this.activeGroup)===null||e===void 0?void 0:e.id}}setVisible(e,n){this.gridview.setViewVisible(Xe(e.element),n)}setActive(e){this._groups.forEach((n,r)=>{n.value.setActive(e===n.value)})}focus(){var e;(e=this.activeGroup)===null||e===void 0||e.focus()}fromJSON(e){this.clear();const{grid:n,activePanel:r}=e;try{const o=[],l=this.width,h=this.height;if(this.gridview.deserialize(n,{fromJSON:d=>{const{data:p}=d,m=this.options.createComponent({id:p.id,name:p.component});return o.push(()=>m.init({params:p.params,minimumWidth:p.minimumWidth,maximumWidth:p.maximumWidth,minimumHeight:p.minimumHeight,maximumHeight:p.maximumHeight,priority:p.priority,snap:!!p.snap,accessor:this,isVisible:d.visible})),this._onDidAddGroup.fire(m),this.registerPanel(m),m}}),this.layout(l,h,!0),o.forEach(d=>d()),typeof r=="string"){const d=this.getPanel(r);d&&this.doSetGroupActive(d)}}catch(o){for(const l of this.groups)l.dispose(),this._groups.delete(l.id),this._onDidRemoveGroup.fire(l);throw this.clear(),o}this._onDidLayoutfromJSON.fire()}clear(){const e=this.activeGroup,n=Array.from(this._groups.values());for(const r of n)r.disposable.dispose(),this.doRemoveGroup(r.value,{skipActive:!0});e&&this.doSetGroupActive(void 0),this.gridview.clear()}movePanel(e,n){var r;let o;const l=this.gridview.remove(e),h=(r=this._groups.get(n.reference))===null||r===void 0?void 0:r.value;if(!h)throw new Error(`reference group ${n.reference} does not exist`);const d=el(n.direction);if(d==="center")throw new Error(`${d} not supported as an option`);{const p=Xe(h.element);o=wi(this.gridview.orientation,p,d)}this.doAddGroup(l,o,n.size)}addPanel(e){var n,r,o,l;let h=(n=e.location)!==null&&n!==void 0?n:[0];if(!((r=e.position)===null||r===void 0)&&r.referencePanel){const p=(o=this._groups.get(e.position.referencePanel))===null||o===void 0?void 0:o.value;if(!p)throw new Error(`reference group ${e.position.referencePanel} does not exist`);const m=el(e.position.direction);if(m==="center")throw new Error(`${m} not supported as an option`);{const v=Xe(p.element);h=wi(this.gridview.orientation,v,m)}}const d=this.options.createComponent({id:e.id,name:e.component});return d.init({params:(l=e.params)!==null&&l!==void 0?l:{},minimumWidth:e.minimumWidth,maximumWidth:e.maximumWidth,minimumHeight:e.minimumHeight,maximumHeight:e.maximumHeight,priority:e.priority,snap:!!e.snap,accessor:this,isVisible:!0}),this.registerPanel(d),this.doAddGroup(d,h,e.size),this.doSetGroupActive(d),d}registerPanel(e){const n=new pe(e.api.onDidFocusChange(r=>{r.isFocused&&this._groups.forEach(o=>{const l=o.value;l!==e?l.setActive(!1):l.setActive(!0)})}));this._groups.set(e.id,{value:e,disposable:n})}moveGroup(e,n,r){const o=this.getPanel(n);if(!o)throw new Error("invalid operation");const l=Xe(e.element),h=wi(this.gridview.orientation,l,r),[d,p]=nn(h),m=Xe(o.element),[v,y]=nn(m);if(Yg(v,d)){this.gridview.moveView(v,y,p);return}const b=this.doRemoveGroup(o,{skipActive:!0,skipDispose:!0}),x=Xe(e.element),D=wi(this.gridview.orientation,x,r);this.doAddGroup(b,D)}removeGroup(e){super.removeGroup(e)}dispose(){super.dispose(),this._onDidLayoutfromJSON.dispose()}}class _w extends th{get panels(){return this.splitview.getViews()}get options(){return this._options}get length(){return this._panels.size}get orientation(){return this.splitview.orientation}get splitview(){return this._splitview}set splitview(e){this._splitview&&this._splitview.dispose(),this._splitview=e,this._splitviewChangeDisposable.value=new pe(this._splitview.onDidSashEnd(()=>{this._onDidLayoutChange.fire(void 0)}),this._splitview.onDidAddView(n=>this._onDidAddView.fire(n)),this._splitview.onDidRemoveView(n=>this._onDidRemoveView.fire(n)))}get minimumSize(){return this.splitview.minimumSize}get maximumSize(){return this.splitview.maximumSize}get height(){return this.splitview.orientation===ue.HORIZONTAL?this.splitview.orthogonalSize:this.splitview.size}get width(){return this.splitview.orientation===ue.HORIZONTAL?this.splitview.size:this.splitview.orthogonalSize}constructor(e,n){var r;super(document.createElement("div"),n.disableAutoResizing),this._splitviewChangeDisposable=new wt,this._panels=new Map,this._onDidLayoutfromJSON=new j,this.onDidLayoutFromJSON=this._onDidLayoutfromJSON.event,this._onDidAddView=new j,this.onDidAddView=this._onDidAddView.event,this._onDidRemoveView=new j,this.onDidRemoveView=this._onDidRemoveView.event,this._onDidLayoutChange=new j,this.onDidLayoutChange=this._onDidLayoutChange.event,this.element.style.height="100%",this.element.style.width="100%",this._classNames=new al(this.element),this._classNames.setClassNames((r=n.className)!==null&&r!==void 0?r:""),e.appendChild(this.element),this._options=n,this.splitview=new ga(this.element,n),this.addDisposables(this._onDidAddView,this._onDidLayoutfromJSON,this._onDidRemoveView,this._onDidLayoutChange)}updateOptions(e){var n,r;"className"in e&&this._classNames.setClassNames((n=e.className)!==null&&n!==void 0?n:""),"disableResizing"in e&&(this.disableResizing=(r=e.disableAutoResizing)!==null&&r!==void 0?r:!1),typeof e.orientation=="string"&&(this.splitview.orientation=e.orientation),this._options=Object.assign(Object.assign({},this.options),e),this.splitview.layout(this.splitview.size,this.splitview.orthogonalSize)}focus(){var e;(e=this._activePanel)===null||e===void 0||e.focus()}movePanel(e,n){this.splitview.moveView(e,n)}setVisible(e,n){const r=this.panels.indexOf(e);this.splitview.setViewVisible(r,n)}setActive(e,n){this._activePanel=e,this.panels.filter(r=>r!==e).forEach(r=>{r.api._onDidActiveChange.fire({isActive:!1}),n||r.focus()}),e.api._onDidActiveChange.fire({isActive:!0}),n||e.focus()}removePanel(e,n){const r=this._panels.get(e.id);if(!r)throw new Error(`unknown splitview panel ${e.id}`);r.dispose(),this._panels.delete(e.id);const o=this.panels.findIndex(d=>d===e);this.splitview.removeView(o,n).dispose();const h=this.panels;h.length>0&&this.setActive(h[h.length-1])}getPanel(e){return this.panels.find(n=>n.id===e)}addPanel(e){var n;if(this._panels.has(e.id))throw new Error(`panel ${e.id} already exists`);const r=this.options.createComponent({id:e.id,name:e.component});r.orientation=this.splitview.orientation,r.init({params:(n=e.params)!==null&&n!==void 0?n:{},minimumSize:e.minimumSize,maximumSize:e.maximumSize,snap:e.snap,priority:e.priority,accessor:this});const o=typeof e.size=="number"?e.size:ri.Distribute,l=typeof e.index=="number"?e.index:void 0;return this.splitview.addView(r,o,l),this.doAddView(r),this.setActive(r),r}layout(e,n){const[r,o]=this.splitview.orientation===ue.HORIZONTAL?[e,n]:[n,e];this.splitview.layout(r,o)}doAddView(e){const n=e.api.onDidFocusChange(r=>{r.isFocused&&this.setActive(e,!0)});this._panels.set(e.id,n)}toJSON(){var e;return{views:this.splitview.getViews().map((r,o)=>({size:this.splitview.getViewSize(o),data:r.toJSON(),snap:!!r.snap,priority:r.priority})),activeView:(e=this._activePanel)===null||e===void 0?void 0:e.id,size:this.splitview.size,orientation:this.splitview.orientation}}fromJSON(e){this.clear();const{views:n,orientation:r,size:o,activeView:l}=e,h=[],d=this.width,p=this.height;if(this.splitview=new ga(this.element,{orientation:r,proportionalLayout:this.options.proportionalLayout,descriptor:{size:o,views:n.map(m=>{const v=m.data;if(this._panels.has(v.id))throw new Error(`panel ${v.id} already exists`);const y=this.options.createComponent({id:v.id,name:v.component});return h.push(()=>{var b;y.init({params:(b=v.params)!==null&&b!==void 0?b:{},minimumSize:v.minimumSize,maximumSize:v.maximumSize,snap:m.snap,priority:m.priority,accessor:this})}),y.orientation=r,this.doAddView(y),setTimeout(()=>{this._onDidAddView.fire(y)},0),{size:m.size,view:y}})}}),this.layout(d,p),h.forEach(m=>m()),typeof l=="string"){const m=this.getPanel(l);m&&this.setActive(m)}this._onDidLayoutfromJSON.fire()}clear(){for(const e of this._panels.values())e.dispose();for(this._panels.clear();this.splitview.length>0;)this.splitview.removeView(0,ri.Distribute,!0).dispose()}dispose(){for(const n of this._panels.values())n.dispose();this._panels.clear();const e=this.splitview.getViews();this._splitviewChangeDisposable.dispose(),this.splitview.dispose();for(const n of e)n.dispose();this.element.remove(),super.dispose()}}class Pm extends pe{get element(){return this._element}constructor(){super(),this._expandedIcon=Wx(),this._collapsedIcon=ev(),this.disposable=new wt,this.apiRef={api:null},this._element=document.createElement("div"),this.element.className="dv-default-header",this._content=document.createElement("span"),this._expander=document.createElement("div"),this._expander.className="dv-pane-header-icon",this.element.appendChild(this._expander),this.element.appendChild(this._content),this.addDisposables(be(this._element,"click",()=>{var e;(e=this.apiRef.api)===null||e===void 0||e.setExpanded(!this.apiRef.api.isExpanded)}))}init(e){this.apiRef.api=e.api,this._content.textContent=e.title,this.updateIcon(),this.disposable.value=e.api.onDidExpansionChange(()=>{this.updateIcon()})}updateIcon(){var e;const n=!!(!((e=this.apiRef.api)===null||e===void 0)&&e.isExpanded);me(this._expander,"collapsed",!n),n?(this._expander.contains(this._collapsedIcon)&&this._collapsedIcon.remove(),this._expander.contains(this._expandedIcon)||this._expander.appendChild(this._expandedIcon)):(this._expander.contains(this._expandedIcon)&&this._expandedIcon.remove(),this._expander.contains(this._collapsedIcon)||this._expander.appendChild(this._collapsedIcon))}update(e){}dispose(){this.disposable.dispose(),super.dispose()}}const yw=eh(),jm=22,km=0,Fm=Number.MAX_SAFE_INTEGER;class Ym extends Hx{constructor(e){super({accessor:e.accessor,id:e.id,component:e.component,headerComponent:e.headerComponent,orientation:e.orientation,isExpanded:e.isExpanded,disableDnd:e.disableDnd,headerSize:e.headerSize,minimumBodySize:e.minimumBodySize,maximumBodySize:e.maximumBodySize}),this.options=e}getBodyComponent(){return this.options.body}getHeaderComponent(){return this.options.header}}class bw extends th{get id(){return this._id}get panels(){return this.paneview.getPanes()}set paneview(e){this._paneview=e,this._disposable.value=new pe(this._paneview.onDidChange(()=>{this._onDidLayoutChange.fire(void 0)}),this._paneview.onDidAddView(n=>this._onDidAddView.fire(n)),this._paneview.onDidRemoveView(n=>this._onDidRemoveView.fire(n)))}get paneview(){return this._paneview}get minimumSize(){return this.paneview.minimumSize}get maximumSize(){return this.paneview.maximumSize}get height(){return this.paneview.orientation===ue.HORIZONTAL?this.paneview.orthogonalSize:this.paneview.size}get width(){return this.paneview.orientation===ue.HORIZONTAL?this.paneview.size:this.paneview.orthogonalSize}get options(){return this._options}constructor(e,n){var r;super(document.createElement("div"),n.disableAutoResizing),this._id=yw.next(),this._disposable=new wt,this._viewDisposables=new Map,this._onDidLayoutfromJSON=new j,this.onDidLayoutFromJSON=this._onDidLayoutfromJSON.event,this._onDidLayoutChange=new j,this.onDidLayoutChange=this._onDidLayoutChange.event,this._onDidDrop=new j,this.onDidDrop=this._onDidDrop.event,this._onDidAddView=new j,this.onDidAddView=this._onDidAddView.event,this._onDidRemoveView=new j,this.onDidRemoveView=this._onDidRemoveView.event,this._onUnhandledDragOverEvent=new j,this.onUnhandledDragOverEvent=this._onUnhandledDragOverEvent.event,this.element.style.height="100%",this.element.style.width="100%",this.addDisposables(this._onDidLayoutChange,this._onDidLayoutfromJSON,this._onDidDrop,this._onDidAddView,this._onDidRemoveView,this._onUnhandledDragOverEvent),this._classNames=new al(this.element),this._classNames.setClassNames((r=n.className)!==null&&r!==void 0?r:""),e.appendChild(this.element),this._options=n,this.paneview=new Im(this.element,{orientation:ue.VERTICAL}),this.addDisposables(this._disposable)}setVisible(e,n){const r=this.panels.indexOf(e);this.paneview.setViewVisible(r,n)}focus(){}updateOptions(e){var n,r;"className"in e&&this._classNames.setClassNames((n=e.className)!==null&&n!==void 0?n:""),"disableResizing"in e&&(this.disableResizing=(r=e.disableAutoResizing)!==null&&r!==void 0?r:!1),this._options=Object.assign(Object.assign({},this.options),e)}addPanel(e){var n,r;const o=this.options.createComponent({id:e.id,name:e.component});let l;e.headerComponent&&this.options.createHeaderComponent&&(l=this.options.createHeaderComponent({id:e.id,name:e.headerComponent})),l||(l=new Pm);const h=new Ym({id:e.id,component:e.component,headerComponent:e.headerComponent,header:l,body:o,orientation:ue.VERTICAL,isExpanded:!!e.isExpanded,disableDnd:!!this.options.disableDnd,accessor:this,headerSize:(n=e.headerSize)!==null&&n!==void 0?n:jm,minimumBodySize:km,maximumBodySize:Fm});this.doAddPanel(h);const d=typeof e.size=="number"?e.size:ri.Distribute,p=typeof e.index=="number"?e.index:void 0;return h.init({params:(r=e.params)!==null&&r!==void 0?r:{},minimumBodySize:e.minimumBodySize,maximumBodySize:e.maximumBodySize,isExpanded:e.isExpanded,title:e.title,containerApi:new va(this),accessor:this}),this.paneview.addPane(h,d,p),h.orientation=this.paneview.orientation,h}removePanel(e){const r=this.panels.findIndex(o=>o===e);this.paneview.removePane(r),this.doRemovePanel(e)}movePanel(e,n){this.paneview.moveView(e,n)}getPanel(e){return this.panels.find(n=>n.id===e)}layout(e,n){const[r,o]=this.paneview.orientation===ue.HORIZONTAL?[e,n]:[n,e];this.paneview.layout(r,o)}toJSON(){const e=o=>o===Number.MAX_SAFE_INTEGER||o===Number.POSITIVE_INFINITY?void 0:o,n=o=>o<=0?void 0:o;return{views:this.paneview.getPanes().map((o,l)=>({size:this.paneview.getViewSize(l),data:o.toJSON(),minimumSize:n(o.minimumBodySize),maximumSize:e(o.maximumBodySize),headerSize:o.headerSize,expanded:o.isExpanded()})),size:this.paneview.size}}fromJSON(e){this.clear();const{views:n,size:r}=e,o=[],l=this.width,h=this.height;this.paneview=new Im(this.element,{orientation:ue.VERTICAL,descriptor:{size:r,views:n.map(d=>{var p,m,v;const y=d.data,b=this.options.createComponent({id:y.id,name:y.component});let x;y.headerComponent&&this.options.createHeaderComponent&&(x=this.options.createHeaderComponent({id:y.id,name:y.headerComponent})),x||(x=new Pm);const D=new Ym({id:y.id,component:y.component,headerComponent:y.headerComponent,header:x,body:b,orientation:ue.VERTICAL,isExpanded:!!d.expanded,disableDnd:!!this.options.disableDnd,accessor:this,headerSize:(p=d.headerSize)!==null&&p!==void 0?p:jm,minimumBodySize:(m=d.minimumSize)!==null&&m!==void 0?m:km,maximumBodySize:(v=d.maximumSize)!==null&&v!==void 0?v:Fm});return this.doAddPanel(D),o.push(()=>{var R;D.init({params:(R=y.params)!==null&&R!==void 0?R:{},minimumBodySize:d.minimumSize,maximumBodySize:d.maximumSize,title:y.title,isExpanded:!!d.expanded,containerApi:new va(this),accessor:this}),D.orientation=this.paneview.orientation}),setTimeout(()=>{this._onDidAddView.fire(D)},0),{size:d.size,view:D}})}}),this.layout(l,h),o.forEach(d=>d()),this._onDidLayoutfromJSON.fire()}clear(){for(const[e,n]of this._viewDisposables.entries())n.dispose();this._viewDisposables.clear(),this.paneview.dispose()}doAddPanel(e){const n=new pe(e.onDidDrop(r=>{this._onDidDrop.fire(r)}),e.onUnhandledDragOverEvent(r=>{this._onUnhandledDragOverEvent.fire(r)}));this._viewDisposables.set(e.id,n)}doRemovePanel(e){const n=this._viewDisposables.get(e.id);n&&(n.dispose(),this._viewDisposables.delete(e.id))}dispose(){super.dispose();for(const[e,n]of this._viewDisposables.entries())n.dispose();this._viewDisposables.clear(),this.element.remove(),this.paneview.dispose()}}class xw extends nh{get priority(){return this._priority}set orientation(e){this._orientation=e}get orientation(){return this._orientation}get minimumSize(){const e=typeof this._minimumSize=="function"?this._minimumSize():this._minimumSize;return e!==this._evaluatedMinimumSize&&(this._evaluatedMinimumSize=e,this.updateConstraints()),e}get maximumSize(){const e=typeof this._maximumSize=="function"?this._maximumSize():this._maximumSize;return e!==this._evaluatedMaximumSize&&(this._evaluatedMaximumSize=e,this.updateConstraints()),e}get snap(){return this._snap}constructor(e,n){super(e,n,new Jg(e,n)),this._evaluatedMinimumSize=0,this._evaluatedMaximumSize=Number.POSITIVE_INFINITY,this._minimumSize=0,this._maximumSize=Number.POSITIVE_INFINITY,this._snap=!1,this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this.api.initialize(this),this.addDisposables(this._onDidChange,this.api.onWillVisibilityChange(r=>{const{isVisible:o}=r,{accessor:l}=this._params;l.setVisible(this,o)}),this.api.onActiveChange(()=>{const{accessor:r}=this._params;r.setActive(this)}),this.api.onDidConstraintsChangeInternal(r=>{(typeof r.minimumSize=="number"||typeof r.minimumSize=="function")&&(this._minimumSize=r.minimumSize),(typeof r.maximumSize=="number"||typeof r.maximumSize=="function")&&(this._maximumSize=r.maximumSize),this.updateConstraints()}),this.api.onDidSizeChange(r=>{this._onDidChange.fire({size:r.size})}))}setVisible(e){this.api._onDidVisibilityChange.fire({isVisible:e})}setActive(e){this.api._onDidActiveChange.fire({isActive:e})}layout(e,n){const[r,o]=this.orientation===ue.HORIZONTAL?[e,n]:[n,e];super.layout(r,o)}init(e){super.init(e),this._priority=e.priority,e.minimumSize&&(this._minimumSize=e.minimumSize),e.maximumSize&&(this._maximumSize=e.maximumSize),e.snap&&(this._snap=e.snap)}toJSON(){const e=r=>r===Number.MAX_SAFE_INTEGER||r===Number.POSITIVE_INFINITY?void 0:r,n=r=>r<=0?void 0:r;return Object.assign(Object.assign({},super.toJSON()),{minimumSize:n(this.minimumSize),maximumSize:e(this.maximumSize)})}updateConstraints(){this.api._onDidConstraintsChange.fire({maximumSize:this._evaluatedMaximumSize,minimumSize:this._evaluatedMinimumSize})}}function ww(u,e){return new gw(u,e).api}function Ew(u,e){const n=new _w(u,e);return new qg(n)}function Tw(u,e){const n=new vw(u,e);return new Wg(n)}function Sw(u,e){const n=new bw(u,e);return new va(n)}var Dw=Jm();const Aw=Qm(Dw),rv=(u,e)=>{const[n,r]=ce.useState(),o=ce.useRef(u.componentProps);return ce.useImperativeHandle(e,()=>({update:l=>{o.current=Object.assign(Object.assign({},o.current),l),r(Date.now())}}),[]),ce.createElement(u.component,o.current)};rv.displayName="DockviewReactJsBridge";const Cw=(()=>{let u=1;return{next:()=>`dockview_react_portal_key_${(u++).toString()}`}})(),Rw=ce.createContext({});class os{constructor(e,n,r,o,l){this.parent=e,this.portalStore=n,this.component=r,this.parameters=o,this.context=l,this._initialProps={},this.disposed=!1,this.createPortal()}update(e){if(this.disposed)throw new Error("invalid operation: resource is already disposed");this.componentInstance?this.componentInstance.update(e):this._initialProps=Object.assign(Object.assign({},this._initialProps),e)}createPortal(){if(this.disposed)throw new Error("invalid operation: resource is already disposed");if(!Ow(this.component))throw new Error("Dockview: Only React.memo(...), React.ForwardRef(...) and functional components are accepted as components");const e=ce.createElement(ce.forwardRef(rv),{component:this.component,componentProps:this.parameters,ref:o=>{this.componentInstance=o,Object.keys(this._initialProps).length>0&&(this.componentInstance.update(this._initialProps),this._initialProps={})}}),n=this.context?ce.createElement(Rw.Provider,{value:this.context},e):e,r=Aw.createPortal(n,this.parent,Cw.next());this.ref={portal:r,disposable:this.portalStore.addPortal(r)}}dispose(){var e;(e=this.ref)===null||e===void 0||e.disposable.dispose(),this.disposed=!0}}const ul=()=>{const[u,e]=ce.useState([]);ce.useDebugValue(`Portal count: ${u.length}`);const n=ce.useCallback(r=>{e(l=>[...l,r]);let o=!1;return it.from(()=>{if(o)throw new Error("invalid operation: resource already disposed");o=!0,e(l=>l.filter(h=>h!==r))})},[]);return[u,n]};function Ow(u){return typeof u=="function"||!!u?.$$typeof}class Xm{get element(){return this._element}constructor(e,n,r){this.id=e,this.component=n,this.reactPortalStore=r,this._onDidFocus=new j,this.onDidFocus=this._onDidFocus.event,this._onDidBlur=new j,this.onDidBlur=this._onDidBlur.event,this._element=document.createElement("div"),this._element.className="dv-react-part",this._element.style.height="100%",this._element.style.width="100%"}focus(){}init(e){this.part=new os(this.element,this.reactPortalStore,this.component,{params:e.params,api:e.api,containerApi:e.containerApi})}update(e){var n;(n=this.part)===null||n===void 0||n.update({params:e.params})}layout(e,n){}dispose(){var e;this._onDidFocus.dispose(),this._onDidBlur.dispose(),(e=this.part)===null||e===void 0||e.dispose()}}class qm{get element(){return this._element}constructor(e,n,r){this.id=e,this.component=n,this.reactPortalStore=r,this._element=document.createElement("div"),this._element.className="dv-react-part",this._element.style.height="100%",this._element.style.width="100%"}focus(){}init(e){this.part=new os(this.element,this.reactPortalStore,this.component,{params:e.params,api:e.api,containerApi:e.containerApi,tabLocation:e.tabLocation})}update(e){var n;(n=this.part)===null||n===void 0||n.update({params:e.params})}layout(e,n){}dispose(){var e;(e=this.part)===null||e===void 0||e.dispose()}}class Wm{get element(){return this._element}constructor(e,n,r){this.id=e,this.component=n,this.reactPortalStore=r,this._element=document.createElement("div"),this._element.className="dv-react-part",this._element.style.height="100%",this._element.style.width="100%"}init(e){this.part=new os(this.element,this.reactPortalStore,this.component,{group:e.group,containerApi:e.containerApi})}focus(){}update(e){var n,r,o;this.parameters&&(this.parameters.params=e.params),(n=this.part)===null||n===void 0||n.update({params:(o=(r=this.parameters)===null||r===void 0?void 0:r.params)!==null&&o!==void 0?o:{}})}layout(e,n){}dispose(){var e;(e=this.part)===null||e===void 0||e.dispose()}}class Nw{get element(){return this._element}get part(){return this._part}constructor(e,n,r){this.component=e,this.reactPortalStore=n,this._group=r,this.mutableDisposable=new wt,this._element=document.createElement("div"),this._element.className="dv-react-part",this._element.style.height="100%",this._element.style.width="100%"}init(e){this.mutableDisposable.value=new pe(this._group.model.onDidAddPanel(()=>{this.updatePanels()}),this._group.model.onDidRemovePanel(()=>{this.updatePanels()}),this._group.model.onDidActivePanelChange(()=>{this.updateActivePanel()}),e.api.onDidActiveChange(()=>{this.updateGroupActive()})),this._part=new os(this.element,this.reactPortalStore,this.component,{api:e.api,containerApi:e.containerApi,panels:this._group.model.panels,activePanel:this._group.model.activePanel,isGroupActive:this._group.api.isActive,group:this._group})}dispose(){var e;this.mutableDisposable.dispose(),(e=this._part)===null||e===void 0||e.dispose()}update(e){var n;(n=this._part)===null||n===void 0||n.update(e.params)}updatePanels(){this.update({params:{panels:this._group.model.panels}})}updateActivePanel(){this.update({params:{activePanel:this._group.model.activePanel}})}updateGroupActive(){this.update({params:{isGroupActive:this._group.api.isActive}})}}function qs(u,e){return u?n=>new Nw(u,e,n):void 0}const ko="props.defaultTabComponent";function Mw(u){return Wc.reduce((n,r)=>(r in u&&(n[r]=u[r]),n),{})}const av=ce.forwardRef((u,e)=>{const n=ce.useRef(null),r=ce.useRef(),[o,l]=ul();ce.useImperativeHandle(e,()=>n.current,[]);const h=ce.useRef({});return ce.useEffect(()=>{const d={};Wc.forEach(p=>{const m=p,v=u[m];m in u&&v!==h.current[m]&&(d[m]=v)}),r.current&&r.current.updateOptions(d),h.current=u},Wc.map(d=>u[d])),ce.useEffect(()=>{var d;if(!n.current)return;const p=(d=u.tabComponents)!==null&&d!==void 0?d:{};u.defaultTabComponent&&(p[ko]=u.defaultTabComponent);const m={createLeftHeaderActionComponent:qs(u.leftHeaderActionsComponent,{addPortal:l}),createRightHeaderActionComponent:qs(u.rightHeaderActionsComponent,{addPortal:l}),createPrefixHeaderActionComponent:qs(u.prefixHeaderActionsComponent,{addPortal:l}),createComponent:x=>new Xm(x.id,u.components[x.name],{addPortal:l}),createTabComponent(x){return new qm(x.id,p[x.name],{addPortal:l})},createWatermarkComponent:u.watermarkComponent?()=>new Wm("watermark",u.watermarkComponent,{addPortal:l}):void 0,defaultTabComponent:u.defaultTabComponent?ko:void 0},v=ww(n.current,Object.assign(Object.assign({},Mw(u)),m)),{clientWidth:y,clientHeight:b}=n.current;return v.layout(y,b),u.onReady&&u.onReady({api:v}),r.current=v,()=>{r.current=void 0,v.dispose()}},[]),ce.useEffect(()=>{if(!r.current)return()=>{};const d=r.current.onDidDrop(p=>{u.onDidDrop&&u.onDidDrop(p)});return()=>{d.dispose()}},[u.onDidDrop]),ce.useEffect(()=>{if(!r.current)return()=>{};const d=r.current.onWillDrop(p=>{u.onWillDrop&&u.onWillDrop(p)});return()=>{d.dispose()}},[u.onWillDrop]),ce.useEffect(()=>{r.current&&r.current.updateOptions({createComponent:d=>new Xm(d.id,u.components[d.name],{addPortal:l})})},[u.components]),ce.useEffect(()=>{var d;if(!r.current)return;const p=(d=u.tabComponents)!==null&&d!==void 0?d:{};u.defaultTabComponent&&(p[ko]=u.defaultTabComponent),r.current.updateOptions({defaultTabComponent:u.defaultTabComponent?ko:void 0,createTabComponent(m){return new qm(m.id,p[m.name],{addPortal:l})}})},[u.tabComponents,u.defaultTabComponent]),ce.useEffect(()=>{r.current&&r.current.updateOptions({createWatermarkComponent:u.watermarkComponent?()=>new Wm("watermark",u.watermarkComponent,{addPortal:l}):void 0})},[u.watermarkComponent]),ce.useEffect(()=>{r.current&&r.current.updateOptions({createRightHeaderActionComponent:qs(u.rightHeaderActionsComponent,{addPortal:l})})},[u.rightHeaderActionsComponent]),ce.useEffect(()=>{r.current&&r.current.updateOptions({createLeftHeaderActionComponent:qs(u.leftHeaderActionsComponent,{addPortal:l})})},[u.leftHeaderActionsComponent]),ce.useEffect(()=>{r.current&&r.current.updateOptions({createPrefixHeaderActionComponent:qs(u.prefixHeaderActionsComponent,{addPortal:l})})},[u.prefixHeaderActionsComponent]),ce.createElement("div",{style:{height:"100%",width:"100%"},ref:n},o)});av.displayName="DockviewComponent";class Zm extends xw{constructor(e,n,r,o){super(e,n),this.reactComponent=r,this.reactPortalStore=o}getComponent(){var e,n;return new os(this.element,this.reactPortalStore,this.reactComponent,{params:(n=(e=this._params)===null||e===void 0?void 0:e.params)!==null&&n!==void 0?n:{},api:this.api,containerApi:new qg(this._params.accessor)})}}function zw(u){return jc.reduce((n,r)=>(r in u&&(n[r]=u[r]),n),{})}const Iw=ce.forwardRef((u,e)=>{const n=ce.useRef(null),r=ce.useRef(),[o,l]=ul();ce.useImperativeHandle(e,()=>n.current,[]);const h=ce.useRef({});return ce.useEffect(()=>{const d={};jc.forEach(p=>{const m=p,v=u[m];m in u&&v!==h.current[m]&&(d[m]=v)}),r.current&&r.current.updateOptions(d),h.current=u},jc.map(d=>u[d])),ce.useEffect(()=>{if(!n.current)return()=>{};const d={createComponent:y=>new Zm(y.id,y.name,u.components[y.name],{addPortal:l})},p=Ew(n.current,Object.assign(Object.assign({},zw(u)),d)),{clientWidth:m,clientHeight:v}=n.current;return p.layout(m,v),u.onReady&&u.onReady({api:p}),r.current=p,()=>{r.current=void 0,p.dispose()}},[]),ce.useEffect(()=>{r.current&&r.current.updateOptions({createComponent:d=>new Zm(d.id,d.name,u.components[d.name],{addPortal:l})})},[u.components]),ce.createElement("div",{style:{height:"100%",width:"100%"},ref:n},o)});Iw.displayName="SplitviewComponent";class Km extends nv{constructor(e,n,r,o){super(e,n),this.reactComponent=r,this.reactPortalStore=o}getComponent(){var e,n;return new os(this.element,this.reactPortalStore,this.reactComponent,{params:(n=(e=this._params)===null||e===void 0?void 0:e.params)!==null&&n!==void 0?n:{},api:this.api,containerApi:new Wg(this._params.accessor)})}}function Gw(u){return Xc.reduce((n,r)=>(r in u&&(n[r]=u[r]),n),{})}const Lw=ce.forwardRef((u,e)=>{const n=ce.useRef(null),r=ce.useRef(),[o,l]=ul();ce.useImperativeHandle(e,()=>n.current,[]);const h=ce.useRef({});return ce.useEffect(()=>{const d={};Xc.forEach(p=>{const m=p,v=u[m];m in u&&v!==h.current[m]&&(d[m]=v)}),r.current&&r.current.updateOptions(d),h.current=u},Xc.map(d=>u[d])),ce.useEffect(()=>{if(!n.current)return()=>{};const d={createComponent:y=>new Km(y.id,y.name,u.components[y.name],{addPortal:l})},p=Tw(n.current,Object.assign(Object.assign({},Gw(u)),d)),{clientWidth:m,clientHeight:v}=n.current;return p.layout(m,v),u.onReady&&u.onReady({api:p}),r.current=p,()=>{r.current=void 0,p.dispose()}},[]),ce.useEffect(()=>{r.current&&r.current.updateOptions({createComponent:d=>new Km(d.id,d.name,u.components[d.name],{addPortal:l})})},[u.components]),ce.createElement("div",{style:{height:"100%",width:"100%"},ref:n},o)});Lw.displayName="GridviewComponent";class Fo{get element(){return this._element}constructor(e,n,r){this.id=e,this.component=n,this.reactPortalStore=r,this._element=document.createElement("div"),this._element.style.height="100%",this._element.style.width="100%"}init(e){this.part=new os(this.element,this.reactPortalStore,this.component,{params:e.params,api:e.api,title:e.title,containerApi:e.containerApi})}toJSON(){return{id:this.id}}update(e){var n;(n=this.part)===null||n===void 0||n.update(e.params)}dispose(){var e;(e=this.part)===null||e===void 0||e.dispose()}}function Uw(u){return qc.reduce((n,r)=>(r in u&&(n[r]=u[r]),n),{})}const Vw=ce.forwardRef((u,e)=>{const n=ce.useRef(null),r=ce.useRef(),[o,l]=ul();ce.useImperativeHandle(e,()=>n.current,[]);const h=ce.useRef({});return ce.useEffect(()=>{const d={};qc.forEach(p=>{const m=p,v=u[m];m in u&&v!==h.current[m]&&(d[m]=v)}),r.current&&r.current.updateOptions(d),h.current=u},qc.map(d=>u[d])),ce.useEffect(()=>{var d;if(!n.current)return()=>{};const p=(d=u.headerComponents)!==null&&d!==void 0?d:{},m={createComponent:x=>new Fo(x.id,u.components[x.name],{addPortal:l}),createHeaderComponent:x=>new Fo(x.id,p[x.name],{addPortal:l})},v=Sw(n.current,Object.assign(Object.assign({},Uw(u)),m)),{clientWidth:y,clientHeight:b}=n.current;return v.layout(y,b),u.onReady&&u.onReady({api:v}),r.current=v,()=>{r.current=void 0,v.dispose()}},[]),ce.useEffect(()=>{r.current&&r.current.updateOptions({createComponent:d=>new Fo(d.id,u.components[d.name],{addPortal:l})})},[u.components]),ce.useEffect(()=>{var d;if(!r.current)return;const p=(d=u.headerComponents)!==null&&d!==void 0?d:{};r.current.updateOptions({createHeaderComponent:m=>new Fo(m.id,p[m.name],{addPortal:l})})},[u.headerComponents]),ce.useEffect(()=>{if(!r.current)return()=>{};const d=r.current.onDidDrop(p=>{u.onDidDrop&&u.onDidDrop(p)});return()=>{d.dispose()}},[u.onDidDrop]),ce.createElement("div",{style:{height:"100%",width:"100%"},ref:n},o)});Vw.displayName="PaneviewComponent";function Bw(){const u={default:()=>xi.jsx(xi.Fragment,{}),canvas:()=>xi.jsx(rx,{})},e={default:r=>xi.jsx("div",{className:"panel-header",children:xi.jsx("span",{children:r.params.title})})},n=r=>{r.api.addPanel({id:"canvas",component:"canvas",tabComponent:"default",params:{title:"Canvas"}}),r.api.addPanel({id:"settings",component:"default",tabComponent:"default",params:{title:"Settings"},position:{referencePanel:"canvas",direction:"right"}}),r.api.addPanel({id:"files",component:"default",tabComponent:"default",params:{title:"Files"},position:{referencePanel:"canvas",direction:"left"}});const o=r.api.getPanel("canvas");o.group.locked=!0;const l=r.api.getPanel("files");l.group.locked=!0,l.api.setSize({width:300});const h=r.api.getPanel("settings");h.group.locked=!0,h.api.setSize({width:300})};return xi.jsx("div",{className:"app",children:xi.jsx(av,{className:"dockview-theme-abyss",onReady:n,components:u,tabComponents:e,singleTabMode:"fullwidth"})})}Ly.createRoot(document.getElementById("root")).render(xi.jsx(Xo.StrictMode,{children:xi.jsx(Bw,{})}));
